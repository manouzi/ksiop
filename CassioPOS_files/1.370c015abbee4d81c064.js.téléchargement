webpackJsonp([1,39],{1148:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.NewDeal=void 0;var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},d=a(0),p=r(d),f=a(13),m=a(24),h=r(m),y=a(10),g=a(14),b=a(2902),v=r(b),E=a(2931),O=r(E),C=a(526),P=r(C),w=a(2932),M=r(w),T=a(64),F=a(357),A=a(529);a(1119);var _=a(360),S=a(54),N=a(534),j=r(N),x=a(22),k=a(531),R=a(263),D=a(89),I=r(D),q=a(2818),L=a(2819),V=a(2727),B=a(2933),K=r(B),U=a(211),H=r(U),Q=a(208),G=a(43),W=a(55),Y="/pos/masterfacility",z=[],J=(0,y.defineMessages)({dealSaveSuccess:{id:"pos.deal.notify.save.success",defaultMessage:"Deal saved"},dealSaveError:{id:"pos.deal.notify.save.error",defaultMessage:"Cannot save deal"},dealEventError:{id:"pos.deal.notify.event.error",defaultMessage:"Cannot execute deal event"},actorSaveSuccess:{id:"pos.deal.notify.actor.save.success",defaultMessage:"Customer saved"},actorSaveError:{id:"pos.deal.notify.actor.save.error",defaultMessage:"Cannot save Customer"},dealUpdateSuccess:{id:"pos.deal.notify.update.success",defaultMessage:"Deal updated"},customerMandatory:{id:"pos.deal.errors.customer",defaultMessage:"Customer selection is mandatory"},borrowerMandatory:{id:"pos.deal.errors.borrower",defaultMessage:"Borrower selection is mandatory"},coborrowerMandatory:{id:"pos.deal.errors.coborrower",defaultMessage:"Co-Borrower selection is mandatory"},lastNameMandatory:{id:"pos.deal.errors.lastname",defaultMessage:"Last name required"},tradeNameMandatory:{id:"pos.deal.errors.tradename",defaultMessage:"Trade name required"},done:{id:"pos.deal.notify.event.done",defaultMessage:"Done"},ibanformat:{id:"pos.deal.client.contactreferences.iban",defaultMessage:"Incorrect IBAN format"},eventConfirmationMessage:{id:"pos.deal.event.confirmation.msg",defaultMessage:"Please confirm before running the"},eventsApplyButtonMessage:{id:"pos.deal.event.confirmation.apply.action",defaultMessage:"Apply"},eventsOkButtonMessage:{id:"pos.deal.event.confirmation.ok.action",defaultMessage:"Ok"},eventsCloseButtonMessage:{id:"pos.deal.event.confirmation.close.action",defaultMessage:"Close"},eventsCancelButtonMessage:{id:"pos.deal.event.confirmation.cancel.action",defaultMessage:"Cancel"}}),X=function(e,t){if(e){var a=e.deal;if(!a||!Object.keys(a).length)return{};var r=j.default.validate(e,t);if(a.listdealattribute&&a.listdealattribute.length>0){var n=a.listdealattribute.find(function(e){return e.datcode===Q.TPGTYPE});if(!n||!n.datstringdata){var o=a.listdealattribute.findIndex(function(e){return e.datcode===Q.TPGTYPE});r=(0,I.default)(r,"deal.listdealattribute["+o+"].datstringdata",S.GlobalMessages.fieldRequire)}}e.deal.tpgcode&&e.deal.listdealquote[0].tpgcode||(r=(0,I.default)(r,"deal.tpgcode",S.GlobalMessages.fieldRequire)),r=(0,V.validateAssets)(e,t,r);var s=t.accessKeys["pos.newdeal.step.prospect"];s&&!s.hidden&&(r=(0,q.validateProspect)(e,t,r));var l=t.accessKeys["pos.newdeal.step.client"];if(a.dosid&&l&&!l.hidden&&(r=(0,L.validateCustomer)(e,t,r)),!1===t.isMf){if(Object.keys(r).length){var i=[S.GlobalMessages.fieldsRequire];r._error=r._error?r._error.concat(i):i}if(!(!e.deal.listdealactor||e.deal.listdealactor.find(function(e){return e.rolcode===t.customerRolcode})||e.actors.find(function(e){return e.rolcode===t.customerRolcode}))){var u=[J.customerMandatory];r._error=r._error?r._error.concat(u):u}}return r}},Z=function(e,t,a,r){var n=(e.actors,{});if(r&&r.match(".iban")){var o=(0,H.default)(e,r);if(o)return(0,F.validateIban)(o).then(function(e){return e.data?e.data.ribid&&t((0,g.change)(a.form,r.replace(".iban",""),e.data)):n=(0,I.default)(n,r,J.ibanformat),n})}return Promise.resolve(n)},$=[W.CLIENT,W.COCLIEN,W.BORROWER,W.COBORROWER],ee=function(e,t,a){var r=(0,K.default)(a.map(function(e){return e.dpaordre}))+1;return t.length&&$.forEach(function(e){var r=a.find(function(t){return t.rolcode==e});!t.find(function(t){return t.rolcode==e})&&r&&(a=a.map(function(e){return e.rolcode===r.rolcode?c({},e,{action:"-"}):e}))}),t.forEach(function(e){var t=e.actor,n=t.listactorbankaccount&&t.listactorbankaccount.length?t.listactorbankaccount[t.listactorbankaccount.length-1].ribid:null,o=a.find(function(a){return a.actid===t.actid&&a.rolcode===e.rolcode}),s={rolcode:e.rolcode,actcode:t.actcode,actlibcourt:t.actlibcourt,actnom:t.actnom,actid:t.actid,ribiddec:n,ribidenc:n};if(o){var l=a.findIndex(function(e){return e.actid===t.actid});t.listactorbankaccount&&t.listactorbankaccount.length>0&&-1!=l&&(a=h.default.set(a,l,c({},o,s)))}else a=h.default.set(a,a.length,c({},s,{dpaordre:r++}))}),a},te=t.NewDeal=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleSaveClicked=function(e){if(r.props.dosid&&r.props.updateDocumentsProps(r.props.dosid),!r.props.error)return new Promise(function(t,a){r.saveActors(e).then(function(n){var o=h.default.set(e.deal,"listdealactor",ee(r.props.dispatch,n,e.deal.listdealactor));r.props.saveDeal(o).then(function(e){var a=e.deal.dosid;o.dosid?(T.notify.show(r.props.intl.formatMessage(J.dealUpdateSuccess),"success"),r.props.fetchDeal(a,r.props.stepIndex)):(T.notify.show(r.props.intl.formatMessage(J.dealSaveSuccess),"success"),x.hashHistory.push(k.DEAL+"/"+a)),t(e.deal)}).catch(function(e){a(e),T.notify.show(r.props.intl.formatMessage(J.dealSaveError),"error")})}).catch(function(e){throw a(e),T.notify.show(r.props.intl.formatMessage(J.dealSaveError),"error"),new Error(e)})})},r.handleCloseAction=function(){r.refs.eventConfirmationPopup.toggle()},r.handleOkAction=function(e,t){var a=null;t.tmffonction==Q.DELIVERY_EVENT_CODE&&(a=r.constructDeliveryEventData()),r.handleEventSelected(e,r.props.currentEvent,a),r.refs.eventConfirmationPopup.toggle()},r.constructDeliveryEventData=function(){return[{cdacolonne:"dpmnumserie",cdadatastring:r.props.dpmnumserie},{cdacolonne:"dpmdtrelease",cdadatadate:r.props.dpmdtrelease},{cdacolonne:"dpmdeliverymethod",cdadatastring:r.props.deliveryplace}]},r.handleEvent=function(e,t){r.props.error||(!0===t.needsConfirmation||t.tmffonction==Q.DELIVERY_EVENT_CODE?(r.props.setEventConfirmationMsg(t),r.refs.eventConfirmationPopup.toggle()):r.handleEventSelected(e,t,null))},r.handleEventSelected=function(e,t,a){if(!r.props.error)return new Promise(function(n,o){r.saveActors(e).then(function(o){var s=h.default.set(e.deal,"listdealactor",ee(r.props.dispatch,o,e.deal.listdealactor));r.props.executeEvent(s,t,a,function(){T.notify.show(r.props.intl.formatMessage(J.done),"success"),n(s)},function(e){throw T.notify.show(r.props.intl.formatMessage(J.dealEventError),"error"),new g.SubmissionError({_error:[]})})}).catch(function(e){throw o(e),T.notify.show(r.props.intl.formatMessage(J.dealEventError),"error"),new Error(e)})})},r.handleReset=function(){r.props.reset(),r.props.params.dealid?r.props.fetchDeal(r.props.params.dealid):r.props.resetVariant()},r.importPreconfiguredDealIfExist=function(){r.props.configQueryParam&&r.props.dispatch((0,F.patchDealFromImportedConfig)(r.props.configQueryParam))},n=a,l(r,n)}return i(t,e),u(t,[{key:"getChildContext",value:function(){return{accessKeys:this.props.accessKeys}}},{key:"componentWillMount",value:function(){var e=this.props.menuItems.filter(function(e){return e.visible}).map(function(e){return e.route});if((null==this.props.deals||null==this.props.params.dealid)&&-1==e.indexOf(k.DEAL))return void x.hashHistory.push(this.props.landingPage)}},{key:"componentWillUnmount",value:function(){this.props.closeDeal(),this.props.route==Y&&(this.props.setMfFlag(),this.props.initDealEvent(null))}},{key:"saveActors",value:function(e){var t=this;return new Promise(function(a,r){var n=[],o=e.actors.map(function(e,a){return t.props.saveActor(e,a).then(function(a){n.push({rolcode:e.rolcode,actor:a}),T.notify.show(t.props.intl.formatMessage(J.actorSaveSuccess),"success")}).catch(function(e){return T.notify.show(t.props.intl.formatMessage(J.actorSaveError),"error"),r(e)})});Promise.all(o).then(function(e){a(n)})})}},{key:"componentWillReceiveProps",value:function(e){if((!e.onEdit&&e.params.dealid!==this.props.params.dealid||e.params.dealid!==this.props.params.dealid||e.route.path!=this.props.route.path)&&(e.route.path==Y?this.props.newMF():e.params.dealid?this.props.fetchDeal(e.params.dealid,e.stepIndex):(this.props.newDeal(),this.props.cleanDocumentList())),this.props.tpgRefTable.length&&e.tpgcode!==this.props.tpgcode){var t=this.props.tpgRefTable.find(function(t){return t.code==e.tpgcode});t&&e.tpgcode&&this.props.dispatch((0,g.change)("dealForm","deal.dprnom",t.label+" (deal)"))}}},{key:"componentWillMount",value:function(){var e=this;this.props.route==Y?this.props.newMF():this.props.params.dealid?this.props.fetchDeal(this.props.params.dealid):(this.props.newDeal().then(function(){e.importPreconfiguredDealIfExist()}),this.props.setMfFlag()),this.props.dispatch((0,G.fetchReferenceTable)(G.tables.TPROFILGESTION))}},{key:"constructEventSpecificUI",value:function(e){var t=null,a=null;switch(e.tmffonction){case Q.DELIVERY_EVENT_CODE:t=!0,a=p.default.createElement(O.default,null);break;default:t=!1,a=null}return{showEventSpecificUI:t,eventSpecificSection:a}}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleSubmit,r=t.submitFailed,n=t.accessKeys,s=t.error,l=t.currentEvent,i=t.intl,u=o(t,["handleSubmit","submitFailed","accessKeys","error","currentEvent","intl"]),d=i.formatMessage,f=z,m=null,h=!1,y=null;if(l){var g=this.constructEventSpecificUI(l)||{};h=g.showEventSpecificUI,y=g.eventSpecificSection,m=l.confirmationMessage?l.confirmationMessage:d(J.eventConfirmationMessage)+" "+l.eventlabel}var b=p.default.createElement(P.default,{ref:"eventConfirmationPopup",title:m,onSave:a(function(t){return e.handleOkAction(t,e.props.currentEvent)}),onReset:this.handleCloseAction,bsSize:"md",saveDisabled:this.props.disabledEventApplyButton&&h,saveLabel:d(h?J.eventsApplyButtonMessage:J.eventsOkButtonMessage),resetLabel:d(h?J.eventsCloseButtonMessage:J.eventsCancelButtonMessage)},y);return this.props.isMf||(f=p.default.createElement(M.default,{submitFailed:r,syncErrors:u.errors,dispatch:this.props.dispatch,error:s,accessKeys:n})),p.default.createElement("div",{className:"row newDeal"},p.default.createElement("div",{className:"col-md-4 hidden-lg hidden-md top-summary"},f),p.default.createElement("from",{onSubmit:a(this.handleSaveClicked),ref:"form",className:"col-md-8"},p.default.createElement(v.default,c({form:"dealForm",accessKeys:n},this.props,{onSave:this.props.handleSubmit(this.handleSaveClicked),onReset:this.handleReset,onEvent:this.handleEvent}))),p.default.createElement("div",{className:"col-lg-4 col-md-4 hidden-xs hidden-sm"},f,b))}}]),t}(d.Component);te.childContextTypes={accessKeys:p.default.PropTypes.object},t.NewDeal=te=(0,g.reduxForm)({form:"dealForm",validate:X,asyncValidate:Z,asyncBlurFields:["actors[].actor.listactorbankaccount[].iban"],enableReinitialize:!0,keepDirtyOnReinitialize:!0,onSubmitFail:function(e,t,a){t((0,F.handleFaultyStep)(e,"dealForm"))}})(te);var ae=(0,_.accessKeysSelector)(),re=(0,g.formValueSelector)("dealForm"),ne=(0,g.formValueSelector)("deliveryForm"),oe=function(e,t){var a=t.route.path.split("(").shift(),r=(0,g.getFormValues)("dealForm")(e),n=ae(a,e.authentication.accesskeys,r,e.authentication.showHiddenField),o=(0,g.getFormSyncErrors)("dealForm")(e),s=(0,g.getFormSyncErrors)("deliveryForm")(e),l=e.routing.locationBeforeTransitions.query?e.routing.locationBeforeTransitions.query.config:null;n.options=n.options||{};var i=ne(e,"dpmnumserie"),u=ne(e,"dpmdtrelease"),c=ne(e,"deliveryplace");return{isMf:e.newdeal.isMF,initialValues:e.newdeal.formValues,dosid:e.newdeal.formValues.deal.dosid,stepIndex:e.newdeal.stepIndex,onEdit:e.newdeal.onEdit,currentJalcode:re(e,"deal.jalcode"),currentEvent:e.newdeal.currentEvent,accessKeys:n,errors:o,tpgcode:re(e,"deal.tpgcode"),tpgRefTable:(0,G.getReferenceTable)(e,G.tables.TPROFILGESTION).data,customerRolcode:e.newdeal.customerRolcode,route:a,configQueryParam:l,disabledEventApplyButton:!!s,menuItems:e.navigation.menuItems,landingPage:e.authentication.options.landingpage,dpmnumserie:i,dpmdtrelease:u,deliveryplace:c}},se={newDeal:F.newDeal,newMF:F.newMF,setMfFlag:F.setMfFlag,fetchDeal:F.fetchDeal,saveDeal:F.saveDeal,setEventConfirmationMsg:F.setEventConfirmationMsg,updateDocumentsProps:A.updateDocumentsProps,cleanDocumentList:A.cleanDocumentList,resetVariant:R.resetVariant,executeEvent:F.executeEvent,saveActor:F.saveActor,closeDeal:F.closeDeal,validateIban:F.validateIban,initDealEvent:F.initDealEvent};t.default=(0,f.connect)(oe,se)((0,y.injectIntl)(te))},213:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.default)(f),t=arguments[1];switch(t.type){case i.FETCH_LIST_DOC:return e.merge({documents:[],isLoading:!0});case i.FETCH_LIST_DOC_FAIL:return e.merge({documents:[],isLoading:!1});case i.FETCH_LIST_DOC_SUCCESS:return e.merge({documents:t.result.data.documentmanagementlist,isLoading:!1});case i.CLEAN_DOC_LIST:return e.merge({documents:[],isLoading:!1});case i.UPLOAD_DOC_SUCCESS:return e.merge({documents:t.result.data.documentmanagementlist});case i.DOC_DELETE_SUCCESS:var a=e.documents.filter(function(e){return e.dmaid!==t.dmaid});return e.merge({documents:a});case i.DOC_OCR_CHECK_SUCCESS:var r=e.documents.findIndex(function(e){return e.dmaid===t.docid});return e.setIn(["documents",r,"contentOk"],t.result.data.contentOk);case i.DOC_OCR_CHECK_FAIL:var r=e.documents.findIndex(function(e){return e.dmaid===t.docid});return e.setIn(["documents",r,"contentKo"],t.error.response.data.message);case i.FETCH_VALUE_AFTER_OCR_CHECK:var r=e.documents.findIndex(function(e){return e.dmaid===t.docid}),o=e.documents[r].contentOk;return e.setIn(["documents",r,"contentOk"],s({},o,{isLoading:!0}));case i.FETCH_VALUE_AFTER_OCR_CHECK_SUCCESS:var r=e.documents.findIndex(function(e){return e.dmaid===t.docid}),o=e.documents[r].contentOk,l=o.controls;return-1!=r&&t.result.data&&(l=[].concat(n(l),[{identifier:"OCR_Value",result:"OK",titleMsg:"Id number check",resultMsg:t.result.data}])),e.setIn(["documents",r,"contentOk"],s({},l,{controls:l,isLoading:!1}));case i.DMATYPE_CHANGE:var r=e.documents.findIndex(function(e){return e.dmaid===t.dmaid});return e.setIn(["documents",r,"dmatype"],t.doctype);case i.DMACAT_CHANGE:var r=e.documents.findIndex(function(e){return e.dmaid===t.dmaid});return e.setIn(["documents",r,"dmacat"],t.category);case i.DMAPREDEFTYPE_CHANGE:return e.merge({predefinedType:t.doctype});case i.DMAPREDEFDMAID_CHANGE:return e.merge({predefinedDmaid:t.dmaid});case i.DMASTATUS_CHANGE:var r=e.documents.findIndex(function(e){return e.dmaid===t.dmaid});return e.setIn(["documents",r,"dmastatus"],t.status);case i.DMACOMMENT_CHANGE:var r=e.documents.findIndex(function(e){return e.dmaid===t.dmaid});return e.setIn(["documents",r,"dmacomment"],t.comment);case i.UPLOAD_PDF:return e.merge({pdf:null,pdfStatus:"UPLOADING"});case i.UPLOAD_PDF_SUCCESS:return e.merge({pdf:{key:t.result.data.key},pdfStatus:"UPLOADED"});case i.UPLOAD_PDF_FAIL:case i.STATUS_PDF_FAIL:return e.merge({pdfStatus:"ERROR"});case i.STATUS_PDF_SUCCESS:var u=t.result.data,d=p.default.apis[p.default.masterApi],m=d.pdfSplitServices||d.api+"/upload-pdf/";return u.pages&&u.pages.forEach(function(e,t){e.pdfURL=m+u.key+"/page/"+t,e.previewURL=e.pdfURL+"/image",e.clientRotation=0,e.index=t}),e.merge({pdf:u,pdfStatus:u.status});case i.ROTATE_PAGE:var h=e.pdf.pages.findIndex(function(e){return e===t.page}),y=(t.page.clientRotation||0)+t.angle;return e.setIn(["pdf","pages",h,"clientRotation"],y);case i.CHANGE_DMA_TYPE_PAGE:var g=e.pdf.pages.findIndex(function(e){return e===t.page});return e.setIn(["pdf","pages",g,"dmaType"],t.dmaType);case i.UPLOAD_PDF_PROGRESS:var b=t.progress;return e=e.setIn(["pdfProgress"],Math.floor(100*b.loaded/b.total));case i.UPLOAD_ALL_PDF:return e.merge({pdfStatus:"UPLOADALL",pdfProgress:0});case i.UPLOAD_ALL_PDF_SUCCESS:return e.merge({pdfProgress:100});case i.UPLOAD_ALL_PDF_FAIL:return e.merge({pdfStatus:"UPLOADALL-FAILED"});case i.DISPATCH_PDF_DOC_TYPES:return e.merge({pdfStatus:"DISPATCHING",pdfProgress:0});case i.DISPATCH_PDF_DOC_TYPE_SUCCESS:return e.merge({pdfStatus:"DISPATCHING",pdfProgress:Math.floor((t.documentTypeIndex+1)/t.documentTypes.length*100)});case i.DISPATCH_PDF_DOC_TYPES_END:return e.merge({pdfStatus:"DISPATCHING",pdfProgress:100});case i.DISPATCH_PDF_DOC_TYPE_FAILED:return e.merge({pdfStatus:"DISPATCHING-FAILED"});case i.DISPATCH_PDF_INIT:return e.merge({pdf:null,pdfStatus:"INIT",pdfProgress:0,documentTypes:null,documentTypeIndex:0});case i.CHANGE_DMA_TYPE_PHOTO:return e.setIn(["photo","dmaType"],t.dmaType);case i.PHOTO_INIT:return e.merge({photo:{dmaType:null,progress:0,uploading:!1,error:null}});case i.PHOTO_FAIL:return e.merge({photo:{progress:0,uploading:!1,error:t.error}});case i.UPLOAD_PHOTO_PROGRESS:return e.merge({photo:{progress:t.progress,uploading:!0,error:null}});case i.FETCH_LIST_DOCUMENTS_TO_PRINT:return c.default.setIn(e,["documentsToPrint","loading"],!0);case i.FETCH_FAIL_LIST_DOCUMENTS_TO_PRINT:return c.default.setIn(e,["documentsToPrint","loading"],!1);case i.FETCH_SUCCESS_LIST_DOCUMENTS_TO_PRINT:return c.default.set(e,"documentsToPrint",c.default.merge(e.documentsToPrint,{loading:!1,list:t.result.data}));case i.FETCH_ALL_REPORT_SUCCESS:return c.default.set(e,"reportsToPrint",t.result.data);case i.SHOW_OCR_POPUP:return c.default.set(e,"showOcrPopup",t.value);default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=o;var l=a(529),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(l),u=a(24),c=r(u),d=a(74),p=r(d),f={readOnly:!1,documents:[],isLoading:!1,photo:{},documentsToPrint:{loading:!1,list:[]},printProposalReports:[],initOcrCheckModal:!1}},2638:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.GriddleFixFilterPager=t.InputDisplay=t.CheckBoxDisplay=t.RateTaxDisplay=t.AmountDisplay=t.DateDisplay=t.NumberDisplay=t.PercentDisplay=t.CurrencyDisplay=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},c=a(0),d=r(c),p=a(259),f=r(p),m=a(1103),h=r(m),y=a(1104),g=r(y),b=a(530),v=r(b),E=a(10),O=a(88),C=r(O),P=a(17),w=a(44),M=r(w),T=a(3),F=r(T),A=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.getStandardGridSection=a.getGridSection,a}return l(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.results&&e.results.length&&this._updateFilteredResults(this.state.filter,e.results)}},{key:"_updateFilteredResults",value:function(e,t){var a={page:0,filter:e};if(!e)return t;a.filteredResults=t.filter(function(t){for(var a=Object.keys(t),r=0;r<a.length;r++)if((t[a[r]]||"").toString().toLowerCase().indexOf(e.toLowerCase())>=0)return!0;return!1}),a.maxPage=this.getMaxPage(a.filteredResults),this.setState(a),this._resetSelectedRows()}},{key:"getGridSection",value:function(e,t,a,r,n){var o=this.getSortObject(),s=this.getMultipleSelectionObject(),l=this.shouldShowNoDataSection(e),i=this.getNoDataSection();return d.default.createElement("div",{className:"griddle-body"},d.default.createElement(_,{useGriddleStyles:this.props.useGriddleStyles,noDataSection:i,showNoData:l,columnSettings:this.columnSettings,rowSettings:this.rowSettings,sortSettings:o,multipleSelectionSettings:s,filterByColumn:this.filterByColumn,isSubGriddle:this.props.isSubGriddle,useGriddleIcons:this.props.useGriddleIcons,useFixedLayout:this.props.useFixedLayout,showPager:this.props.showPager,showSummary:this.props.showSummary,pagingContent:r,data:e,className:this.props.tableClassName,enableInfiniteScroll:this.isInfiniteScrollEnabled(),nextPage:this.nextPage,showTableHeading:this.props.showTableHeading,useFixedHeader:this.props.useFixedHeader,parentRowCollapsedClassName:this.props.parentRowCollapsedClassName,parentRowExpandedClassName:this.props.parentRowExpandedClassName,parentRowCollapsedComponent:this.props.parentRowCollapsedComponent,parentRowExpandedComponent:this.props.parentRowExpandedComponent,bodyHeight:this.props.bodyHeight,paddingHeight:this.props.paddingHeight,rowHeight:this.props.rowHeight,infiniteScrollLoadTreshold:this.props.infiniteScrollLoadTreshold,externalLoadingComponent:this.props.externalLoadingComponent,externalIsLoading:this.props.externalIsLoading,hasMorePages:n,onRowClick:this.props.onRowClick}))}}]),t}(f.default);t.default=A;var _=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"getNodeContent",value:function(){this.verifyProps();var e=this,t=!1;if(!this.props.externalIsLoading||this.props.enableInfiniteScroll){var a=e.props.data,r=null,n=null;if(this.props.enableInfiniteScroll&&null!==this.props.rowHeight&&void 0!==this.refs.scrollable){var o=e.getAdjustedRowHeight(),s=Math.ceil(e.state.clientHeight/o),l=Math.max(0,Math.floor(e.state.scrollTop/o)-.25*s),i=Math.min(l+1.25*s,this.props.data.length-1);a=a.slice(l,i+1);var u={height:l*o+"px"};r=d.default.createElement("tr",{key:"above-"+u.height,style:u});var c={height:(this.props.data.length-i)*o+"px"};n=d.default.createElement("tr",{key:"below-"+c.height,style:c})}var p=a.map(function(a,r){var n=void 0!==a.children&&a.children.length>0,o=e.props.rowSettings.getRowKey(a,r);return n&&(t=n),d.default.createElement(v.default,{useGriddleStyles:e.props.useGriddleStyles,isSubGriddle:e.props.isSubGriddle,parentRowExpandedClassName:e.props.parentRowExpandedClassName,parentRowCollapsedClassName:e.props.parentRowCollapsedClassName,parentRowExpandedComponent:e.props.parentRowExpandedComponent,parentRowCollapsedComponent:e.props.parentRowCollapsedComponent,data:a,key:o+"-container",uniqueId:o,columnSettings:e.props.columnSettings,rowSettings:e.props.rowSettings,paddingHeight:e.props.paddingHeight,multipleSelectionSettings:e.props.multipleSelectionSettings,rowHeight:e.props.rowHeight,hasChildren:n,tableClassName:e.props.className,onRowClick:e.props.onRowClick})});if(this.props.showNoData){var f=this.props.columnSettings.getVisibleColumnCount();p.push(d.default.createElement("tr",{key:"no-data-section"},d.default.createElement("td",{colSpan:f},this.props.noDataSection)))}return r&&p.unshift(r),n&&p.push(n),{nodes:p,anyHasChildren:t}}return null}},{key:"render",value:function(){var e=[],t=!1,a=this.getNodeContent();a&&(e=a.nodes,t=a.anyHasChildren);var r=null,n=null,o={width:"100%"};if(this.props.useFixedLayout&&(o.tableLayout="fixed"),this.props.enableInfiniteScroll&&(r={position:"relative",overflowY:"scroll",height:this.props.bodyHeight+"px",width:"100%"}),this.props.externalIsLoading){var s=null,l=null;this.props.useGriddleStyles&&(s={textAlign:"center",paddingBottom:"40px"}),l=this.props.columnSettings.getVisibleColumnCount();var i=this.props.externalLoadingComponent?d.default.createElement(this.props.externalLoadingComponent,null):d.default.createElement(C.default,null);n=d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("td",{style:s,colSpan:l},i)))}var u=this.props.showTableHeading?d.default.createElement(g.default,{useGriddleStyles:this.props.useGriddleStyles,useGriddleIcons:this.props.useGriddleIcons,sortSettings:this.props.sortSettings,multipleSelectionSettings:this.props.multipleSelectionSettings,columnSettings:this.props.columnSettings,filterByColumn:this.props.filterByColumn,rowSettings:this.props.rowSettings}):void 0;t||(e=d.default.createElement("tbody",null,e));var c=d.default.createElement("tbody",null);if(this.props.showPager||this.props.showSummary){var p=this.props.showSummary?this.renderSummary():null,f=this.props.showPager?this.renderPager():null;c=d.default.createElement("tbody",null,[p,f])}return this.props.useFixedHeader?(this.props.useGriddleStyles&&(o.tableLayout="fixed"),d.default.createElement("div",null,d.default.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&o||null},u),d.default.createElement("div",{ref:"scrollable",onScroll:this.gridScroll,style:r},d.default.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&o||null},e,n,c)))):d.default.createElement("div",{ref:"scrollable",onScroll:this.gridScroll,style:r},d.default.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&o||null},u,e,n,c))}},{key:"renderPager",value:function(){var e={"footer-container":!0,"use-griddle-styles-for-paging":this.props.useGriddleStyles,"use-griddle-styles-for-paging-extra-height":this.props.showNoData};return d.default.createElement("tr",null,d.default.createElement("td",{colSpan:this.props.multipleSelectionSettings.isMultipleSelection?this.props.columnSettings.getVisibleColumnCount()+1:this.props.columnSettings.getVisibleColumnCount(),className:(0,F.default)(e)},this.props.showNoData?null:this.props.pagingContent))}},{key:"renderSummary",value:function(){var e=this,t=this.props.columnSettings.columnMetadata.map(function(t){var a=null;if(t.summaryLabel&&(a=t.summaryLabel),t.summaryType){switch(t.summaryType.toUpperCase()){case"AVERAGE":a=e.props.data.reduce(function(e,a){return e+=a[t.columnName]},0)/e.props.data.length;case"SUM":default:a=e.props.data.reduce(function(e,a){return e+(a[t.columnName]||0)},0)}if(t.customComponent){var r=Object.assign({},e.props.data);a=d.default.createElement(t.customComponent,{data:a,rowData:r,metadata:t})}}return d.default.createElement("td",null,a)});return d.default.createElement("tr",{className:"summary"},t)}}]),t}(h.default);A.DefaultProps={columns:[],gridMetadata:null,columnMetadata:[],rowMetadata:null,results:[],initialSort:"",gridClassName:"",tableClassName:"",customRowComponentClassName:"",settingsText:"Settings",filterPlaceholderText:"Filter search results",nextText:"Next",previousText:"Previous",maxRowsText:"Rows per page",enableCustomFormatText:"Enable Custom Formatting",childrenColumnName:"children",metadataColumns:[],showFilter:!1,showSettings:!1,useCustomRowComponent:!1,useCustomGridComponent:!1,useCustomPagerComponent:!1,useCustomFilterer:!1,useCustomFilterComponent:!1,useGriddleStyles:!0,useGriddleIcons:!0,customRowComponent:null,customGridComponent:null,customPagerComponent:{},customFilterComponent:null,customFilterer:null,globalData:null,enableToggleCustom:!1,noDataMessage:"There is no data to display.",noDataClassName:"griddle-nodata",customNoDataComponent:null,allowEmptyGrid:!1,showTableHeading:!0,showPager:!0,useFixedHeader:!1,useExternal:!1,externalSetPage:null,externalChangeSort:null,externalSetFilter:null,externalSetPageSize:null,externalMaxPage:null,externalCurrentPage:null,externalSortColumn:null,externalSortAscending:!0,externalLoadingComponent:null,externalIsLoading:!1,enableInfiniteScroll:!1,bodyHeight:null,paddingHeight:5,rowHeight:25,infiniteScrollLoadTreshold:50,useFixedLayout:!0,isSubGriddle:!1,enableSort:!0,onRowClick:null,sortAscendingClassName:"sort-ascending",sortDescendingClassName:"sort-descending",parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",settingsToggleClassName:"settings",nextClassName:"griddle-next",previousClassName:"griddle-previous",headerStyles:{},sortAscendingComponent:" ▲",sortDescendingComponent:" ▼",sortDefaultComponent:null,parentRowCollapsedComponent:"▶",parentRowExpandedComponent:"▼",settingsIconComponent:"",nextIconComponent:"",previousIconComponent:"",isMultipleSelection:!1,selectedRowIds:[],uniqueIdentifier:"id"};t.CurrencyDisplay=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.data||"";return d.default.createElement(E.FormattedNumber,{value:e,format:"currencyFormat"})}}]),t}(c.Component),t.PercentDisplay=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.data;return e>1&&(e=parseFloat(e/100)),d.default.createElement(E.FormattedNumber,{value:e,style:"percent"})}}]),t}(c.Component),t.NumberDisplay=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){return d.default.createElement(E.FormattedNumber,{value:this.props.data})}}]),t}(c.Component),t.DateDisplay=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=new Date(this.props.data);return d.default.createElement(E.FormattedDate,{value:e})}}],[{key:"toJsonExport",value:function(e){return new Date(e.data).toLocaleDateString(e.state.locales.lang)}}]),t}(c.Component),t.AmountDisplay=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.data||"";return d.default.createElement(E.FormattedNumber,{value:e,format:"currencyFormat",currency:this.props.metadata.customComponentMetadata.currencycode})}}]),t}(c.Component),t.RateTaxDisplay=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=void 0;if(this.props.metadata&&this.props.metadata.customComponentMetadata&&this.props.metadata.customComponentMetadata.getTaxRate){var t=this.props.metadata.customComponentMetadata.getTaxRate(this.props.data);e=t&&t.taxrate?t.taxrate/100:0}else e=this.props.data||"";return d.default.createElement(E.FormattedNumber,{value:e,style:"percent"})}}]),t}(c.Component),t.CheckBoxDisplay=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=function(e){a.props.metadata.customComponentMetadata.handleCheckBoxClick?a.props.metadata.customComponentMetadata.handleCheckBoxClick(a.props.rowData,!a.props.data):a.props.metadata.customComponentMetadata.onChange(e,a.props.rowData,a.props.metadata.columnName)},a}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.data?this.props.data:!!this.props.rowData.active;return d.default.createElement(P.Checkbox,{checked:e,onChange:this.handleChange})}}]),t}(c.Component),t.InputDisplay=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.data},a}return l(t,e),i(t,[{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this;return d.default.createElement(M.default,{value:this.state.value,className:"form-control",onChange:function(t){return e.props.metadata.customComponentMetadata.onChange(t,e.props.rowData,e.props.metadata.columnName)},updateOnEnter:!0,readOnly:!1})}}]),t}(c.Component),t.GriddleFixFilterPager=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.results&&e.results.length&&this._updateFilteredResults(this.state.filter,e.results)}},{key:"_updateFilteredResults",value:function(e,t){var a={page:0,filter:e};e&&(this.props.useCustomFilterer?a.filteredResults=this.props.customFilterer(t,e):a.filteredResults=t.filter(function(t){for(var a=Object.keys(t),r=0;r<a.length;r++)if((t[a[r]]||"").toString().toLowerCase().indexOf(e.toLowerCase())>=0)return!0;return!1}),a.maxPage=this.getMaxPage(a.filteredResults),this.setState(a),this._resetSelectedRows())}}]),t}(f.default)},2639:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(13),p=a(1107),f=r(p),m=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props.data;if(this.props.options){var a=this.props.options.find(function(t){return t.code==e.props.data});a?t=a.label:this.props.emptyValue&&(t=this.props.emptyValue)}return c.default.createElement("span",null,t)}}]),t}(u.Component),h=function(e,t){return{refTable:t.metadata.customComponentMetadata.refTable,refParams:t.metadata.customComponentMetadata.refParams,allowEmptyParams:t.metadata.customComponentMetadata.allowEmptyParams,emptyValue:t.metadata.customComponentMetadata.emptyValue}};t.default=(0,d.connect)(h)((0,f.default)(m))},2641:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),p=a(0),f=r(p),m=a(3),h=r(m),y=a(13),g=a(43),b=function(e){function t(){return l(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.code,a=e.wrapper,r=e.format_label,n=e.labels,l=e.colors,i=(e.dispatch,e.className),u=s(e,["code","wrapper","format_label","labels","colors","dispatch","className"]),d=a||"span",p=o({badge:!0},i,i),m=void 0,y=void 0,g=t||this.props.data;return m=this.findCodeIn(g,n),y=this.findCodeIn(g,l),m=m&&m.label||g,r&&(m=r(m)),y=y&&y.label,f.default.createElement(d,c({className:(0,h.default)(p),style:{backgroundColor:y}},u),m)}},{key:"findCodeIn",value:function(e,t){return t.find(function(t){return t.code==e})}}]),t}(p.Component),v=function(e,t){return{labels:(0,g.getReferenceTable)(e,g.tables.LANJALON,t.paramsLabels).data,colors:(0,g.getReferenceTable)(e,g.tables.COLORJALON,t.paramscolors).data}};t.default=(0,y.connect)(v)(b)},2643:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(3),p=r(d),f=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,a=this.props.tabindex?this.props.tabindex:"",r=this.props,n=r.accessKeys,o=r.tabs,s=[];if(o.forEach(function(e){var t=n?n[e.id?e.id:""]:void 0;t&&t.hidden||s.push(e)}),!s||0==s.length)return!1;var l=s.find(function(e){return e.active}),i=l?l.key:s[0].key,u={"nav-tabs-custom":!0};this.props.className&&this.props.className.split(" ").forEach(function(e){e&&(u[e]=!0)});var d=s.map(function(t){var r=t.title;return e.context.showAccessKeys&&(r='"component": "'+e.tab.id+'"'),c.default.createElement("li",{key:t.key,className:t.key===i?"active":"",onClick:function(){e.props.handleTabChange&&e.props.handleTabChange(t.key)}},c.default.createElement("a",{"data-toggle":"tab",href:"#"+a+t.key,"aria-expanded":t.key===i},r))}),f=s.map(function(e){return c.default.createElement("div",{key:e.key,id:a+e.key,className:"tab-pane"+(e.key===i?" active":"")},e.body)});return c.default.createElement("div",{className:(0,p.default)(u)},c.default.createElement("ul",{className:"nav nav-tabs"},d),c.default.createElement("div",{className:"tab-content"},f,t.children))}}]),t}(c.default.Component);t.default=f},2644:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(356),m=r(f),h=a(528),y=r(h),g=a(3),b=r(g),v=a(14),E=a(10),O=a(17),C=a(211),P=r(C),w=a(80),M=r(w),T=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return a.state={percentSelected:!1},a}return i(t,e),c(t,[{key:"isReadOnly",value:function(){return!1}},{key:"isPercentSelected",value:function(){return this.state&&!!this.state.percentSelected}},{key:"isCurrencySelected",value:function(){return!this.percentSelected}},{key:"handleCurrencyClick",value:function(e){var t=this;this.setState({percentSelected:!1}),e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.currencyField.focus()},100)}},{key:"handlePercentClick",value:function(e){var t=this;this.setState({percentSelected:!0}),e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.percentField.focus()},100)}},{key:"render",value:function(){var e=this,t=this.state,a=this.props,r=a.readOnly,n=a.hidden,s=a.currencyValue,l=a.percentValue,i=a.currencyCode,c=a.id,d=a.akField,f=o(a,["readOnly","hidden","currencyValue","percentValue","currencyCode","id","akField"]),h=this.isReadOnly()||this.props.disabled,g=this.context.accessKeys||f.accessKeys;g=g||{};var C=g[s],w=g[l];if(n||g&&C&&C.hidden&&w&&w.hidden)return!1;var T={"form-group":!0,"read-only":r};f.groupClassName&&(T[f.groupClassName]=!0);var F={percentOrCurrency:!0,"percentOrCurrency-readOnly":r,leash:!f.unleash};t.percentSelected?F.percentSelected=!0:F.currencySelected=!0;var A={btn:!0,"btn-primary":!t.percentSelected,"btn-unchecked":t.percentSelected},_={btn:!0,"btn-primary":t.percentSelected,"btn-unchecked":!t.percentSelected},S=this.context.intl.formatNumber(0,u({},this.context.intl.formats.number.currencyFormat,{currency:i||this.context.intl.formats.number.currencyFormat.currency})).replace(/[0-9]|[,. ]/g,"").trim(),N=p.default.createElement("button",{disabled:r,className:(0,b.default)(A),onClick:function(t){return e.handleCurrencyClick(t)}},S),j=p.default.createElement("button",{disabled:r,className:(0,b.default)(_),onClick:function(t){return e.handlePercentClick(t)}},"%"),x=f.onChange||f.onValueChange,k=p.default.createElement("div",{className:(0,b.default)(F)},p.default.createElement(O.Row,null,p.default.createElement(v.Field,u({component:m.default,groupClassName:"currency col-lg-7 col-md-12",ref:"currency",withRef:!0,name:s},C,{currencyCode:i,prefixButton:N,disabled:h||t.percentSelected,onChange:x,readOnly:r})),p.default.createElement(v.Field,u({component:y.default,groupClassName:"percent col-lg-5 col-md-12",ref:"percent",withRef:!0,name:l},w,{prefix:"%",prefixButton:j,numberOfDigitAfterDecimal:"2",disabled:h||!t.percentSelected,onChange:function(e,t){return x(e,t*f.baseValue/100)},readOnly:r}))));if(f.unleash&&(k=p.default.createElement("div",{className:(0,b.default)(F)},p.default.createElement(O.Row,null,p.default.createElement(O.Col,{md:6},p.default.createElement(v.Field,u({component:m.default,groupClassName:"currency",ref:"currency",withRef:!0,name:s},C,{currencyCode:i,prefixButton:N,disabled:h||t.percentSelected,onChange:x,readOnly:r}))),p.default.createElement(O.Col,{md:6},p.default.createElement(v.Field,u({component:y.default,groupClassName:"percent",ref:"percent",withRef:!0,name:l},w,{prefix:"%",prefixButton:j,numberOfDigitAfterDecimal:"2",onChange:function(e,t){return x(e,t*f.baseValue/100)},disabled:h||!t.percentSelected,readOnly:r})))))),f.readAndWrite&&(k=p.default.createElement("div",{className:(0,b.default)(F)},p.default.createElement(O.Row,null,p.default.createElement(v.Field,u({component:m.default,groupClassName:"currency col-lg-7 col-md-12",ref:"currency",withRef:!0,name:s},C,{currencyCode:i,prefixButton:N,onChange:x,readOnly:r})),p.default.createElement(v.Field,u({component:y.default,groupClassName:"percent col-lg-5 col-md-12",ref:"percent",withRef:!0,name:l},w,{prefix:"%",prefixButton:j,numberOfDigitAfterDecimal:"2",onChange:function(e,t){return x(e,t*f.baseValue/100)},readOnly:r}))))),!f.title)return k;var R=!1,D=null;if(this.props.names){var I=(0,P.default)(f,s)||{},q=I.meta,L=(0,P.default)(f,l)||{},V=L.meta,B=q&&q.touched&&q.error,K=V&&V.touched&&V.error;R=B||K,R&&(D=p.default.createElement(O.HelpBlock,null,B&&p.default.createElement(E.FormattedMessage,q.error)," ",p.default.createElement("br",null),K&&p.default.createElement(E.FormattedMessage,V.error)))}var U={error:R||t.error};return console.log("Render percent "+r),p.default.createElement(O.FormGroup,{bsClass:(0,b.default)(T),validationState:(0,b.default)(U)||void 0},p.default.createElement(O.ControlLabel,null,f.title),k,D,p.default.createElement(M.default,{name:s,id:c,title:f.title,akField:d}),f.children)}},{key:"currencyField",get:function(){return this.refs.currency&&this.refs.currency.getRenderedComponent()}},{key:"percentField",get:function(){return this.refs.percent&&this.refs.percent.getRenderedComponent()}}]),t}(d.Component);t.default=T,T.contextTypes={intl:d.PropTypes.object.isRequired,accessKeys:d.PropTypes.object}},2647:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(28),f=r(p),m=a(17),h=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleButtonClick=function(e){r.props.onButtonClick&&r.props.onButtonClick(e)},n=a,s(r,n)}return l(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.hasPopup,a=this.props.complete?"primary":"default",r=i({type:"primary",widthBorder:!0,tools:0==t?[]:d.default.createElement("div",{title:"",className:"box-tools pull-right"},d.default.createElement("div",{"data-toggle":"btn-toggle",className:"btn-group"},d.default.createElement(m.Button,{bsStyle:a,onClick:this.handleButtonClick},d.default.createElement("i",{className:e.specificIcon||"fa fa-edit"},this.context.showAccessKeys?this.props.popupId:null))))},e);return d.default.createElement(f.default,r)}}]),t}(d.default.Component);t.default=h,h.contextTypes={showAccessKeys:d.default.PropTypes.bool}},2649:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DEVDECIMAL=t.COMPONENTACCESSORIES_SITEOPTION=t.COMPONENTDELIVERY_SITEOPTION=t.COMPONENTCARTEGRISE_SITEOPTION=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(262),l=(t.COMPONENTCARTEGRISE_SITEOPTION="COMPONENTCARTEGRISE",t.COMPONENTDELIVERY_SITEOPTION="COMPONENTDELIVERY",t.COMPONENTACCESSORIES_SITEOPTION="COMPONENTACCESSORIES",t.DEVDECIMAL=2,function(){function e(){r(this,e)}return o(e,null,[{key:"isetLibelle",value:function(e,t){return e.set("dpmlibelle",t)}},{key:"updateDrawnAsset",value:function(e,t){return e.set("listdealasset",[t])}},{key:"getAssetIndex",value:function(e,t){return e.listdealasset.findIndex(function(e){return e.dpmordre==t.dpmordre})}},{key:"roundValueFromDevParam",value:function(e,t){return Number(e.toFixed(t))}}]),e}());l.getComponentsBySiteOption=function(e,t){var a=[];if(e&&t&&t.tpatexte){t.tpatexte.split(";").forEach(function(t){var r=e.find(function(e){return e.optcode==t});r&&a.push(n({amountincludingtax:(0,s.parseFloatOrEmpty)(r.dmdprixunitaire)+(0,s.parseFloatOrEmpty)(r.dmdmttax)},r))})}return a},l.getAmountIncludingTaxAmount=function(e,t,a){var r=(0,s.parseFloatOrEmpty)(a||0),n=null;return e&&(n=e.find(function(e){return e.taxcode===t})),r+r*(n?n.taxrate/100:0)},l.getAmountExcludingTaxAmount=function(e,t,a){var r=(0,s.parseFloatOrEmpty)(a||0),n=null;return e&&(n=e.find(function(e){return e.taxcode===t})),r/(1+(n?n.taxrate/100:0))},l.getOptionsValue=function(e){if(e){return e.reduce(function(e,t){return t&&t.optcode&&!t.dmdcodeproduit?e+t.dmdprixunitaire:e},0)}return 0},t.default=l},2651:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(356),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return"formatted-currency"}},{key:"isReadOnly",value:function(){return!0}}]),t}(u.default);t.default=c},2655:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messages=void 0;var r=a(10);t.messages=(0,r.defineMessages)({collateralClassPlaceHolder:{id:"pos.deal.collateralclass.placeholder",defaultMessage:"Select a collateral classification"},assetCategPlaceHolder:{id:"pos.deal.assetcateg.placeholder",defaultMessage:"Select a category"},assetMakePlaceHolder:{id:"pos.deal.assetmake.placeholder",defaultMessage:"Select a constructor"},assetModelPlaceHolder:{id:"pos.deal.assetmodel.placeholder",defaultMessage:"Select a model"},assetfinishPlaceHolder:{id:"pos.deal.assetfinish.placeholder",defaultMessage:"Select a finish"},assetVariantPlaceHolder:{id:"pos.deal.assetvariant.placeholder",defaultMessage:"Select a variant"},assetEnergyPlaceHolder:{id:"pos.deal.assetenergy.placeholder",defaultMessage:"Select an energy"},assetVATPlaceHolder:{id:"pos.deal.assetvat.placeholder",defaultMessage:"VAT"},assetTaxCodePlaceHolder:{id:"pos.deal.assettaxcode.placeholder",defaultMessage:"Select a tax code"},addAssetLabel:{id:"pos.deal.assets.btn.add",defaultMessage:"Add asset"},importAssetLabel:{id:"pos.deal.assets.btn.import",defaultMessage:"Import asset(s)"},copyAssetLabel:{id:"pos.deal.assets.btn.copy",defaultMessage:"Copy asset"},removeAssetLabel:{id:"pos.deal.assets.btn.remove",defaultMessage:"Remove asset"},productFamilyPlaceHolder:{id:"pos.deal.assets.generalinfo.productfamily.placeholder",defaultMessage:"Select a product family"},modelYearPlaceHolder:{id:"pos.deal.assets.modelyear.placeholder",defaultMessage:"Select model year"},enginePlaceHolder:{id:"pos.deal.assets.engine.placeholder",defaultMessage:"Select an engine"},vehicleTypePlaceHolder:{id:"pos.deal.assets.vehicletype.placeholder",defaultMessage:"Select vehicle type"},napplaceholder:{id:"pos.deal.assets.napcode.placeholder",defaultMessage:"Select asset type"},assetOptionsPlaceHolder:{id:"pos.deal.assetoptions.placeholder",defaultMessage:"Options"},addAssetOptionsLabel:{id:"pos.deal.assets.options.btn.add",defaultMessage:"Add options"},editAssetOptionsLabel:{id:"pos.deal.assets.options.btn.edit",defaultMessage:"Edit options"},assetRegistrationPlaceHolder:{id:"pos.deal.assetregistration.placeholder",defaultMessage:"Registration tax"},assetAccessoriesPlaceHolder:{id:"pos.deal.assetaccessories.placeholder",defaultMessage:"Accessories"},assetDeliveryFeesPlaceHolder:{id:"pos.deal.assetdeliveryfees.placeholder",defaultMessage:"Delivery fees"},departmentPlaceHolder:{id:"pos.deal.assetregistration.department.placeholder",defaultMessage:"Select department"},departmentCheckboxTitle:{id:"pos.deal.assetregistration.department.checkbox",defaultMessage:"Carte grise"},futureDeliveryDate:{id:"pos.deal.asset.dpmrelase.error",defaultMessage:"Delivery date cannot be in the past"},popupFilterPlaceHolder:{id:"pos.deal.assets.popups.filter.placeholder",defaultMessage:"Filter results"},noDataMessage:{id:"pos.deal.assets.popups.nodatamessage.label",defaultMessage:"There is no data to display"},previousPageLabel:{id:"pos.deal.assets.popups.griddle.previouspage.label",defaultMessage:"Previous"},nextPageLabel:{id:"pos.deal.assets.popups.griddle.nextpage.label",defaultMessage:"Next"}})},2656:function(e,t){e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},2657:function(e,t){e.exports={L:1,M:0,Q:3,H:2}},2658:function(e,t,a){function r(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var a=0;a<e.length&&0==e[a];)a++;this.num=new Array(e.length-a+t);for(var r=0;r<e.length-a;r++)this.num[r]=e[r+a]}var n=a(2659);r.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),a=0;a<this.getLength();a++)for(var o=0;o<e.getLength();o++)t[a+o]^=n.gexp(n.glog(this.get(a))+n.glog(e.get(o)));return new r(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=n.glog(this.get(0))-n.glog(e.get(0)),a=new Array(this.getLength()),o=0;o<this.getLength();o++)a[o]=this.get(o);for(var o=0;o<e.getLength();o++)a[o]^=n.gexp(n.glog(e.get(o))+t);return new r(a,0).mod(e)}},e.exports=r},2659:function(e,t){for(var a={glog:function(e){if(e<1)throw new Error("glog("+e+")");return a.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return a.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},r=0;r<8;r++)a.EXP_TABLE[r]=1<<r;for(var r=8;r<256;r++)a.EXP_TABLE[r]=a.EXP_TABLE[r-4]^a.EXP_TABLE[r-5]^a.EXP_TABLE[r-6]^a.EXP_TABLE[r-8];for(var r=0;r<255;r++)a.LOG_TABLE[a.EXP_TABLE[r]]=r;e.exports=a},2660:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}function l(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=a(34),p=a(1108),f=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hasUserMedia:!1},e}return s(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.initController,r=t.onFreeze,n=this.state.hasUserMedia;l()&&(n||this.requestUserMedia(),a&&a(this),this._watchDog=setInterval(function(){if(e._timeUpdate){var t=Date.now();t-e._timeUpdate<p.constants.FREEZE_MS||(console.error("FREEEEEEEEZE !",t-e._timeUpdate),r&&r())}},1e3))}},{key:"componentWillUpdate",value:function(e,t){var a=this,r=this.props.videoSourceId;this._timeUpdate=0,e.videoSourceId!==r&&(this._userMediaRequested=!1,this._timeUpdate=0,this.closeStream(),setTimeout(function(){a._timeUpdate=0,a.requestUserMedia()},1e3))}},{key:"requestUserMedia",value:function(){var e=this,t=this.props,a=t.audioSource,r=t.videoSource,n=t.videoSourceId,o=t.audio;if(!this._userMediaRequested){this._userMediaRequested=!0;var s=l(),i=function(t,a){var r={};a&&a.deviceId&&(r.video={deviceId:{exact:a.deviceId}}),t&&t.deviceId&&(r.audio={deviceId:{exact:t.deviceId}}),s.call(navigator,r,function(t){e.handleUserMedia(null,t)},function(t){e.handleUserMedia(t)})};return a||r?void i(a,r):"mediaDevices"in navigator?void navigator.mediaDevices.enumerateDevices().then(function(e){e.forEach(function(e){console.log("Device kind="+e.kind+" label="+e.label+" id="+e.deviceId)});var t=void 0;o&&(t=e.find(function(e){return"audio"===e.kind||"audioinput"===e.kind}));var a=e.find(function(e){return("video"===e.kind||"videoinput"===e.kind)&&(!n||e.deviceId===n)});i(t,a)}).catch(function(t){console.error("Invocation error=",t),e.handleUserMedia(t)}):"MediaStreamTrack"in window?void window.MediaStreamTrack.getSources(function(e){e.forEach(function(e){console.log("Source kind="+e.kind+" label="+e.label+" id="+e.id)});var t=void 0;o&&(t=e.find(function(e){return"audio"===e.kind||"audioinput"===e.kind}));var a=e.find(function(e){return("video"===e.kind||"videoinput"===e.kind)&&(!n||e.deviceId===n)});i(t&&t.id,a&&a.id)}):void 0}}},{key:"handleUserMedia",value:function(e,t){var a=this.props.onUserMedia;if(e)return this.setState({hasUserMedia:!1,mediaError:e,stream:null}),void a(e);var r=window.URL.createObjectURL(t);this.setState({hasUserMedia:!0,mediaError:null,src:r,stream:t}),a(null,r,t)}},{key:"closeStream",value:function(){var e=this.state,t=e.stream,a=e.src;if(t){if(t.stop&&t.stop(),t.getVideoTracks)try{var r=!0,n=!1,o=void 0;try{for(var s,l=t.getVideoTracks()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){s.value.stop()}}catch(e){n=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}}catch(e){console.error(e)}if(t.getAudioTracks)try{var i=!0,u=!1,c=void 0;try{for(var d,p=t.getAudioTracks()[Symbol.iterator]();!(i=(d=p.next()).done);i=!0){d.value.stop()}}catch(e){u=!0,c=e}finally{try{!i&&p.return&&p.return()}finally{if(u)throw c}}}catch(e){console.error(e)}}a&&window.URL.revokeObjectURL(a)}},{key:"componentWillUnmount",value:function(){var e=this.props.initController;this._watchDog&&(clearInterval(this._watchDog),delete this._watchDog),e&&e(null),this.closeStream(),this._userMediaRequested=!1}},{key:"getScreenshot",value:function(){return this.state.hasUserMedia?this.createCanvas():null}},{key:"handleOnClick",value:function(e){var t=this.props.onClick;if(this._lastClick){var a=Date.now();if(this._lastClick+1e3<a)return;this._lastClick=a}t&&t(e)}},{key:"handleTimeUpdate",value:function(e){this._timeUpdate=Date.now()}},{key:"createCanvas",value:function(){if(!this.state.hasUserMedia)return null;var e=(0,d.findDOMNode)(this),t=this._context2d,a=this._canvas;if(!t){a=document.createElement("canvas"),this._canvas=a;var r=e.videoWidth/e.videoHeight;a.width=e.clientWidth,a.height=e.clientWidth/r,t=a.getContext("2d"),this._context2d=t}return t.drawImage(e,0,0,a.width,a.height),a}},{key:"render",value:function(){var e=this,t=this.props,a=t.width,r=t.height,n=t.muted,o=t.className,s=this.state.src;return c.default.createElement("video",{autoPlay:!0,onClick:function(t){return e.handleOnClick(t)},onTimeUpdate:function(t){return e.handleTimeUpdate(t)},onTouchStart:function(t){return e.handleOnClick(t)},width:a,height:r,src:s,muted:n,className:o})}}],[{key:"listVideoDevices",value:function(){if("mediaDevices"in navigator){return navigator.mediaDevices.enumerateDevices().then(function(e){return e.filter(function(e){return"video"===e.kind||"videoinput"===e.kind})})}if("MediaStreamTrack"in window){return new Promise(function(e,t){try{window.MediaStreamTrack.getSources(function(t){var a=t.find(function(e){return"video"===e.kind||"videoinput"===e.kind});e(a)})}catch(e){t(e)}})}var e=new Error("Not supported");return e.code="NOT_SUPPORTED",Promise.reject(e)}}]),t}(c.default.Component);f.defaultProps={audio:!0,height:480,width:640,screenshotFormat:"image/webp",onUserMedia:function(){}},f.propTypes={audio:u.PropTypes.bool,muted:u.PropTypes.bool,onUserMedia:u.PropTypes.func,height:u.PropTypes.oneOfType([u.PropTypes.number,u.PropTypes.string]),width:u.PropTypes.oneOfType([u.PropTypes.number,u.PropTypes.string]),screenshotFormat:u.PropTypes.oneOf(["image/webp","image/png","image/jpeg"]),className:u.PropTypes.string},t.default=f},2661:function(e,t,a){"use strict";function r(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1}var n,o=a(0),s=a(2672),l=a(2657),i=o.version.split(/[.-]/);n="0"===i[0]&&"13"===i[1]||"12"===i[1]?function(e){return e.getDOMNode()}:function(e){return e};var u=o.createClass({displayName:"QRCode",propTypes:{value:o.PropTypes.string.isRequired,size:o.PropTypes.number,level:o.PropTypes.oneOf(["L","M","Q","H"]),bgColor:o.PropTypes.string,fgColor:o.PropTypes.string},getDefaultProps:function(){return{size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000"}},shouldComponentUpdate:function(e){var t=this;return Object.keys(u.propTypes).some(function(a){return t.props[a]!==e[a]})},componentDidMount:function(){this.update()},componentDidUpdate:function(){this.update()},update:function(){var e=this.props,t=e.value,a=e.size,o=e.level,i=e.bgColor,u=e.fgColor,c=new s(-1,l[o]);c.addData(t),c.make();var d=n(this.refs.canvas),p=d.getContext("2d"),f=c.modules,m=a/f.length,h=a/f.length,y=(window.devicePixelRatio||1)/r(p);d.height=d.width=a*y,p.scale(y,y),f.forEach(function(e,t){e.forEach(function(e,a){p.fillStyle=e?u:i;var r=Math.ceil((a+1)*m)-Math.floor(a*m),n=Math.ceil((t+1)*h)-Math.floor(t*h);p.fillRect(Math.round(a*m),Math.round(t*h),r,n)})})},render:function(){return o.createElement("canvas",{style:{height:this.props.size,width:this.props.size},height:this.props.size,width:this.props.size,ref:"canvas"})}});e.exports=u},2662:function(e,t,a){/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */
!function(t,r,n){void 0!==e&&e.exports?e.exports=n():a(1116)("bowser",n)}(0,0,function(){function e(e){function t(t){var a=e.match(t);return a&&a.length>1&&a[1]||""}function a(t){var a=e.match(t);return a&&a.length>1&&a[2]||""}var r,n=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),l=!o&&/android/i.test(e),i=/nexus\s*[0-6]\s*/i.test(e),u=!i&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),d=/silk/i.test(e),p=/sailfish/i.test(e),f=/tizen/i.test(e),m=/(web|hpw)os/i.test(e),h=/windows phone/i.test(e),y=(/SamsungBrowser/i.test(e),!h&&/windows/i.test(e)),g=!n&&!d&&/macintosh/i.test(e),b=!l&&!p&&!f&&!m&&/linux/i.test(e),v=a(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),E=t(/version\/(\d+(\.\d+)?)/i),O=/tablet/i.test(e)&&!/tablet pc/i.test(e),C=!O&&/[^-]mobi/i.test(e),P=/xbox/i.test(e);/opera/i.test(e)?r={name:"Opera",opera:s,version:E||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?r={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||E}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:s,version:E||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:s,version:E||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:s,version:E||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:h?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:s},v?(r.msedge=s,r.version=v):(r.msie=s,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?r={name:"Chrome",osname:"Chrome OS",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?r={name:"Microsoft Edge",msedge:s,version:v}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||E}:p?r={name:"Sailfish",osname:"Sailfish OS",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=s,r.osname="Firefox OS")):d?r={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:s,version:E||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:m?(r={name:"WebOS",osname:"WebOS",webos:s,version:E||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=s)):/bada/i.test(e)?r={name:"Bada",osname:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:f?r={name:"Tizen",osname:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||E}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||E}:/chromium/i.test(e)?r={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||E}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:l?r={name:"Android",version:E}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:s},E&&(r.version=E)):n?(r={name:"iphone"==n?"iPhone":"ipad"==n?"iPad":"iPod"},E&&(r.version=E)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||E}:{name:t(/^(.*)\/(.*) /),version:a(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=s):(r.name=r.name||"Webkit",r.webkit=s),!r.version&&E&&(r.version=E)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=s,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!l&&!r.silk?!r.windowsphone&&n?(r[n]=s,r.ios=s,r.osname="iOS"):g?(r.mac=s,r.osname="macOS"):P?(r.xbox=s,r.osname="Xbox"):y?(r.windows=s,r.osname="Windows"):b&&(r.linux=s,r.osname="Linux"):(r.android=s,r.osname="Android");var w="";r.windows?w=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?w=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?(w=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),w=w.replace(/[_\s]/g,".")):n?(w=t(/os (\d+([_\s]\d+)*) like mac os x/i),w=w.replace(/[_\s]/g,".")):l?w=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?w=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?w=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?w=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(w=t(/tizen[\/\s](\d+(\.\d+)*)/i)),w&&(r.osversion=w);var M=!r.windows&&w.split(".")[0];return O||u||"ipad"==n||l&&(3==M||M>=4&&!C)||r.silk?r.tablet=s:(C||"iphone"==n||"ipod"==n||l||i||r.blackberry||r.webos||r.bada)&&(r.mobile=s),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=s:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=s:r.x=s,r}function t(e){return e.split(".").length}function a(e,t){var a,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(a=0;a<e.length;a++)r.push(t(e[a]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),n=a(e,function(e){var n=r-t(e);return e+=new Array(n+1).join(".0"),a(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(n[0][r]>n[1][r])return 1;if(n[0][r]!==n[1][r])return-1;if(0===r)return 0}}function n(t,a,n){var o=l;"string"==typeof a&&(n=a,a=void 0),void 0===a&&(a=!1),n&&(o=e(n));var s=""+o.version;for(var i in t)if(t.hasOwnProperty(i)&&o[i]){if("string"!=typeof t[i])throw new Error("Browser version in the minVersion map should be a string: "+i+": "+String(t));return r([s,t[i]])<0}return a}function o(e,t,a){return!n(e,t,a)}var s=!0,l=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return l.test=function(e){for(var t=0;t<e.length;++t){var a=e[t];if("string"==typeof a&&a in l)return!0}return!1},l.isUnsupportedBrowser=n,l.compareVersions=r,l.check=o,l._detect=e,l.detect=e,l})},2671:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),n=(0,r.defineMessages)({calculateBtnTooltip:{id:"pos.deal.financialquote.calculatebtn.tooltip",defaultMessage:"Calculate payment"},computePaymentError:{id:"pos.deal.financialquote.computepayment.error",defaultMessage:"Cannot compute payment"},quotepcmPlaceholder:{id:"pos.deal.financialquote.pcm.placeholder",defaultMessage:"Select a payment calculation method"},paymentSuccess:{id:"pos.deal.notify.payment.success",defaultMessage:"Payment is now"},paymentError:{id:"pos.deal.notify.payment.error",defaultMessage:"No payment check your request"},quoteproductPlaceholder:{id:"pos.deal.financialquote.product.placeholder",defaultMessage:"Select a product"},quoteunitPlaceholder:{id:"pos.deal.financialquote.unit.placeholder",defaultMessage:"Select a unit"},quotescalePlaceholder:{id:"pos.deal.financialquote.scale.placeholder",defaultMessage:"Select a scale"},rateFormulPlaceholder:{id:"pos.deal.financialquote.rateFormul.placeholder",defaultMessage:"Select a rate"},frequencyPlaceholder:{id:"pos.deal.financialquote.frequency.placeholder",defaultMessage:"Select a frequency"},subsidySuccess:{id:"pos.quote.notify.subsidy.success",defaultMessage:"Subsidy is now"},interestSuccess:{id:"pos.quote.notify.interestrate.success",defaultMessage:"Interest rate is now"},submit:{id:"pos.quote.notify.promote.success",defaultMessage:"Quote submitted"},addQuoteTitle:{id:"pos.quote.financialquote.btn.addquote.title",defaultMessage:"Add quote"},removeQuoteTitle:{id:"pos.quote.financialquote.btn.removequote.title",defaultMessage:"Remove quote"},copyQuoteLabel:{id:"pos.deal.financialquote.btn.copy",defaultMessage:"Copy quote"},amortizationFail:{id:"pos.quote.notify.amortization.fail",defaultMessage:"The sum of the amortizations is different than start basis minus end basis"},actorSearchFailed:{id:"common.actor.notify.search.failure",defaultMessage:"Data invalid, failed to find actor"},actorNonexistent:{id:"common.actor.notify.search.wrong.info",defaultMessage:"Inexisting actor, verify data entered"}});t.default=n},2672:function(e,t,a){function r(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var n=a(2673),o=a(2674),s=a(2675),l=a(2676),i=a(2658),u=r.prototype;u.addData=function(e){var t=new n(e);this.dataList.push(t),this.dataCache=null},u.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},u.getModuleCount=function(){return this.moduleCount},u.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=o.getRSBlocks(e,this.errorCorrectLevel),a=new s,r=0,n=0;n<t.length;n++)r+=t[n].dataCount;for(var n=0;n<this.dataList.length;n++){var i=this.dataList[n];a.put(i.mode,4),a.put(i.getLength(),l.getLengthInBits(i.mode,e)),i.write(a)}if(a.getLengthInBits()<=8*r)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},u.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[a][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},u.setupPositionProbePattern=function(e,t){for(var a=-1;a<=7;a++)if(!(e+a<=-1||this.moduleCount<=e+a))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+a][t+r]=0<=a&&a<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==a||6==a)||2<=a&&a<=4&&2<=r&&r<=4)},u.getBestMaskPattern=function(){for(var e=0,t=0,a=0;a<8;a++){this.makeImpl(!0,a);var r=l.getLostPoint(this);(0==a||e>r)&&(e=r,t=a)}return t},u.createMovieClip=function(e,t,a){var r=e.createEmptyMovieClip(t,a);this.make();for(var n=0;n<this.modules.length;n++)for(var o=1*n,s=0;s<this.modules[n].length;s++){var l=1*s,i=this.modules[n][s];i&&(r.beginFill(0,100),r.moveTo(l,o),r.lineTo(l+1,o),r.lineTo(l+1,o+1),r.lineTo(l,o+1),r.endFill())}return r},u.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},u.setupPositionAdjustPattern=function(){for(var e=l.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var a=0;a<e.length;a++){var r=e[t],n=e[a];if(null==this.modules[r][n])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)this.modules[r+o][n+s]=-2==o||2==o||-2==s||2==s||0==o&&0==s}},u.setupTypeNumber=function(e){for(var t=l.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var r=!e&&1==(t>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=r}for(var a=0;a<18;a++){var r=!e&&1==(t>>a&1);this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=r}},u.setupTypeInfo=function(e,t){for(var a=this.errorCorrectLevel<<3|t,r=l.getBCHTypeInfo(a),n=0;n<15;n++){var o=!e&&1==(r>>n&1);n<6?this.modules[n][8]=o:n<8?this.modules[n+1][8]=o:this.modules[this.moduleCount-15+n][8]=o}for(var n=0;n<15;n++){var o=!e&&1==(r>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=o:n<9?this.modules[8][15-n-1+1]=o:this.modules[8][15-n-1]=o}this.modules[this.moduleCount-8][8]=!e},u.mapData=function(e,t){for(var a=-1,r=this.moduleCount-1,n=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var i=0;i<2;i++)if(null==this.modules[r][s-i]){var u=!1;o<e.length&&(u=1==(e[o]>>>n&1));var c=l.getMask(t,r,s-i);c&&(u=!u),this.modules[r][s-i]=u,n--,-1==n&&(o++,n=7)}if((r+=a)<0||this.moduleCount<=r){r-=a,a=-a;break}}},r.PAD0=236,r.PAD1=17,r.createData=function(e,t,a){for(var n=o.getRSBlocks(e,t),i=new s,u=0;u<a.length;u++){var c=a[u];i.put(c.mode,4),i.put(c.getLength(),l.getLengthInBits(c.mode,e)),c.write(i)}for(var d=0,u=0;u<n.length;u++)d+=n[u].dataCount;if(i.getLengthInBits()>8*d)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*d+")");for(i.getLengthInBits()+4<=8*d&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;;){if(i.getLengthInBits()>=8*d)break;if(i.put(r.PAD0,8),i.getLengthInBits()>=8*d)break;i.put(r.PAD1,8)}return r.createBytes(i,n)},r.createBytes=function(e,t){for(var a=0,r=0,n=0,o=new Array(t.length),s=new Array(t.length),u=0;u<t.length;u++){var c=t[u].dataCount,d=t[u].totalCount-c;r=Math.max(r,c),n=Math.max(n,d),o[u]=new Array(c);for(var p=0;p<o[u].length;p++)o[u][p]=255&e.buffer[p+a];a+=c;var f=l.getErrorCorrectPolynomial(d),m=new i(o[u],f.getLength()-1),h=m.mod(f);s[u]=new Array(f.getLength()-1);for(var p=0;p<s[u].length;p++){var y=p+h.getLength()-s[u].length;s[u][p]=y>=0?h.get(y):0}}for(var g=0,p=0;p<t.length;p++)g+=t[p].totalCount;for(var b=new Array(g),v=0,p=0;p<r;p++)for(var u=0;u<t.length;u++)p<o[u].length&&(b[v++]=o[u][p]);for(var p=0;p<n;p++)for(var u=0;u<t.length;u++)p<s[u].length&&(b[v++]=s[u][p]);return b},e.exports=r},2673:function(e,t,a){function r(e){this.mode=n.MODE_8BIT_BYTE,this.data=e}var n=a(2656);r.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=r},2674:function(e,t,a){function r(e,t){this.totalCount=e,this.dataCount=t}var n=a(2657);r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(e,t){var a=r.getRsBlockTable(e,t);if(void 0==a)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=a.length/3,o=new Array,s=0;s<n;s++)for(var l=a[3*s+0],i=a[3*s+1],u=a[3*s+2],c=0;c<l;c++)o.push(new r(i,u));return o},r.getRsBlockTable=function(e,t){switch(t){case n.L:return r.RS_BLOCK_TABLE[4*(e-1)+0];case n.M:return r.RS_BLOCK_TABLE[4*(e-1)+1];case n.Q:return r.RS_BLOCK_TABLE[4*(e-1)+2];case n.H:return r.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=r},2675:function(e,t){function a(){this.buffer=new Array,this.length=0}a.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var a=0;a<t;a++)this.putBit(1==(e>>>t-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=a},2676:function(e,t,a){var r=a(2656),n=a(2658),o=a(2659),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;l.getBCHDigit(t)-l.getBCHDigit(l.G15)>=0;)t^=l.G15<<l.getBCHDigit(t)-l.getBCHDigit(l.G15);return(e<<10|t)^l.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;l.getBCHDigit(t)-l.getBCHDigit(l.G18)>=0;)t^=l.G18<<l.getBCHDigit(t)-l.getBCHDigit(l.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return l.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,a){switch(e){case s.PATTERN000:return(t+a)%2==0;case s.PATTERN001:return t%2==0;case s.PATTERN010:return a%3==0;case s.PATTERN011:return(t+a)%3==0;case s.PATTERN100:return(Math.floor(t/2)+Math.floor(a/3))%2==0;case s.PATTERN101:return t*a%2+t*a%3==0;case s.PATTERN110:return(t*a%2+t*a%3)%2==0;case s.PATTERN111:return(t*a%3+(t+a)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new n([1],0),a=0;a<e;a++)t=t.multiply(new n([1,o.gexp(a)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),a=0,r=0;r<t;r++)for(var n=0;n<t;n++){for(var o=0,s=e.isDark(r,n),l=-1;l<=1;l++)if(!(r+l<0||t<=r+l))for(var i=-1;i<=1;i++)n+i<0||t<=n+i||0==l&&0==i||s==e.isDark(r+l,n+i)&&o++;o>5&&(a+=3+o-5)}for(var r=0;r<t-1;r++)for(var n=0;n<t-1;n++){var u=0;e.isDark(r,n)&&u++,e.isDark(r+1,n)&&u++,e.isDark(r,n+1)&&u++,e.isDark(r+1,n+1)&&u++,0!=u&&4!=u||(a+=3)}for(var r=0;r<t;r++)for(var n=0;n<t-6;n++)e.isDark(r,n)&&!e.isDark(r,n+1)&&e.isDark(r,n+2)&&e.isDark(r,n+3)&&e.isDark(r,n+4)&&!e.isDark(r,n+5)&&e.isDark(r,n+6)&&(a+=40);for(var n=0;n<t;n++)for(var r=0;r<t-6;r++)e.isDark(r,n)&&!e.isDark(r+1,n)&&e.isDark(r+2,n)&&e.isDark(r+3,n)&&e.isDark(r+4,n)&&!e.isDark(r+5,n)&&e.isDark(r+6,n)&&(a+=40);for(var c=0,n=0;n<t;n++)for(var r=0;r<t;r++)e.isDark(r,n)&&c++;return a+=Math.abs(100*c/t/t-50)/5*10}};e.exports=l},2677:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(13),m=a(17),h=a(122),y=r(h),g=a(10),b=a(2660),v=r(b),E=a(3),O=r(E),C=a(529),P=a(2661),w=r(P),M=a(43),T=a(2662),F=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(T),A=a(359),_=r(A),S=a(1108),N=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={record:!0,canShoot:!1},a}return u(t,e),c(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.fetchReferenceTableWithParams,r=t.params,n=t.dosid;a(M.tables.LANTUSPARAM,{tusnom:"DMATYPE",dosid:this.props.dosid||this.props.params.dealId,flagalltypes:1}),S.constants.SHOW_QRCODE&&(r&&r.dealId||y.default.get("/token/deals/"+n+"/documents").then(function(t){e.setState({documentToken:t.data})}))}},{key:"componentDidMount",value:function(){var e=this;v.default.listVideoDevices().then(function(t){if(t&&t.length){var a=Math.min(t.length,1);e.setState({videoSources:t,videoSourceId:t[a].deviceId})}},function(t){e.setState({error:t})})}},{key:"componentWillUnmount",value:function(){this._autoCloseTimeout&&(clearTimeout(this._autoCloseTimeout),delete this._autoCloseTimeout)}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.progress;this._autoCloseTimeout||100!==a||(this._autoCloseTimeout=setTimeout(function(){t.close()},2e3))}},{key:"close",value:function(e){var t=this.props,a=t.onClose,r=t.initPhoto;a&&a(e),r(),this.setState({record:!0,canShoot:!1})}},{key:"handleRotateRight",value:function(){var e=document.getElementById("photoCanvas");e&&e.rotate(90)}},{key:"handleRotateLeft",value:function(){}},{key:"handleWebcamMedia",value:function(e,t){if(e)return console.error(e),"PermissionDeniedError"===e.name?(alert("Only secure server (using https) are allowed to take photo on this device !"),void this.close(e)):void this.setState({error:e,hideCamera:!0});this.setState({canShoot:!0})}},{key:"handleShoot",value:function(){var e=this.refs.photo,t=this._webcam.getScreenshot();if(this.setState({record:!1}),!t)return void this.setState({image:!1});if(t){var a=e,r=document.getElementById("photoCanvas");r&&r.parentNode.removeChild(r),t.id="photoCanvas",a.appendChild(t)}this.setState({image:!0})}},{key:"handleFreeze",value:function(){this.handleShoot()}},{key:"handleRetry",value:function(){this.setState({record:!0})}},{key:"handleUpload",value:function(){var e=this.props,t=e.uploadPhoto,a=e.dosid,r=e.dmaType,n=(e.intl.formatMessage,e.params),o=document.getElementById("photoCanvas"),s=document.getElementById("upfile"),l=s?s.files[0]:null,i=o;l&&"string"==typeof l.name&&(i=l);var u=n||{},c=u.dealId,d=u.token;t(a||c,r,i,d),this.setState({image:!1})}},{key:"handleDMATypeChanged",value:function(e){(0,this.props.setPhotoDmaType)(e.target.value)}},{key:"handleChangeSource",value:function(){var e=this,t=this.state,a=t.videoSources,r=t.videoSourceId,n=a.findIndex(function(e){return e.deviceId===r});this.setState({videoSourceId:a[(n+1)%a.length].deviceId,toggle:!1}),setTimeout(function(){e.setState({toggle:!0})},1e3)}},{key:"handleUploadOnClick",value:function(e){this.refs.upfile.click();var t=document.getElementById("upfile");t&&(t.value=null)}},{key:"handleUploadFileInputChange",value:function(e){e.target.files[0]&&this.setState({image:!0})}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.listDocTypes,n=a.skinClass,l=a.uploading,i=a.params,u=a.show,c=a.dosid,d=a.intl.formatMessage,f=a.error,h=a.progress,y=a.dmaType,g=this.state,b=g.record,E=g.videoSourceId,C=g.image,P=g.documentToken,M=g.canShoot,T=g.toggle,A=g.videoSources,S=F.android&&F.chrome||F.chrome&&!F.ios,N=(e={"photo-modal-dialog":!0},s(e,n,!0),s(e,"photo-modal-toggle",T),e),j=[p.default.createElement("option",{key:"IND",value:"IND"})].concat(o(r.map(function(e){return p.default.createElement("option",{key:e.code,value:e.code},e.label)}))),x=l||!1,k=b&&E&&S,R=(!b&&C||!S)&&!x,D=!b&&!x||!S,I=b&&S,q=!b&&!x,L=i||{},V=L.dealId;return p.default.createElement(m.Modal,{show:u,onHide:function(e){return t.close(!1)},bsSize:"large",className:(0,O.default)(N),"aria-labelledby":"photo-modal-title-lg"},p.default.createElement(m.Modal.Header,null,p.default.createElement(m.Button,{ref:"close",className:"photo-modal-header-button",onClick:function(e){return t.close(!1)}},p.default.createElement("i",{className:"fa fa-close"})),!b&&C&&!x&&[p.default.createElement(m.Button,{key:"rotateRight",className:"photo-modal-header-button",onClick:function(e){return t.handleRotateRight()}},p.default.createElement("i",{className:"fa fa-rotate-right"})),p.default.createElement(m.Button,{key:"rotateLeft",className:"photo-modal-header-button",onClick:function(e){return t.handleRotateLeft()}},p.default.createElement("i",{className:"fa fa-rotate-left"}))],A&&A.length>1&&b&&p.default.createElement(m.Button,{key:"videoSource",className:"photo-modal-header-button photo-video-source",onClick:function(e){return t.handleChangeSource()}},p.default.createElement("img",{src:"img/icons/photoBackFront.png",width:"24",height:"20"})),p.default.createElement(m.Modal.Title,{id:"photo-modal-title-lg"},d(_.default.scanIt))),p.default.createElement(m.Modal.Body,null,k&&p.default.createElement(v.default,{ref:"webcam",className:"webcam",width:"100%",height:"100%",screenshotFormat:"image/png",videoSourceId:E,audio:!1,onClick:function(){return t.handleShoot()},onFreeze:function(){return t.handleFreeze()},onUserMedia:function(e,a){return t.handleWebcamMedia(e,a)},initController:function(e){return t._webcam=e}}),b&&!E&&S&&p.default.createElement("div",{className:"upload-content"},d(_.default.readQRCodeFromMobile)),b&&!V&&P&&S&&p.default.createElement("div",{className:"upload-qrCode"},p.default.createElement(w.default,{value:window.location.protocol+"//"+window.location.host+window.location.pathname+"#/pos/upload-docs/"+c+"/"+P})),!f&&!x&&S&&p.default.createElement("div",{ref:"photo",className:"canvasZone",style:{display:b?"none":"block"}},p.default.createElement("div",{className:"canvasFlash"})),f&&p.default.createElement("div",{className:"errorZone"},p.default.createElement("p",{className:"errorMessage"},d(_.default.cannotAccessPhoto))),x&&p.default.createElement("div",{className:"photoUploading"},p.default.createElement("p",{className:"uploadingMessage"},d(_.default.uploadingPhoto)),p.default.createElement(m.ProgressBar,{active:!0,striped:!0,className:"uploadProgress",now:h,label:h+"%"})),!S&&p.default.createElement("div",{className:"uploadButtonWrapper"},p.default.createElement(m.Button,{className:"upload-button pull-right",bsStyle:"primary",onClick:function(e){return t.handleUploadOnClick(e)}},d(_.default.upload),p.default.createElement("i",{className:"fa fa-cloud-upload"})),p.default.createElement("div",{className:"inputFileWrapper"},p.default.createElement("input",{id:"upfile",ref:"upfile",type:"file",onChange:function(e){return t.handleUploadFileInputChange(e)}})))),p.default.createElement(m.Modal.Footer,null,D&&p.default.createElement("div",{key:"documentType",className:"footer-document-type"},d(_.default.documentType),p.default.createElement("select",{onChange:function(e){return t.handleDMATypeChanged(e)},value:y||"IND"},j)),I&&p.default.createElement(m.Button,{key:"shot",disabled:!M,bsStyle:"default",onClick:function(e){return t.handleShoot()}},d(_.default.shoot),p.default.createElement("i",{className:"fa fa-camera"})),q&&p.default.createElement(m.Button,{key:"retry",disabled:!M,bsStyle:"default",onClick:function(e){return t.handleRetry()}},d(_.default.retry),p.default.createElement("i",{className:"fa fa-refresh"})),R&&p.default.createElement(m.Button,{key:"upload",bsStyle:"default",onClick:function(e){return t.handleUpload()}},d(_.default.upload),p.default.createElement("i",{className:"fa fa-cloud-upload"})),x&&100===h&&p.default.createElement(m.Button,{key:"close",bsStyle:"default",onClick:function(e){return t.close()}},d(_.default.done))))}}]),t}(p.default.Component),j=function(e,t){var a=e.attachmentsReducer;return{uploading:a.photo.uploading,progress:a.photo.progress,dmaType:a.photo.dmaType,error:a.photo.error,listDocTypes:(0,M.getReferenceTable)(e,M.tables.LANTUSPARAM,{tusnom:"DMATYPE",dosid:t.dosid||t.params.dealId,flagalltypes:1}).data}},x={initPhoto:C.initPhoto,uploadPhoto:C.uploadPhoto,setPhotoDmaType:C.setPhotoDmaType,fetchReferenceTableWithParams:M.fetchReferenceTableWithParams};t.default=(0,f.connect)(j,x)((0,g.injectIntl)(N))},2678:function(e,t,a){"use strict";function r(e){switch(e){case"application/pdf":case"application/x-pdf":return"file-pdf-o";case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.oasis.opendocument.spreadsheet":return"file-excel-o";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.oasis.opendocument.presentation":case"application/vnd.ms-powerpoint":return"file-powerpoint-o";case"application/vnd.oasis.opendocument.text":case"application/vnd.ms-word":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":case"application/x-mswrite":return"file-word-o";case"application/x-bzip2":case"application/x-gzip":case"application/zip":case"application/x-compressed-zip":case"application/x-rar-compressed":case"application/x-7z-compressed":return"file-zip-o"}return/^image\//.exec(e)?"file-image-o":/^audio\//.exec(e)?"file-audio-o":/^video\//.exec(e)?"file-video-o":"file-o"}function n(e){if(e){var t=/.*\.([^\.]+)$/.exec(e);if(t){var a=t[1].toLowerCase();switch(a){case"pdf":return"application/pdf";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"doc":case"dot":return"application/msword";case"txt":return"text/plain";case"gz":case"bzip2":case"gzip":case"zip":case"rar":case"7z":case"tar":return"application/zip";case"jpg":case"jpeg":return"image/jpeg";case"png":case"gif":case"tiff":return"image/"+a;case"mp3":return"audio/mpeg";case"wav":case"wave":return"audio/x-wav";case"avi":return"video/avi";case"mpg":case"mpeg":return"video/mpeg";case"mkv":return"video/matroska";case"3gp":case"3gpp":return"video/3gpp";case"3g2":case"3gpp2":return"video/3gpp2"}}}}function o(e){return void 0!=e&&(e.startsWith("image/")||"application/pdf"===e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getAwesomeIconFromMimeType=r,t.getMimeTypeFromFilename=n,t.isPreviewable=o},2699:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(2729),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.taccode,r=t.tpgcode,n=t.devcode,o=t.pfiinvestissement,s=t.pfinbperiod,l=t.dprreseaucial;e.taccode===a&&e.tpgcode===r&&e.devcode===n&&e.pfiinvestissement===o&&e.pfinbperiod===s&&e.dprreseaucial===l||this.load(e)}},{key:"componentWillMount",value:function(){this.load(this.props)}},{key:"load",value:function(e){this.loadDatas("/deals/financial/referencetablescale?dpfordre="+e.dpfordre,e.deal,!0)}}]),t}(u.default);t.default=c},2700:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a,r){return function(n,o){if(e){var l={sheetName:r,header:{line:[]},data:[]};l.header.line=t.map(function(e){return{value:e.displayName.props.defaultMessage}}),e.forEach(function(e){var a={line:[]};t.forEach(function(t){if(t.customComponent&&t.customComponent.toJsonExport||t.customComponent&&t.customComponent.WrappedComponent&&t.customComponent.WrappedComponent.toJsonExport){var r=t.customComponent.WrappedComponent&&t.customComponent.WrappedComponent.toJsonExport?t.customComponent.WrappedComponent:t.customComponent,n=r.toJsonExport({data:e[t.columnName],state:o(),metadata:t.customComponentMetadata});a.line.push(n)}else a.line.push({value:e[t.columnName]})}),l.data.push(a)});var u={withCredentials:!0,responseType:"blob",headers:{"Content-Type":"application/x-www-form-urlencoded"}},d=i.default.apis[i.default.masterApi].api;c.default.post(d+"/exportexcel",l,u).then(function(e){s.default.saveAs(e.data,a)}).catch(function(e){e instanceof Error?console.log(e.message):console.log(e.data)})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.exportGriddleToExcel=n;var o=a(1120),s=r(o),l=a(74),i=r(l),u=a(122),c=r(u)},2701:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(10),p=a(13),f=a(14),m=a(1111),h=r(m),y=a(264),g=r(y),b=a(17),v=a(1115),E=r(v),O=a(28),C=r(O),P=a(2638),w=a(1118),M=r(w),T=a(64),F=a(262),A=a(1112),_=r(A),S=a(358),N=r(S),j=a(532),x=r(j),k=a(2660),R=r(k),D=a(2702),I=r(D),q=a(1102),L=r(q),V=a(2662),B=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(V),K=a(2703),U=r(K),H=a(43),Q=a(529),G=a(359),W=r(G),Y=a(1124),z=r(Y),J=a(2677),X=r(J),Z=a(2704),$=r(Z),ee=a(259),te=r(ee),ae=a(88),re=r(ae),ne=a(531),oe=a(22),se=a(357),le=a(2705),ie=r(le),ue=a(2706),ce=r(ue),de=a(2707),pe=r(de),fe=a(2708),me=r(fe),he=a(2709),ye=r(he),ge=a(2710),be=r(ge),ve=a(2639),Ee=r(ve),Oe=a(210).DragDropContext,Ce=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleDelete=function(e,t){var a=r.props,n=a.dosid,o=a.deleteDocument;e.preventDefault(),e.stopPropagation(),o(n,t)},r.handleOcrCheckOnClick=function(e,t){var a=r.props,n=a.intl.formatMessage,o=a.dosid,s=a.documents,l=a.ocrCheckDocument,i=a.showMockupOcr;e.preventDefault(),e.stopPropagation();var u=s.find(function(e){return e.dmaid===t});r.props.showOcrDocPoup(!0),r.setState({showOcrCheck:u}),l(o,t,n,i)},r.handleDMATypeChanged=function(e,t){var a=r.props.setDmaType;e&&a(e.target.value,t)},r.handleDMACatChanged=function(e,t){var a=r.props.setDmaCat;e&&a(e.target.value,t)},r.handleDMACommentChanged=function(e,t){var a=r.props.setDmaComment;e.target.value&&a(e.target.value,t.dmaid)},r.handleAttachPredefined=function(e,t,a){var n=r.props,o=n.setPredefinedType,s=n.setPredefinedDmaid,l=r.refs.upfile;o(t),s(a),e.preventDefault(),e.stopPropagation(),l.click()},n=a,s(r,n)}return l(t,e),i(t,[{key:"handleQROnClick",value:function(e){this.setState({showQR:!0,initQRModal:!0})}},{key:"handleCaptureOnClick",value:function(e){var t=this.props.setPredefinedDmaid,a=this.state.hasWebcam,r=this.refs.imageCapture;if(t(null),e.preventDefault(),e.stopPropagation(),!a)return void r.click();this.setState({takePhoto:!0,initPhotoModal:!0})}},{key:"handleUploadOnClick",value:function(e){var t=this.props,a=t.setPredefinedType,r=t.setPredefinedDmaid,n=this.refs.upfile;a(null),r(null),e.preventDefault(),e.stopPropagation(),n.click()}},{key:"handleFileChanged",value:function(e){var t=this.props,a=t.intl.formatMessage,r=t.deal,n=t.dosid,o=t.predefinedType,s=t.dispatchPDFInit,l=t.predefinedDmaid,i=t.updateThenUploadDocument,u=t.saveDeal,c=t.uploadDocument,d=this.refs.upfile,p=e.target.files[0];if(d.value="","application/pdf"===p.type&&n&&!o)return s(),void this.setState({pdfFile:p,initPDFModal:!0});var f=new FormData;return f.append("file",p),f.append("docTypeCode",o),l&&f.append("dmaid",l),n?void i(n,f):new Promise(function(e,t){u(r).then(function(t){var r=t.deal.dosid;c(r,f),T.notify.show(a(W.default.saveSuccess),"success"),oe.hashHistory.push(ne.QUOTE+"/"+r),e(t.deal)}).catch(function(e){t(e),T.notify.show(a(W.default.saveError),"error")})})}},{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dosid,r=t.fetchReferenceTableWithParams,n=t.getListDocument,o=t.cleanDocumentList;r(H.tables.LANTUSPARAM,{tusnom:"DMATYPE",dosid:a,flagalltypes:1}),r(H.tables.LANTUSPARAM,{tusnom:"DMATYPE",dosid:a}),r(H.tables.LANTUSPARAM,{tusnom:"DMACAT",tpgcode:"TOUT"}),a&&null!==a?n(a):o(),R.default.listVideoDevices().then(function(t){t&&t.length&&e.setState({hasWebcam:!0})},function(t){console.error("ListVideoDevices => ",t),e.setState({hasWebcam:!1})})}},{key:"handlePdfFiles",value:function(e){this.refs.upfile.value="",this.setState({pdfFile:null})}},{key:"handlePhotoDone",value:function(e){var t=this.props,a=t.dosid,r=t.getListDocument;this.setState({takePhoto:!1,hasWebcam:!e}),r(a)}},{key:"handleQRDone",value:function(){var e=this.props,t=e.dosid,a=e.getListDocument;this.setState({showQR:!1}),a(t)}},{key:"handleOcrCheckDone",value:function(){this.setState({showOcrCheck:void 0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl.formatMessage,r=t.documentpreview,n=t.isLoading,o=t.accessKeys,s=t.downloadDocument,l=t.listDocTypesAll,i=t.listDocCategories,u=t.excludeDocStatus,d=t.documents,p=t.dosid,f=t.form,m=(t.listDocTypes,t.showOcrPopup),h=this.state,y=h.initPDFModal,g=h.pdfFile,v=h.initPhotoModal,E=h.initQRModal,O=h.takePhoto,w=h.showQR,T=h.showOcrCheck,A=null;if(!n){A=[c.default.createElement(b.Button,{key:"upload",className:"upload-button pull-right",bsStyle:"primary",type:"button",onClick:function(t){return e.handleUploadOnClick(t)}},a(W.default.uploadNewAttachement)+" ",c.default.createElement("i",{className:"fa fa-cloud-upload"}))];(B.android&&B.chrome||B.chrome&&!B.ios)&&A.push(c.default.createElement(b.Button,{key:"scan",className:"capture-button pull-right",bsStyle:"primary",type:"button",onClick:function(t){return e.handleCaptureOnClick(t)}},a(W.default.scanIt)+" ",c.default.createElement("i",{className:"fa fa-camera"}))),B.mobile||A.push(c.default.createElement(b.Button,{key:"qr",className:"qr-button pull-right",bsStyle:"primary",type:"button",onClick:function(t){return e.handleQROnClick(t)}},a(W.default.transferToDevice)+" ",c.default.createElement("i",{className:"fa fa-qrcode"})))}var S=o["pos.deal.attachmentTables"],j=["dmanature","dmadt","dmafilename","dmatype","dmacat","dmastatus","dmacomment","dmaid"],k=[{columnName:"dmanature",customComponent:be.default,displayName:"",customComponentMetadata:{documentpreview:r}},{columnName:"dmadt",displayName:a(W.default.uploadDate),customComponent:P.DateDisplay},{columnName:"dmafilename",displayName:a(W.default.filename),customComponent:U.default,customComponentMetadata:{handleAttachPredefined:this.handleAttachPredefined,downloadDocument:s,fileNotFoundMsg:a(W.default.fileNotFound)}},{columnName:"dmatype",displayName:a(W.default.type),customComponent:me.default,customComponentMetadata:{listDocTypes:l,handleDMATypeChanged:this.handleDMATypeChanged}},{columnName:"dmacat",displayName:a(W.default.category),customComponent:ce.default,customComponentMetadata:{listDocCategories:i,handleDMACatChanged:this.handleDMACatChanged}},{columnName:"dmastatus",displayName:a(W.default.status),customComponent:Ee.default,customComponentMetadata:{refTable:H.tables.LANTUSPARAM,refParams:{tusnom:"DMASTATUS"},allowEmptyParams:!0}},{columnName:"dmacomment",displayName:a(W.default.comments),customComponent:P.InputDisplay,customComponentMetadata:{onChange:this.handleDMACommentChanged}},{columnName:"dmaid",displayName:"",customComponent:ie.default,customComponentMetadata:{handleDelete:this.handleDelete,excludeDocStatus:u,handleOcrCheckOnClick:this.handleOcrCheckOnClick}}],R=(0,L.default)("griddle",S,{defaultColumns:j,defaultColumnMetadata:k}),D=R.columns,q=R.columnMetadata,V=(R.pattern,{rowClass:"deals-custom-row col-xs-12",elements:[{className:"flex-row",children:[{columnName:"dmanature",overrideCustomComponent:be.default,useCustomComponent:!0,className:"col-xs-1"},{className:"col-xs-3",children:[{columnName:"dmadt",useCustomComponent:!0},{columnName:"dmatype",overrideCustomComponent:ye.default,useCustomComponent:!0},{columnName:"dmacat",overrideCustomComponent:pe.default,useCustomComponent:!0}]},{className:"col-xs-6",children:[{columnName:"dmafilename",useCustomComponent:!0},{columnName:"dmatype",useCustomComponent:!0},{columnName:"dmacat",useCustomComponent:!0}]},{className:"col-xs-2",children:[{columnName:"dmaid",overrideCustomComponent:ie.default,useCustomComponent:!0}]}]}]});return c.default.createElement("div",{className:"attachments-container"},c.default.createElement(M.default,{className:"fullWidth",onDrop:function(t){return e.handleFileChanged(t)}},c.default.createElement(C.default,{type:"primary",withBoder:"true",title:a(W.default.attachments)},c.default.createElement(x.default,{query:"(max-width: "+(0,F.getBootstrapResolution)("md")+")"},function(e){return c.default.createElement(te.default,{tableClassName:"table table-hover",useGriddleStyles:!1,results:d,initialSort:"dmafilename",sortAscending:!1,columns:D,columnMetadata:q,resultsPerPage:12,useCustomPagerComponent:!0,customPagerComponent:N.default,noDataMessage:n&&c.default.createElement(re.default,null),customRowComponent:_.default,useCustomRowComponent:e,customRowComponentClassName:"griddle-body-custom",globalData:{metadata:q,pattern:V}})}),c.default.createElement("div",{className:"box-footer"},A,y&&c.default.createElement(z.default,{key:"pdfModal",messages:W.default,show:g,dosid:p,formName:f,file:g,onClose:function(t){return e.handlePdfFiles(t)},listDocTypes:l}),v&&c.default.createElement(X.default,{key:"photoModal",show:O,dosid:p,onClose:function(t){return e.handlePhotoDone(t)}}),E&&c.default.createElement(I.default,{key:"qrModal",show:w,dosid:p,onClose:function(){return e.handleQRDone()}}),m&&c.default.createElement($.default,{key:"ocrCheckModal",show:void 0!==T,dosid:p,dmaid:T?T.dmaid:null,onClose:function(){return e.handleOcrCheckDone()}})),c.default.createElement("div",{className:"inputFileWrapper"},c.default.createElement("input",{id:"upfile",ref:"upfile",type:"file",onChange:function(t){return e.handleFileChanged(t)}}),c.default.createElement("input",{id:"imageCapture",ref:"imageCapture",type:"file",accept:"image/*;capture=camera",onChange:function(t){return e.handleFileChanged(t)}}),c.default.createElement("input",{id:"imageCapture2",ref:"imageCapture2",type:"file",accept:"image/*;capture=camera",capture:!0,onChange:function(t){return e.handleFileChanged(t)}})))))}}]),t}(E.default),Pe=function(e,t){var a=(0,f.formValueSelector)(t.form),r=a(e,"deal");return"drawdeal"==t.form&&(r=e.newdeal3.drawdeal),{dosid:r.dosid,tpgcode:r.tpgcode,listDocTypes:(0,H.getReferenceTable)(e,H.tables.LANTUSPARAM,{tusnom:"DMATYPE",dosid:r.dosid}).data,listDocTypesAll:(0,H.getReferenceTable)(e,H.tables.LANTUSPARAM,{tusnom:"DMATYPE",dosid:r.dosid,flagalltypes:1}).data,listDocCategories:(0,H.getReferenceTable)(e,H.tables.LANTUSPARAM,{tusnom:"DMACAT",tpgcode:"TOUT"}).data,documents:e.attachmentsReducer.documents,predefinedType:e.attachmentsReducer.predefinedType,predefinedDmaid:e.attachmentsReducer.predefinedDmaid,isLoading:e.attachmentsReducer.isLoading,excludeDocStatus:e.authentication.excludeDocStatus,documentpreview:e.authentication.options.documentpreview,deal:r,showOcrPopup:e.attachmentsReducer.showOcrPopup,showMockupOcr:e.authentication.options.showmockupocr}},we={downloadDocument:Q.downloadDocument,uploadDocument:Q.uploadDocument,updateThenUploadDocument:Q.updateThenUploadDocument,getListDocument:Q.getListDocument,setDmaType:Q.setDmaType,setDmaCat:Q.setDmaCat,setPredefinedType:Q.setPredefinedType,setPredefinedDmaid:Q.setPredefinedDmaid,setDmaStatus:Q.setDmaStatus,setDmaComment:Q.setDmaComment,deleteDocument:Q.deleteDocument,saveDeal:se.saveDeal,ocrCheckDocument:Q.ocrCheckDocument,cleanDocumentList:Q.cleanDocumentList,fetchReferenceTableWithParams:H.fetchReferenceTableWithParams,dispatchPDFInit:Q.dispatchPDFInit,showOcrDocPoup:Q.showOcrDocPoup};t.default=(0,h.default)(Oe(g.default),(0,p.connect)(Pe,we))((0,d.injectIntl)(Ce))},2702:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(122),f=r(p),m=a(17),h=a(10),y=a(3),g=r(y),b=a(2661),v=r(b),E=a(359),O=r(E),C=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return i(t,e),u(t,[{key:"close",value:function(){var e=this.props.onClose;e&&e()}},{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.params,r=t.dosid;a&&a.dealId||f.default.get("/token/deals/"+r+"/documents").then(function(t){e.setState({documentToken:t.data})})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.params,t.show),r=t.skinClass,n=t.dosid,s=t.intl.formatMessage,l=this.state.documentToken,i=o({"qr-modal-dialog":!0},r,!0);return d.default.createElement(m.Modal,{show:a,onHide:function(t){return e.close(!1)},bsSize:"large",className:(0,g.default)(i),"aria-labelledby":"qr-modal-title-lg"},d.default.createElement(m.Modal.Header,null,d.default.createElement(m.Button,{className:"qr-modal-header-button",onClick:function(t){return e.close(!1)},ref:"close"},d.default.createElement("i",{className:"fa fa-close"})),d.default.createElement(m.Modal.Title,{id:"qr-modal-title-lg"},s(O.default.transferToDeviceUsingQR))),d.default.createElement(m.Modal.Body,null,d.default.createElement("div",{className:"qr-message"},s(O.default.readQRCodeWithMobile)),d.default.createElement("div",{className:"qrcode"},d.default.createElement(v.default,{value:window.location.protocol+"//"+window.location.host+window.location.pathname+"#/pos/upload-docs/"+n+"/"+l,size:256})),d.default.createElement("ul",{className:"qr-applications"},d.default.createElement("li",null,d.default.createElement("span",{className:"fa fa-windows fa-2x"}),s(O.default.codeReaderWindows),d.default.createElement("a",{className:"app-link"},"https://goo.gl/C4zjUO")),d.default.createElement("li",null,d.default.createElement("span",{className:"fa fa-android fa-2x"}),s(O.default.codeReaderAndroid),d.default.createElement("a",{className:"app-link"},"https://goo.gl/CLKfYE")),d.default.createElement("li",null,d.default.createElement("span",{className:"fa fa-apple fa-2x"}),s(O.default.codeReaderIOS),d.default.createElement("a",{className:"app-link"},"https://goo.gl/ILIRqT")))),d.default.createElement(m.Modal.Footer,null,d.default.createElement(m.Button,{key:"close",bsStyle:"default",onClick:function(t){return e.close()}},s(O.default.close))))}}]),t}(d.default.Component);t.default=(0,h.injectIntl)(C)},2703:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(64),p=a(74),f=(r(p),function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"handleLinkClicked",value:function(e,t){var a=this.props.metadata;a.customComponentMetadata.downloadDocument(e,t,function(){return d.notify.show(a.customComponentMetadata.fileNotFoundMsg,"warning")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=t.rowData,n=t.metadata,o=r.dosidprospect,s=r.dmaid,l=r.dmatype;if(a){var i=window.cassioPosConfig,u=i.apis?i.apis[i.masterApi||"ksiopFront"]:"";return c.default.createElement("a",{className:"linkIcon",href:u.api+"/deals/"+o+"/documents/"+s+"?mode=download",onClick:function(){return e.handleLinkClicked(o,s)}},a||"")}return c.default.createElement("button",{className:"attachIcon",type:"button",onClick:function(e){return n.customComponentMetadata.handleAttachPredefined(e,l,s)}},c.default.createElement("i",{className:"glyphicon glyphicon-paperclip"}))}}]),t}(c.default.Component));t.default=f},2704:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(13),f=a(10),m=a(17),h=a(3),y=r(h),g=a(359),b=r(g),v=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"close",value:function(e){var t=this.props.onClose;t&&t(e)}},{key:"controlTable",value:function(e){var t=this.props.intl.formatMessage,a=null;if(e&&e.contentOk&&!e.contentOk.isLoading&&e.contentOk.controls){var r=e.contentOk.controls.map(function(e){var t=null;switch(e.result){case"OK":t=d.default.createElement(m.Glyphicon,{glyph:"ok"});break;case"ERROR":t=d.default.createElement(m.Glyphicon,{glyph:"alert"});break;case"WARNING":t=d.default.createElement(m.Glyphicon,{glyph:"warning-sign"})}return d.default.createElement("tr",{key:e.identifier},d.default.createElement("td",{className:"ocr-check-status-icon"},t),d.default.createElement("td",null,e.titleMsg),d.default.createElement("td",null,e.resultMsg))});a=d.default.createElement(m.Table,{condensed:!0,responsive:!0,bordered:!0},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",null,t(b.default.state)),d.default.createElement("th",null,t(b.default.test)),d.default.createElement("th",null,t(b.default.result)))),d.default.createElement("tbody",null,r))}else a=e&&e.contentKo?d.default.createElement("div",null,d.default.createElement("div",{className:"text-center ocrCheck-loading"},e.contentKo)):d.default.createElement("div",null,d.default.createElement("img",{src:"img/icons/loading-wave.gif",className:"img-responsive center-block ocrCheck-loading"}),d.default.createElement("div",{className:"text-center ocrCheck-loading"},t(b.default.checkingDocument)));return a}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl.formatMessage,r=t.dmaid,n=t.skinClass,s=t.documents,l=t.show,i=o({"ocrCheck-modal-dialog":!0},n,!0),u=s.find(function(e){return e.dmaid===r}),c=this.controlTable(u);return d.default.createElement(m.Modal,{show:l,bsSize:"large",onHide:function(t){return e.close(!1)},className:(0,y.default)(i),"aria-labelledby":"ocrCheck-modal-title-lg"},d.default.createElement(m.Modal.Header,null,d.default.createElement(m.Button,{ref:"close",className:"ocrCheck-modal-header-button",onClick:function(t){return e.close(!1)}},d.default.createElement("i",{className:"fa fa-close"})),d.default.createElement(m.Modal.Title,{id:"ocrCheck-modal-title-lg"},a(b.default.OCRCheck))),d.default.createElement(m.Modal.Body,null,c),d.default.createElement(m.Modal.Footer,null))}}]),t}(d.default.Component),E=function(e){return{documents:e.attachmentsReducer.documents}},O={};t.default=(0,p.connect)(E,O)((0,f.injectIntl)(v))},2705:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(10),p=a(3),f=r(p),m=a(359),h=r(m),y=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.rowData,r=e.metadata,n=e.intl.formatMessage,o=void 0,s="glyphicon-record";a.contentOk&&(s="glyphicon-ok"),a.contentKo&&(s="glyphicon-ban-circle");var l={"btn-space":!0,removeIcon:!0},i={"btn-space":!0,ocrCheckIcon:!0};return r.customComponentMetadata.excludeDocStatus&&-1!=r.customComponentMetadata.excludeDocStatus.indexOf(a.dmastatus)||(o=c.default.createElement("button",{type:"button",className:(0,f.default)(l),title:n(h.default.removeDocument),onClick:function(e){return r.customComponentMetadata.handleDelete(e,t)}},c.default.createElement("i",{className:"glyphicon glyphicon-remove-circle"}))),c.default.createElement("div",{className:"btn-group"},o,c.default.createElement("button",{type:"button",className:(0,f.default)(i),title:n(h.default.OCRCheckDocument),onClick:function(e){return r.customComponentMetadata.handleOcrCheckOnClick(e,t)}},c.default.createElement("i",{className:"glyphicon "+s})))}}]),t}(c.default.Component);t.default=(0,d.injectIntl)(y)},2706:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.rowData,r=e.metadata,o=r.customComponentMetadata.listDocCategories.find(function(e){return e.code===t}),s=r.customComponentMetadata.listDocCategories.find(function(e){return e.flagDefaut}),l="No Categ";if(o&&(l=o.label),!a.dmafilename||o&&a.dmatype&&"null"!=a.dmatype&&"IND"!=a.dmatype)return c.default.createElement("span",null,l);var i=[c.default.createElement("option",{key:"IND",value:"IND"})].concat(n(r.customComponentMetadata.listDocCategories.map(function(e){return c.default.createElement("option",{key:e.code,value:e.code},e.label)})));return c.default.createElement("select",{className:"dropdownInside",defaultValue:s?s.code:t,onChange:function(e){return r.customComponentMetadata.handleDMACatChanged(e,a.dmaid)}},i)}}]),t}(c.default.Component);t.default=d},2707:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(10),p=a(359),f=r(p),m=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.intl.formatMessage;return c.default.createElement("span",{className:"pull-right"},c.default.createElement("b",null,e(f.default.category)))}}]),t}(c.default.Component);t.default=(0,d.injectIntl)(m)},2708:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.rowData,a=e.metadata,r=e.data,o=t.dmacat,s=t.dmaid,l=t.dmafilename,i=a.customComponentMetadata.listDocTypes.find(function(e){return e.code===r}),u="No Type";if(i&&(u=i.label),!l||i&&o&&"null"!=o&&"IND"!=o)return c.default.createElement("span",null,u);var d=[c.default.createElement("option",{key:"IND",value:"IND"})].concat(n(a.customComponentMetadata.listDocTypes.map(function(e){return c.default.createElement("option",{key:e.code,value:e.code},e.label)})));return c.default.createElement("select",{className:"dropdownInside",defaultValue:r,onChange:function(e){return a.customComponentMetadata.handleDMATypeChanged(e,s)}},d)}}]),t}(c.default.Component);t.default=d},2709:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(10),p=a(359),f=r(p),m=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.intl.formatMessage;return c.default.createElement("span",{className:"pull-right"},c.default.createElement("b",null,e(f.default.type)))}}]),t}(c.default.Component);t.default=(0,d.injectIntl)(m)},2710:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(3),f=r(p),m=a(2678),h=a(526),y=r(h),g=a(74),b=(r(g),function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isHover:!1,curTimeout:null},a}return i(t,e),u(t,[{key:"handleLeave",value:function(){var e=this.state.curTimeout;void 0!==e&&clearTimeout(e),this.setState({isHover:!1,curTimeout:null})}},{key:"handleHover",value:function(){var e=this,t=this.props,a=t.rowData,r=t.metadata,n=(this.state.isHover,a.dmaid),o=a.dmafilename;if(o){var s=(0,m.getMimeTypeFromFilename)(o);if((0,m.isPreviewable)(s)&&r.customComponentMetadata.documentpreview){var l=setTimeout(function(){e.state.isHover&&e.refs["preview-popup"+n].toggle()},2e3);this.setState({isHover:!0,curTimeout:l,mimeType:s})}}}},{key:"render",value:function(){var e=this,t=this.props.rowData,a=t.dmafilename,r=t.dmaid,n=t.dosidprospect,s=(0,m.getMimeTypeFromFilename)(a),l=(0,m.getAwesomeIconFromMimeType)(s||"application/download"),i=((0,m.isPreviewable)(s),o({"preview-icon":(0,m.isPreviewable)(s),fa:!0},"fa-"+l,!0)),u=window.cassioPosConfig,c=u.apis?u.apis[u.masterApi||"ksiopFront"]:"";return d.default.createElement("span",null,d.default.createElement(y.default,{ref:"preview-popup"+r,className:"docPreview"},d.default.createElement("img",{src:c.api+"/deals/"+n+"/documents/"+r+"?time="+(new Date).getTime()+"&mode=preview"})),d.default.createElement("span",{className:(0,f.default)(i),onMouseOver:function(){return e.handleHover()},onMouseLeave:function(){return e.handleLeave()}}))}}]),t}(d.default.Component));t.default=b},2711:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(10),p=a(259),f=r(p),m=a(28),h=r(m),y=a(139),g=r(y),b=[],v=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e="fa-warning warning";return(1==this.props.rowData.flagerreur||this.props.rowData.flagerreur)&&(e="fa-minus-circle error"),c.default.createElement("i",{className:"fa fa-fw "+e})}}]),t}(u.Component),E=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){return c.default.createElement("i",{className:"fa fa-fw fa-minus-circle error"})}}]),t}(u.Component),O=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){return c.default.createElement("span",null,this.props.intl.formatMessage(this.props.rowData))}}]),t}(u.Component);O=(0,d.injectIntl)(O);var C=["flagerreur","anomalie"],P=["id","defaultMessage"],w=[{columnName:"flagerreur",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.listerrors.detail",defaultMessage:"Detail"}),customComponent:v},{displayName:"",columnName:"anomalie"}],M=[{columnName:"id",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.listerrors.detail",defaultMessage:"Detail"}),customComponent:E},{displayName:"",columnName:"defaultMessage",customComponent:O}],T=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleRowClick=function(e,t){r.props.onErrorClick&&r.props.onErrorClick(e,t)},n=a,s(r,n)}return l(t,e),i(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,g.default)(e.errors,this.props.errors)||!(0,g.default)(e.control.controlemsgList,this.props.control.controlemsgList)}},{key:"render",value:function(){var e=b,t=b;if(this.props.control&&this.props.control.controlemsgList&&this.props.control.controlemsgList.length>0){var a=this.props.control.controlemsgList;t=c.default.createElement(h.default,{type:"panel"},c.default.createElement(f.default,{tableClassName:"table table-hover control-table",useGriddleStyles:!1,results:a,resultsPerPage:50,columns:C,columnMetadata:w,enableInfiniteScroll:!0,enableSort:!1,useFixedHeader:!0}))}if(this.props.errors&&this.props.errors.length>0){var r=this.props.errors;e=c.default.createElement(h.default,{type:"panel"},c.default.createElement(f.default,{tableClassName:"table table-hover control-table errors-table",useGriddleStyles:!1,results:r,resultsPerPage:50,columns:P,columnMetadata:M,enableInfiniteScroll:!0,enableSort:!1,onRowClick:this.handleRowClick,useFixedHeader:!0}))}return c.default.createElement("div",null,e,t)}}]),t}(u.Component);t.default=(0,d.injectIntl)(T)},2712:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(13),p=a(361),f=a(28),m=r(f),h=a(14),y=a(2641),g=r(y),b=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this.props.dealId;e?this.props.fetchDealConditions(e):this.props.resetDealConditions()}},{key:"componentWillUnmount",value:function(){this.props.resetDealConditions()}},{key:"componentWillReceiveProps",value:function(e){e.dealId!==this.props.dealId&&(e.dealId?this.props.fetchDealConditions(e.dealId):this.props.resetDealConditions())}},{key:"render",value:function(){var e=null,t=null,a=this.props.currentJalcode?c.default.createElement(g.default,{code:this.props.currentJalcode,wrapper:"span",type:"button",disabled:"true"}):"";return this.props.conditions&&this.props.conditions.length>0&&(e=this.props.conditions.map(function(e){return c.default.createElement("div",{className:"condition"}," ",c.default.createElement("i",{className:"fa fa-warning warning"})," ",e.tralabel)}),t=c.default.createElement(m.default,{className:"box box-primary panel",title:a},c.default.createElement("div",{className:"conditions"},e))),c.default.createElement("div",null," ",t)}}]),t}(c.default.Component),v=(0,h.formValueSelector)("dealForm"),E=function(e,t){return{conditions:e.timeline.conditions,currentJalcode:v(e,"deal.jalcode")}},O={fetchDealConditions:p.fetchDealConditions,resetDealConditions:p.resetDealConditions};t.default=(0,d.connect)(E,O)(b)},2727:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.validateAssets=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(13),m=a(10),h=a(14),y=a(89),g=r(y),b=a(24),v=r(b),E=a(43),O=a(28),C=r(O),P=a(537),w=a(356),M=r(w),T=a(1101),F=r(T),A=a(44),_=r(A),S=a(109),N=r(S),j=a(1110),x=r(j),k=a(63),R=r(k),D=a(123),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(D),q=a(2752),L=r(q),V=a(1123),B=r(V),K=a(173),U=a(17),H=a(54),Q=a(357),G=a(527),W=a(528),Y=r(W),z=a(261),J=a(2754),X=r(J),Z=a(208),$=a(2728),ee=r($),te=a(366),ae=r(te),re=a(2649),ne=r(re),oe=a(2755),se=r(oe),le=a(2655),ie=a(2),ue=r(ie),ce=a(2758),de=r(ce),pe=a(2759),fe=r(pe),me=B.default.actions,he=me.setCarVariant,ye=me.initVariant,ge=me.appendNewAsset,be=me.changeAssetIndex,ve=me.removeAsset,Ee=me.copyVariant,Oe=me.assetDetailChanged,Ce=me.getOptionsList,Pe=me.setAssetComponentsFromMake,we=me.setRegistrationTaxStatus,Me=me.showImportAssetPopup,Te=[],Fe=(t.validateAssets=function(e,t,a){var r=0;return e.deal.listdealasset.map(function(e){e.dpmnumserie&&17!=e.dpmnumserie.length&&(a=(0,g.default)(a,"deal.listdealasset["+r+"].dpmnumserie",H.GlobalMessages.InvalidVinNumber)),e.acacode||(a=(0,g.default)(a,"deal.listdealasset["+r+"].acacode",H.GlobalMessages.fieldRequire)),e.dpmdtrelease&&e.dpmdtrelease<=new ue.default&&(a=(0,g.default)(a,"deal.listdealasset["+r+"].dpmdtrelease",le.messages.futureDeliveryDate)),r++}),a},function(e){return p.default.createElement("div",{className:"box-tools pull-right asset-tools"},p.default.createElement("button",{type:"button",className:"btn btn-box-tool",title:e.title,onClick:e.onDeleteClick},p.default.createElement("i",{className:"fa fa-times"})))}),Ae=function(e){return p.default.createElement("div",{className:"box-tools pull-right asset-tools"},p.default.createElement("button",{className:"btn btn-primary fa fa-download",type:"button",title:e.title,onClick:e.onImportClick}))},_e=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleRemoveAssetClicked=function(){var e=a.props,t=e.assetIndex,r=e.accessKeys;a.dispatch(ve(a.props.form,t,"deal.listdealasset",a.props.quoteCardinality,r.options)),a.props.quoteCardinality===z.QUOTE_CARDINALITY_ONE&&a.dispatch((0,Q.removeQuote)(a.props.form,a.props.assetIndex,"deal.listdealquote"))},a.handleAssetModelChanged=function(){a.props.dispatch((0,h.change)(a.props.form,a.currentAsset+".mmtcode",null)),a.props.dispatch((0,h.change)(a.props.form,a.currentAsset+".varid",null)),a.props.dispatch(ye())},a.handleAssetFinishChanged=function(){a.props.dispatch((0,h.change)(a.props.form,a.currentAsset+".varid",null)),a.props.dispatch(ye())},a.handleAssetVariantChanged=function(e,t){a.dispatch(he(a.props.form,t,a.currentAsset,a.props.assetIndex,a.props.quoteCardinality,!0,a.props.accessKeys.options)),a.dispatch(Ce(t))},a.handleTaxCodeChanged=function(e,t){a.dispatch((0,Q.fetchRateTax)(t,a.props.assetIndex))},a.handleQuantityChanged=function(e,t){a.dispatch(Oe(a.props.form,a.props.quoteCardinality,t,a.props.dpmmtinvest,a.props.accessKeys.options))},a.handleAmountExcluTaxChanged=function(e){var t=a.props,r=t.assetIndex,n=t.accessKeys,o="deal.listdealquote["+a.props.quoteIndex+"]",s=a.props.reducer.rateTaxValue,l=Number(e.target.value),i=l?l*(s/100):void 0,u=l+i;a.dispatch((0,K.batchActions)([(0,h.change)(a.props.form,a.currentAsset+".dpmmtvat",i),(0,h.change)(a.props.form,a.currentAsset+".dpmmtttc",u),(0,h.change)(a.props.form,a.currentAsset+".dpmmtinvest",l),(0,h.change)(a.props.form,o+".pfiinvestissement",l),(0,h.change)(a.props.form,a.currentAsset+".listdealassetcomponent[0].dmdprixunitaire",l)])),a.dispatch(Oe(a.props.form,a.props.quoteCardinality,a.props.listdealasset[r].dpmquantity,l,n.options))},a.handleNewAsset=function(){a.dispatch(ge(a.props.form)),a.props.quoteCardinality===z.QUOTE_CARDINALITY_ONE&&a.dispatch((0,G.addQuote)(a.props.form,a.props.quoteCardinality))},a.handleCopyAsset=function(){var e=a.props.listdealasset.length+1,t=(0,v.default)(a.props.listdealasset[a.props.assetIndex]);if(t=I.default.updateActionMode(t,I.ACTION_MODE_INSERTION),t=t.set("dpmordre",e),a.dispatch((0,h.arrayPush)(a.props.form,"deal.listdealasset",t)),a.dispatch(Ee(a.props.variant,e-1)),a.dispatch(be(e-1)),a.props.quoteCardinality===z.QUOTE_CARDINALITY_ONE){var r=(0,v.default)(a.props.listdealquote[a.props.assetIndex]);r=I.default.updateActionMode(r,I.ACTION_MODE_INSERTION),r=r.set("dpfordre",e),r=r.set("pfinom","Quote "+e),a.dispatch((0,h.arrayPush)(a.props.form,"deal.listdealquote",r)),a.dispatch((0,Q.changeQuoteIndex)(e-1))}},a.handleModelYearChanged=function(e,t){a.props.dispatch((0,K.batchActions)([(0,h.change)(a.props.form,a.currentAsset+".mmocode",null),(0,h.change)(a.props.form,a.currentAsset+".mmtcode",null),(0,h.change)(a.props.form,a.currentAsset+".varid",null)])),a.props.dispatch(ye())},a.handleMakChange=function(e,t){var r=a.props,n=r.form,o=r.listdealasset,s=r.assetIndex;return Promise.resolve(a.props.dispatch((0,K.batchActions)([(0,h.change)(n,a.currentAsset+".dpmlibelle",null),(0,h.change)(n,a.currentAsset+".mmocode",null),(0,h.change)(n,a.currentAsset+".mmtcode",null),(0,h.change)(n,a.currentAsset+".varid",null),(0,h.change)(n,a.currentAsset+".makid",t)]))).then(function(e){return a.props.dispatch(ye())}).then(function(e){return a.props.dispatch(Pe(o[s].dpmordre))})},a.handleAssetsCategoryChanged=function(e,t){for(var r=[],n=0;n<a.props.listdealasset.length;n++)r=r.concat(a._createUpdateAssetActions("deal.listdealasset["+n+"]",t));a.props.dispatch((0,K.batchActions)(r)),a.props.dispatch((0,G.initQuote)(a.props.form,a.props.quoteIndex))},a.handleAssetCategoryChanged=function(e,t){a.props.dispatch((0,K.batchActions)(a._createUpdateAssetActions(a.currentAsset,t))),a.props.dispatch((0,G.initQuote)(a.props.form,a.props.quoteIndex))},a.handleNAPChanged=function(e,t){a.dispatch((0,Q.updateAssetAfterNapcodeChanged2)(a.props.listdealasset[a.props.assetIndex].dpmordre,t))},a.handleLibelleChanged=function(e){a.dispatch((0,h.change)("dealForm","deal.listdealasset["+a.props.assetIndex+"].listdealassetcomponent[0].dmddesignation",e.target.value))},a.handleVinNumberSelected=function(e){if(e.otherInputs){e.otherInputs.map(function(e){if(a.props.dispatch((0,h.change)(a.props.form,a.currentAsset+"."+e.name,e.value)),"varid"===e.name)a.props.dispatch((0,h.change)(a.props.form,a.currentAsset+".listdealassetcomponent[0].varid",e.value));else if("taxcode"===e.name)a.props.dispatch((0,h.change)(a.props.form,a.currentAsset+".listdealassetcomponent[0].taxcode",e.value));else if("varmtprice"===e.name)a.props.dispatch((0,h.change)(a.props.form,a.currentAsset+".listdealassetcomponent[0].dmdprixunitaire",e.value)),a.props.dispatch((0,G.updateFromPfiInvestissement)(a.props.listdealquote[a.props.quoteIndex],a.props.form,"deal.listdealquote["+a.props.quoteIndex+"]",e.value));else if("varmtpricettc"===e.name){var t=e.value?e.value-void 0:void 0,r=void 0+t;a.props.dispatch((0,h.change)(a.props.form,a.currentAsset+".dpmmtttc",r))}})}},a.handleAddOptions=function(e){a.refs.optionsSearchPopup.toggle()},a.handleDepartmentEditChanged=function(e){a.props.dispatch(we(e.target.checked))},a.handleAssetSearch=function(){a.props.deal.listdealasset[a.props.assetIndex]&&a.dispatch((0,Q.fetchAssetInStock)({makid:a.props.deal.listdealasset[a.props.assetIndex].makid,mmocode:a.props.deal.listdealasset[a.props.assetIndex].mmocode,mmtcode:a.props.deal.listdealasset[a.props.assetIndex].mmtcode})),a.refs.stockPop.toggle()},a.handleRowAssetClick=function(e,t){a.props.assetsCarlist&&e&&(a.props.dispatch((0,h.change)("dealForm",a.currentAsset+".dpmnumserie",e.props.data.ircserie)),a.handleVinNumberChange(e.props.data),a.refs.stockPop.toggle())},a.handleCloseAsslet=function(){},a.handleImportAsset=function(){a.props.dispatch(Me(!0))},a.dispatch=e.dispatch,a}return i(t,e),c(t,[{key:"handleChangeAsset",value:function(e){this.dispatch(be(e)),this.props.quoteCardinality===z.QUOTE_CARDINALITY_ONE&&(this.dispatch((0,Q.changeQuoteIndex)(e)),this.dispatch((0,Q.fetchRateTax)(this.props.rateTaxValue)))}},{key:"_createUpdateAssetActions",value:function(e,t){return[(0,h.change)(this.props.form,e+".dpmmtvat",null),(0,h.change)(this.props.form,e+".makid",null),(0,h.change)(this.props.form,e+".acacode",t),(0,h.change)(this.props.form,e+".varid",null),(0,h.change)(this.props.form,e+".dpmlibelle",null),(0,h.change)(this.props.form,e+".dpmmtinvest",null),(0,h.change)(this.props.form,e+".dpmmtttc",null),(0,h.change)(this.props.form,e+".taxcode",null)]}},{key:"handleVinNumberChanged",value:function(e){this.props.dispatch((0,h.change)("dealForm",this.currentAsset+".dpmnumserie",e.target.value))}},{key:"componentWillReceiveProps",value:function(e){var t=e.deal.listdealasset&&e.deal.listdealasset[e.assetIndex]&&e.deal.listdealasset[e.assetIndex].varid,a=this.props.deal&&this.props.deal.listdealasset&&(null!==this.props.assetIndex||void 0!==this.props.assetIndex)&&this.props.listdealasset[this.props.assetIndex]&&this.props.listdealasset[this.props.assetIndex].varid;e.variantLoading||e.variant&&e.variant.varid||!t||this.dispatch(he(this.props.form,t,this.currentAsset,this.props.assetIndex,this.props.quoteCardinality,!1,this.props.accessKeys.options)),t&&a!==t&&this.dispatch(Ce(t))}},{key:"handleVinNumberChange",value:function(e){this.dispatch((0,Q.updateAssetFromVariant)(this.props.deal,this.props.deal.listdealasset.length,e.varid))}},{key:"renderImportAssetsPopup",value:function(e){return p.default.createElement(fe.default,{accessKeys:e.accessKeys,dispatch:this.props.dispatch,show:this.props.showImportAssetPopup})}},{key:"render",value:function(){var e=this,t="/deals/"+this.props.dosid+"/assets/getListSeries",a=this.props,r=a.options,n=a.assetIndex,s=a.readOnly,l=a.listdealasset,i=a.listdealattribute,c=a.intl,d=a.accessKeys,f=a.tpgcode,y=a.makId,g=a.dprreseaucial,b=a.dpmmillesime,v=a.tpgType,O=a.variantLoading,w=a.assetsCarlist,T=(o(a,["options","assetIndex","readOnly","listdealasset","listdealattribute","intl","accessKeys","tpgcode","makId","dprreseaucial","dpmmillesime","tpgType","variantLoading","assetsCarlist"]),!!this.props.routeOptions&&this.props.routeOptions.manageassetquantity,!!this.props.routeOptions&&this.props.routeOptions.acacodePerAsset),A=c.formatMessage,S=l&&l[n]?l[n].acacode:null,j=l&&l[n]?l[n].dpmnumserie:null,k=Te;r&&r.length&&(k=p.default.createElement(L.default,{accessKeys:d,id:"pos.deal.assets.box.components",rows:r}));var D=Te,q=null,V=null,B=null,K=s?"read-only":"",H=-1,Q=null;i&&(Q=i.find(function(e){return e.datcode===Z.TPGTYPE}),H=i.findIndex(function(e){return e.datcode===Z.TPGTYPE}));var G="deal.listdealattribute["+H+"].datstringdata";if(l.length>0&&(!i||!Q||Q&&Q.datstringdata)&&l[0].acacode||T){var W=[];l.forEach(function(t,a){var r=n===a&&l.length>1?"btn btn-primary":"btn btn-default";I.ACTION_MODE_DELETION!==t.actionMode&&W.push(p.default.createElement("button",{className:r,type:"button",key:"assetContainer_"+a,onClick:function(t){return e.handleChangeAsset(a,t)}},1+a))}),D=p.default.createElement("div",{className:"asset-tab"},W,!s&&p.default.createElement("button",{className:"btn btn-primary fa fa-clone",type:"button",onClick:this.handleCopyAsset,title:A(le.messages.copyAssetLabel)}),!s&&p.default.createElement("button",{className:"btn btn-primary fa fa-plus",type:"button",onClick:this.handleNewAsset,title:A(le.messages.addAssetLabel)})),B=p.default.createElement(ee.default,{ref:"optionsSearchPopup",varOptions:this.props.varOptions,selectedOptionsList:this.props.selectedOptionsList,popupTitle:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.popup",defaultMessage:"Search options"}),componentName:null,isLoading:O,assetIndex:this.props.assetIndex,formatMessage:A,listdealassetcomponent:this.props.listdealassetcomponent,dispatch:this.props.dispatch,currentAsset:this.currentAsset,form:this.props.form,accessKeys:d});var z=p.default.createElement(de.default,{ref:"stockPop",popupTitle:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.search.popup.title",defaultMessage:"Search assset list"}),searchTitle:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.search.title",formatMessage:A,defaultMessage:"Search asset"}),oncloseAsset:this.handleCloseAsslet,handleRowClick:this.handleRowAssetClick,assetsCarlist:w,formatMessage:A,currentAsset:this.currentAsset,hideAddButton:!0});q=p.default.createElement("label",null,p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.box.title",defaultMessage:"List of assets"}));var J={makid:y};b&&(J.dpmmillesime=b),V=p.default.createElement(C.default,{type:"primary",title:"",tools:p.default.createElement(Fe,{onDeleteClick:this.handleRemoveAssetClicked,title:A(le.messages.removeAssetLabel)})},B,z,p.default.createElement(U.Row,null,p.default.createElement(U.Col,{md:6},p.default.createElement(h.Field,u({name:this.currentAsset+".acacode",component:R.default,key:this.currentAsset+".assetacacode",placeholder:A(le.messages.assetCategPlaceHolder),options:E.tables.LANASSETCATEGORY,allowEmptyParams:!0,refParams:{tpgcode:f,dprreseaucial:g},onChange:this.handleAssetCategoryChanged,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.generalinfo.assetcategory.title",defaultMessage:"Asset category"})},d[this.currentAsset+".acacode"],{hidden:!T,readOnly:s})),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmnumserie",component:ae.default,readOnly:s,onSearchClick:this.handleAssetSearch,placeholder:this.props.intl.formatMessage(le.messages.popupFilterPlaceHolder),title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.vinnumber.title",defaultMessage:"VIN Number "})},d[this.currentAsset+".dpmnumserieSearch"])),p.default.createElement(h.Field,u({name:this.currentAsset+".napcode",component:R.default,placeholder:this.props.intl.formatMessage(le.messages.napplaceholder),options:E.tables.LANNAP,onChange:this.handleNAPChanged,refParams:{acacode:S,tpgcode:f},title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.nap.title",defaultMessage:"Asset class"})},d[this.currentAsset+".napcode"],{readOnly:s})),p.default.createElement(C.default,u({type:"none",id:"pos.deal.assets.box.catalog"},d["pos.deal.assets.box.catalog"+this.props.assetIndex]),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmnumserie",component:P.SearchSelectCreatableField,key:this.currentAsset+".dpmnumserie",onValueChange:this.handleVinNumberSelected,url:t,params:{checkInput:16},inputParamsKey:"dpmnumserie",dataValueKey:"varnumserie",dataLabelKey:"varnumserie",clearable:!0,readOnly:s,initValue:j?{code:j,label:j}:void 0,otherInputs:[{name:"dpmmillesime",valueKey:"vyeyearcode"},{name:"mmocode",valueKey:"mmocode"},{name:"mmtcode",valueKey:"mmtcode"},{name:"dpmgenre",valueKey:"varvehiclecategory"},{name:"varid",valueKey:"varid"},{name:"dpmenergie",valueKey:"varenergytype"},{name:"dpmmtinvest",valueKey:"varmtprice"},{name:"taxcode",valueKey:"taxcode"},{name:"varmtpricettc",valueKey:"varmtpricettc"},{name:"dpmniveauco2",valueKey:"varcarbon"},{name:"dpmpuissance",valueKey:"varbhp"},{name:"makid",valueKey:"makid"}],title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.vinnumber.title",defaultMessage:"VIN Number "})},d[this.currentAsset+".dpmnumserieSelect"])),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmimmatriculation",component:_.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.asset.registrationnumber",defaultMessage:"Registration Number"})},d[this.currentAsset+".dpmimmatriculation"],{readOnly:s})),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmmillesime",component:R.default,onChange:this.handleModelYearChanged,placeholder:this.props.intl.formatMessage(le.messages.modelYearPlaceHolder),options:E.tables.LANTUSPARAM,refParams:{tusnom:"MMOYEAR",acacode:S,tpgcode:f},allowEmptyParams:!0,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.modelyear.title",defaultMessage:"Model year"})},d[this.currentAsset+".dpmmillesime"],{readOnly:s})),p.default.createElement(U.Row,null,p.default.createElement(U.Col,{md:6}," ",p.default.createElement(h.Field,u({name:this.currentAsset+".makid",component:R.default,key:this.currentAsset+".makid",title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.make.title",defaultMessage:"Make"}),placeholder:A(le.messages.assetMakePlaceHolder),onChange:this.handleMakChange,options:E.tables.LANMAKE,refParams:{acacode:S,dprreseaucial:g,tpgcode:f},allowEmptyParams:!0},d[this.currentAsset+".makid"],{readOnly:s}))),p.default.createElement(U.Col,{md:6}," ",p.default.createElement(h.Field,u({name:this.currentAsset+".mmocode",component:R.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.model.title",defaultMessage:"Model"}),options:E.tables.LANMAKEMODEL,refParams:J,placeholder:A(le.messages.assetModelPlaceHolder),onChange:this.handleAssetModelChanged},d[this.currentAsset+".mmocode"],{readOnly:s})))),p.default.createElement(h.Field,u({name:this.currentAsset+".mmtcode",component:R.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.finish.title",defaultMessage:"Finish"}),key:"asset-finish-field",autoSelect:!0,options:E.tables.LANMAKMODTRIMLEVEL,refParams:{makid:y,mmocode:this.props.mmoCode},placeholder:A(le.messages.assetfinishPlaceHolder),onChange:this.handleAssetFinishChanged},d[this.currentAsset+".mmtcode"],{readOnly:s})),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmenergie",component:R.default,placeholder:this.props.intl.formatMessage(le.messages.enginePlaceHolder),options:E.tables.LANTUSPARAM,refParams:{tusnom:"CGENERGIE",mmocode:this.props.mmoCode},allowEmptyParams:!0,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.engine.title",defaultMessage:"Engine"})},d[this.currentAsset+".dpmenergie"],{readOnly:s})),p.default.createElement(h.Field,u({name:this.currentAsset+".varid",component:R.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.variant.title",defaultMessage:"Variant"}),refParams:{makid:y,mmocode:this.props.mmoCode,mmtcode:this.props.mmtCode,devcode:this.props.devCode,dpmenergy:this.props.dpmenergie,exclvarstatus:this.props.exclvarstatus},allowEmptyParams:!0,key:"asset-variant-field",options:E.tables.LANVARIANT,placeholder:A(le.messages.assetVariantPlaceHolder),onChange:this.handleAssetVariantChanged,disabled:!y},d[this.currentAsset+".varid"],{readOnly:s})),p.default.createElement(U.Row,null,p.default.createElement(U.Col,{md:6},p.default.createElement(h.Field,u({name:this.currentAsset+".dpmpuissance",component:F.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.power.title",defaultMessage:"Power"}),key:"power-field",isLoading:O,suffix:"cv"},d[this.currentAsset+".dpmpuissance"],{readOnly:s}))),p.default.createElement(U.Col,{md:6},p.default.createElement(h.Field,u({name:this.currentAsset+".dpmniveauco2",component:F.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.co2.title",defaultMessage:"CO2 emission"}),key:"co2-field",isLoading:O,suffix:"g/km"},d[this.currentAsset+".dpmniveauco2"],{readOnly:s})))),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmdtpremiercirculation",component:N.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.asset.registrationdate",defaultMessage:"1st Registration Date"})},d[this.currentAsset+".dpmdtpremiercirculation"],{readOnly:s}))),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmlibelle",component:_.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.asset.description",defaultMessage:"Description"}),onChange:this.handleLibelleChanged},d[this.currentAsset+".dpmlibelle"],{readOnly:s})),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmkilometrage",component:F.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.asset.mileage",defaultMessage:"Asset Current Mileage"})},d[this.currentAsset+".dpmkilometrage"],{readOnly:s})),p.default.createElement(h.Field,u({name:this.currentAsset+".dpmdtrelease",component:N.default,hidden:!0,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.asset.deliverydate",defaultMessage:"Delivery date"})},d[this.currentAsset+".dpmdtrelease"],{readOnly:s}))),p.default.createElement(U.Col,{md:6},p.default.createElement(C.default,u({type:"none",id:"pos.deal.assets.box.pricing"},this.props.accessKeys["pos.deal.assets.box.pricing"+this.props.assetIndex]),p.default.createElement(h.Field,{name:this.currentAsset+".dpmcollateralclass",component:R.default,placeholder:this.props.intl.formatMessage(le.messages.collateralClassPlaceHolder),options:E.tables.LANTTRPARAM,refParams:{ttrnom:"COLLATERALCLASS"},allowEmptyParams:!0,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.CollateralClass.title",defaultMessage:"Collateral classification"})}),p.default.createElement(U.Row,null,p.default.createElement("div",{className:"asset-amount"},p.default.createElement(U.Col,{md:6},p.default.createElement(h.Field,u({name:this.currentAsset+".dpmmtvat",component:M.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.vatamount.title",defaultMessage:"VAT amount"}),placeholder:A(le.messages.assetVATPlaceHolder),key:"vat",disabled:!0,currencyCode:this.props.devCode},d[this.currentAsset+".dpmmtvat"],{readOnly:s}))),p.default.createElement(U.Col,{md:6},p.default.createElement(h.Field,u({name:this.currentAsset+".dpmmtttc",component:M.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.amounttc.title",defaultMessage:"Amount inc tax"}),key:"incTax",currencyCode:this.props.devCode},d[this.currentAsset+".dpmmtttc"],{readOnly:s}))),p.default.createElement(U.Col,{md:12},p.default.createElement(h.Field,u({name:this.currentAsset+".dpmmtinvest",component:M.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.amountht.title",defaultMessage:"Amount excl. tax"}),key:"exclTax",onChange:this.handleAmountExcluTaxChanged,currencyCode:this.props.devCode},d[this.currentAsset+".dpmmtinvest"],{readOnly:s}))),p.default.createElement(U.Col,{md:12},p.default.createElement(h.Field,u({name:this.currentAsset+".dpmpctvr",component:Y.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.dpmpctvr.title",defaultMessage:"Residual value"}),key:"dpmpctvr",disabled:!0},d[this.currentAsset+".dpmpctvr"],{readOnly:s}))),p.default.createElement(U.Col,{md:12},p.default.createElement(h.Field,u({name:this.currentAsset+".taxcode",component:R.default},d[this.currentAsset+".taxcode"],{refTable:E.tables.LANTAXE,refParams:{tpgcode:f},onChange:this.handleTaxCodeChanged,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.taxcode.title",defaultMessage:"Tax code"}),readOnly:s}))),p.default.createElement(U.Col,{md:12},p.default.createElement(h.Field,u({name:this.currentAsset+".dpmquantity",component:F.default,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.quantity.title",defaultMessage:"Quantity"}),onChange:this.handleQuantityChanged},d[this.currentAsset+".dpmquantity"],{readOnly:s})))))),p.default.createElement(U.Row,null,p.default.createElement(U.Col,{md:12},p.default.createElement(h.Field,u({name:this.currentAsset+".dpmgenre",component:R.default,allowEmptyParams:!0,options:E.tables.LANTUSPARAM,refParams:{tusnom:"CGGENRE",dprreseaucial:g,tpgcode:f},isLoading:O,placeholder:A(le.messages.vehicleTypePlaceHolder),title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.vehicletype.title",defaultMessage:"Genre"})},d[this.currentAsset+".dpmgenre"],{readOnly:s}))),p.default.createElement(U.Col,{md:12},p.default.createElement(C.default,{id:"pos.deal.assets.options.box",openOnMount:!1,className:"box-collapsible hidden-box inline-box",collapsible:!0,tools:!0},p.default.createElement("div",null,p.default.createElement(M.default,u({currencyCode:this.props.devCode,value:ne.default.getOptionsValue(this.props.listdealassetcomponent),placeholder:A(le.messages.assetOptionsPlaceHolder),title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.title",defaultMessage:"Options"}),disabled:!0,suffix:!0,suffixButton:p.default.createElement(U.Button,{className:"fa fa-plus",type:"button",onClick:this.handleAddOptions,title:A(le.messages.addAssetOptionsLabel)})},d["pos.deal.asset.components.options.popup"],{readOnly:s})),!s&&p.default.createElement(se.default,{id:"pos.deal.asset.components.accessories.popup",accessKeys:d,component:M.default,currencyCode:this.props.devCode,form:this.props.form,placeholder:A(le.messages.assetAccessoriesPlaceHolder),title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.accessories.title",defaultMessage:"Accessories"}),disabled:!0,siteOptionKey:re.COMPONENTACCESSORIES_SITEOPTION,popupTitle:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.accessories.editpopup.title",defaultMessage:"Edit accessories options"}),readOnly:s}),!s&&p.default.createElement(se.default,{id:"pos.deal.asset.components.delivery.popup",accessKeys:d,component:M.default,currencyCode:this.props.devCode,form:this.props.form,placeholder:A(le.messages.assetDeliveryFeesPlaceHolder),title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.deliveryfees.title",defaultMessage:"Delivery fees"}),disabled:!0,siteOptionKey:re.COMPONENTDELIVERY_SITEOPTION,popupTitle:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.deliveryfees.editpopup.title",defaultMessage:"Edit delivery fees options"}),readOnly:s}),p.default.createElement(U.Row,null,p.default.createElement(U.Col,{md:6},p.default.createElement(x.default,u({id:"pos.deal.asset.components.registrationtax.checkbox",onChange:this.handleDepartmentEditChanged,value:this.props.registrationTaxStatus,style:{float:"left",marginRight:"5px"},readOnly:s},d["pos.deal.asset.components.registrationtax.checkbox"],{title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assetregistration.checkbox.title",defaultMessage:"Registration Tax"})}))),p.default.createElement(U.Col,{md:6},this.props.registrationTaxStatus?p.default.createElement(h.Field,u({name:this.currentAsset+".dpmregcode",component:R.default,allowEmptyParams:!0,options:E.tables.LANTUSPARAM,refParams:{tusnom:"REGCODE"},placeholder:A(le.messages.departmentPlaceHolder),title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assetregistration.department.title",defaultMessage:"Department"})},d[this.currentAsset+".dpmregcode"],{readOnly:s})):null)),this.props.registrationTaxStatus&&!s&&p.default.createElement(se.default,{id:"pos.deal.asset.components.registrationtax.popup",component:M.default,currencyCode:this.props.devCode,placeholder:A(le.messages.assetRegistrationPlaceHolder),title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.registrationtax.title",defaultMessage:"Registration tax"}),disabled:!0,siteOptionKey:re.COMPONENTCARTEGRISE_SITEOPTION,popupTitle:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.registrationtax.editpopup.title",defaultMessage:"Edit registration tax options"}),readOnly:s,accessKeys:d})))),p.default.createElement(U.Col,{md:12},p.default.createElement(C.default,{type:"none",id:"pos.deal.asset.quote.tires",hidden:"false"},p.default.createElement(X.default,{currentQuote:this.props.listdealquote[this.props.quoteIndex],currentQuotePath:this.currentQuote,accessKeys:d,readOnly:s})))))))}return p.default.createElement("div",{className:"asset-creation-form"},this.renderImportAssetsPopup(this.props),p.default.createElement(C.default,{type:"primary",title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.generalinfo.box.title",defaultMessage:"General Info"}),withBoder:"true",tools:!s&&p.default.createElement(Ae,{onImportClick:this.handleImportAsset,title:A(le.messages.importAssetLabel)}),hidden:T},p.default.createElement(U.Row,{className:K},i&&-1!==H&&p.default.createElement(U.Col,{md:6},p.default.createElement(h.Field,u({name:G,component:R.default,key:"asset-generalinfo-productfamily-field",placeholder:this.props.intl.formatMessage(le.messages.productFamilyPlaceHolder),options:E.tables.LANTTRPARAM,allowEmptyParams:!0,refParams:{ttrnom:Z.TPGTYPE,dprreseaucial:g,tpgcode:f},title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.generalinfo.productfamily.title",defaultMessage:"Product family"})},d[G],{readOnly:s}))),p.default.createElement(U.Col,{md:6},p.default.createElement(h.Field,u({name:this.currentAsset+".acacode",component:R.default,key:this.currentAsset+".acacode",placeholder:A(le.messages.assetCategPlaceHolder),options:E.tables.LANASSETCATEGORY,allowEmptyParams:!0,refParams:{tpgcode:f,dprreseaucial:g,tpgtype:v},onChange:this.handleAssetsCategoryChanged,title:p.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.generalinfo.assetcategory.title",defaultMessage:"Asset category"})},d[this.currentAsset+".acacode"],{readOnly:s}))))),q,D,V,k)}},{key:"currentAsset",get:function(){return this.props.dealPath+"listdealasset["+this.props.assetIndex+"]"}},{key:"currentQuote",get:function(){return this.props.dealPath+"listdealquote["+this.props.quoteIndex+"]"}}]),t}(p.default.Component);_e.propTypes={quoteCardinality:d.PropTypes.string},_e.defaultProps={quoteCardinality:z.QUOTE_CARDINALITY_MANY};var Se=(0,h.formValueSelector)("dealForm"),Ne=function(e,t){var a=e.newdeal,r=e.newdeal.quoteIndex,n=e.newdeal.variantLoading,o="deal.listdealasset["+a.assetIndex+"]",s=Se(e,o+".makid"),l=Se(e,o+".dpmmillesime"),i=Se(e,o+".mmocode"),u=Se(e,o+".mmtcode"),c=Se(e,o+".dpmmtinvest"),d=Se(e,o+".dpmregcode"),p=Se(e,"deal.tpgcode")||"TOUT",f=Se(e,"deal.devcode"),m=Se(e,o+".dpmenergie"),h=Se(e,"deal.dprreseaucial"),y=Se(e,o+".listdealassetcomponent[0].taxcode"),g=t.accessKeys.options,b=Se(e,"deal.listdealattribute"),v=b.findIndex(function(e){return"TPGTYPE"===e.datcode}),E=b[v]?b[v].datstringdata:null,O=Se(e,"deal..listdealquote["+r+"].listdealquoteattribute"),C=Se(e,o+".listdealassetcomponent"),P=e.newdeal.assetsCarlist;return{assetIndex:a.assetIndex,listdealasset:Se(e,"deal.listdealasset"),listdealquote:Se(e,"deal.listdealquote"),quoteIndex:r,reducer:a,listdealattribute:Se(e,"deal.listdealattribute"),options:a.options,varOptions:a.optionsList,variant:a.variant[a.assetIndex],readOnly:a.readOnly,exclvarstatus:e.authentication.user.variantexclude,deal:Se(e,"deal"),dosid:Se(e,"deal.dosid"),registrationTaxStatus:a.registrationTaxStatus,listtaxrates:a.listtaxrates,makId:s,mmoCode:i,mmtCode:u,tpgcode:p,devCode:f,dpmenergie:m,dealPath:"deal.",dprreseaucial:h,rateTaxValue:y,dpmmillesime:l,dpmmtinvest:c,routeOptions:g,tpgType:E,listdealquoteattribute:O,listdealassetcomponent:C,dpmregcode:d,variantLoading:n,assetsCarlist:P,showImportAssetPopup:a.showImportAssetPopup}};t.default=(0,f.connect)(Ne)((0,m.injectIntl)(_e))},2728:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(526),f=r(p),m=a(10),h=a(358),y=r(h),g=a(2643),b=r(g),v=a(17),E=a(13),O=a(14),C=a(2655),P=a(2638),w=a(1110),M=r(w),T=a(88),F=r(T),A=a(2649),_=r(A),S=a(263),N="00001",j=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleRadioButtonPressed=function(){r.props.metadata.customComponentMetadata.handleResetSelection(r.props.rowData),r.handleOptionsChanged()},r.handleCheckBoxClicked=function(e){if(e.target.checked)r.handleOptionsChanged();else{var t=r.props.listdealassetcomponent;if(t){var a=t.findIndex(function(e){return e.optcode==r.props.rowData.optcode});r.props.dispatch((0,O.arrayRemove)(r.props.form,r.props.listassetcomponentpath,a))}}},r.handleOptionsChanged=function(){var e=r.props.listdealassetcomponent;if(e){var t=e.findIndex(function(e){return e.optcode==r.props.rowData.optcode}),a=r.props.rowData,n={varid:a.varid,catcode:a.catcode,optcode:a.optcode,dmdprixunitaire:a.oprmtprice,dmdmttax:a.oprmtvat,dmddesignation:a.oaclabel,dmdordre:r.props.listdealassetcomponent.length+1};-1===t?r.props.dispatch((0,O.arrayPush)(r.props.form,r.props.listassetcomponentpath,n)):r.props.rowData.catcode===N?r.props.dispatch((0,O.arrayPush)(r.props.form,r.props.listassetcomponentpath,n)):r.props.dispatch((0,O.arraySplice)(r.props.form,r.props.listassetcomponentpath,t,1,n))}},n=a,l(r,n)}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t="optionSummary"===this.props.currentSelectedOptionsTab,a=!1;this.props.listdealassetcomponent&&this.props.listdealassetcomponent.length>0&&(a=-1!=this.props.listdealassetcomponent.findIndex(function(t){return t.optcode==e.props.rowData.optcode}));var r=t?d.default.createElement("span",null,this.props.data):this.props.rowData.catcode==N?d.default.createElement(M.default,{checked:a,onChange:this.handleCheckBoxClicked,title:this.props.data}):d.default.createElement(v.Radio,{onChange:this.handleRadioButtonPressed,checked:a},this.props.data);return d.default.createElement("div",null,r)}}]),t}(c.Component),x=(0,O.formValueSelector)("dealForm");j=(0,E.connect)(function(e,t){var a="deal.listdealasset["+e.newdeal.assetIndex+"].listdealassetcomponent",r=x(e,"deal.listdealasset["+e.newdeal.assetIndex+"].listdealassetcomponent");return{form:"dealForm",currentSelectedOptionsTab:e.newdeal.currentSelectedOptionsTab,listdealassetcomponent:r,listassetcomponentpath:a}})(j);var k=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=0;return e="oprmtvat"===this.props.metadata.columnName?this.props.data+this.props.rowData.oprmtprice:this.props.data,d.default.createElement(m.FormattedNumber,{value:e,format:"currencyFormat",currency:this.props.rowData.devcode})}}]),t}(c.Component),R=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClose=function(){a.props.dispatch((0,S.setCurrentOptionsTabKey)(null)),a.props.listdealassetcomponent!=a.backUpListForOptions&&(a.props.dispatch((0,O.arrayRemoveAll)(a.props.form,a.props.currentAsset+".listdealassetcomponent")),a.backUpListForOptions&&a.backUpListForOptions.forEach(function(e){a.props.dispatch((0,O.arrayPush)(a.props.form,a.props.currentAsset+".listdealassetcomponent",e))})),a.backUpListForOptions=[]},a.handleSelectOptions=function(){a.props.dispatch((0,S.setCurrentOptionsTabKey)(null)),a.refs.optionsSearchPopup.toggle();var e=_.default.getOptionsValue(a.props.listdealassetcomponent)||0,t=a.props.listdealassetcomponent[0]&&a.props.listdealassetcomponent[0].dmdprixunitaire||0;a.props.listdealassetcomponent&&(a.props.dispatch((0,O.change)(a.props.form,"deal.listdealasset["+a.props.assetIndex+"].dpmmtinvest",t+e)),a.props.dispatch((0,O.change)(a.props.form,"deal.listdealasset["+a.props.assetIndex+"].dpmmtttc",t+e))),a.setDmdordreofAssetComponents()},a.setDmdordreofAssetComponents=function(){var e=0,t="deal.listdealasset["+a.props.assetIndex+"].listdealassetcomponent";a.props.listdealassetcomponent.forEach(function(r){a.props.dispatch((0,O.change)(a.props.form,t+"["+e+"].dmdordre",e+1)),e++})},a.getSummaryResults=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e&&t&&t.length>0&&e.forEach(function(e){-1!==t.findIndex(function(t){return t.optcode===e.optcode})&&a.push(e)})},a.handleOptionsTabChange=function(e){a.props.dispatch((0,S.setCurrentOptionsTabKey)(e))},a.handleResetSelectionButtonClicked=function(e){var t=e.catcode,r=a.props.listdealassetcomponent||[],n=r.findIndex(function(a){return a.catcode==t||a.optcode==e.optcode});-1!=n&&a.props.dispatch((0,O.arrayRemove)(a.props.form,"deal.listdealasset["+a.props.assetIndex+"].listdealassetcomponent",n))},a.backUpListForOptions=[],a}return i(t,e),u(t,[{key:"toggle",value:function(){this.backUpListForOptions=new(Function.prototype.bind.apply(Array,[null].concat(n(this.props.listdealassetcomponent)))),this.refs.optionsSearchPopup.toggle()}},{key:"render",value:function(){var e=this,t=this.props.varOptions,a=["optcode","optlabel","oprmtprice","oprmtvat"],r=[{columnName:"optcode",displayName:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.optioncode",defaultMessage:"Option code"}),customComponent:j,customComponentMetadata:{handleResetSelection:this.handleResetSelectionButtonClicked}},{columnName:"optlabel",displayName:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.optionlabel",defaultMessage:"Option label"})},{columnName:"oprmtprice",displayName:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.pricewithtax",defaultMessage:"Price (Excl.tax)"}),customComponent:k},{columnName:"oprmtvat",displayName:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.vat",defaultMessage:"Price (Incl.tax)"}),customComponent:k}],n={},o=[],s=[],l=t?Object.values(t):[];if(l&&l.length>0)for(var i=0;i<l.length;i++)!function(t){var n=l[t];e.getSummaryResults(n,e.props.listdealassetcomponent,s);var i={id:"pos.deal.assets.options."+n[0].catcode,defaultMessage:""+n[0].catlabel},u=n[0].catcode==N?null:d.default.createElement(v.Button,{bsStyle:"warning",onClick:function(){e.handleResetSelectionButtonClicked(n[0])}},d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.resetselection",defaultMessage:"Reset selection"}));o.push({key:""+n[0].catcode,title:e.props.formatMessage(i),body:d.default.createElement("div",null,d.default.createElement(P.GriddleFixFilterPager,{tableClassName:"table table-hover",useGriddleStyles:!1,columns:a,results:n,columnMetadata:r,resultsPerPage:6,useCustomPagerComponent:!0,customPagerComponent:y.default,showFilter:!0,previousText:e.props.formatMessage(C.messages.previousPageLabel),nextText:e.props.formatMessage(C.messages.nextPageLabel),filterPlaceholderText:e.props.formatMessage(C.messages.popupFilterPlaceHolder),noDataMessage:e.props.formatMessage(C.messages.noDataMessage)}),d.default.createElement("row",null,u)),active:!0})}(i);return o.length>0?(o.push({key:"optionSummary",title:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.summary",defaultMessage:"Summary"}),body:d.default.createElement(P.GriddleFixFilterPager,{tableClassName:"table table-hover",useGriddleStyles:!1,columns:a,results:s,columnMetadata:r,useCustomPagerComponent:!0,customPagerComponent:y.default,showFilter:!0,filterPlaceholderText:this.props.formatMessage(C.messages.popupFilterPlaceHolder),noDataMessage:this.props.formatMessage(C.messages.noDataMessage)}),active:!0}),n=d.default.createElement(b.default,{className:"options",tabs:o,handleTabChange:this.handleOptionsTabChange})):n=d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.options.nodata",defaultMessage:"No option are available"}),d.default.createElement(f.default,{ref:"optionsSearchPopup",title:this.props.popupTitle,onSave:this.handleSelectOptions,saveLabel:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.accessories.apply",defaultMessage:"Apply"}),onClose:this.handleClose},this.props.isLoading?d.default.createElement(F.default,null):n)}}]),t}(c.Component);t.default=R},2729:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(2760),h=r(m),y=a(3),g=r(y),b=a(142),v=r(b),E=a(17),O=a(80),C=r(O),P=p.default.createElement("option",{key:"#error",className:"option-errored",value:"ERROR",disabled:"true"},"Error !"),w=p.default.createElement("option",{key:"#loading",className:"option-loading",value:"LOADING",disabled:"true"},"Loading ..."),M=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleBlur=function(){a.props.input&&a.props.input.onBlur(a.props.input.value)},a.handleChange=function(e){a.props.input&&a.props.input.onChange(e?e.code:null);var t=a.props.onChange;t&&t(e)},a}return i(t,e),c(t,[{key:"renderChildren",value:function(e,t){if(t!==e){var a=this.props.placeholder,r=p.default.createElement("option",{key:"#select",className:"option-select",value:"null",disabled:"true"},a);return this.listOptionsFromData(r,t)}return this.state.children}},{key:"render",value:function(){var e=this.state,t=this.props,a=t.input,r=t.hidden,n=t.disabled,s=t.id,l=t.akField,i=t.readOnly,c=o(t,["input","hidden","disabled","id","akField","readOnly"]),d=a&&a.name?a.name:c.name,m=this.context.accessKeys&&this.context.accessKeys[d]||c.accessKeys;if(r||m&&m.hidden)return!1;var h=this.listOptions();if("code"in this.props)return this.renderLabel();var y=!(h instanceof Array&&h.find(function(e){return!e.props.disabled})),b={"form-group":!0,"read-only":i},O={error:c.meta&&c.meta.touched&&c.meta.error||e.error},P=p.default.createElement(v.default,u({},a,{disabled:n||m&&m.disabled||y,readOnly:c.readOnly,options:this.state.data,placeholder:c.placeholder,isLoading:c.isLoading,inputProps:{name:this.props.inputName,"data-rxName":d},className:"form-control",onChange:this.handleChange,onBlur:this.handleBlur,value:c.value||a&&a.value||"null",clearable:!1,valueKey:"code",labelKey:"label"})),w=p.default.createElement(f.FormattedMessage,{id:"core.non.applicable",defaultMessage:"n/a"});this.state.data&&(w=this.state.data.find(function(e){return e.code===(c.value||a&&a.value)}));var M=p.default.createElement(E.Col,{className:"form-subcol"},w?w.label:"n/a");return p.default.createElement(E.FormGroup,{bsClass:(0,g.default)(b),validationState:(0,g.default)(O)||void 0},p.default.createElement(E.ControlLabel,null,c.title),i?M:P,c.meta&&c.meta.touched&&c.meta.error&&p.default.createElement(E.HelpBlock,null,p.default.createElement(f.FormattedMessage,c.meta.error)),p.default.createElement(C.default,{name:d,id:s,title:c.title,akField:l}))}},{key:"listOptions",value:function(){var e,t=this.state;if(t.error)e=P;else if(t.loading)e=w;else{var a=this.props.placeholder;e=this.state.children||p.default.createElement("option",{key:"#select",className:"option-select",value:"null",disabled:"true"},a)}return e}},{key:"listOptionsFromData",value:function(e,t){var a=this;if(t)if((t=this.filterAndSortDatas(t))&&t.length){var r=t.map(function(e){return p.default.createElement("option",{key:e.code,value:e.code},a.getLabelFromData(e))});r.unshift(e),e=r}else e=p.default.createElement("option",{key:"#loading",className:"option-loading",value:"NOTHING",disabled:"true"},"Empty list");return e}},{key:"filterAndSortDatas",value:function(e){return e}},{key:"getSelectedData",value:function(){var e=this.state.data;if(e){var t=this.refs.select.selectedIndex;if(!(t<0)){var a=this.refs.select.options[t];if(a){return e.find(function(e){return e.code===a.value})}}}}},{key:"getLabelFromData",value:function(e){return e?e.label:""}},{key:"renderLabel",value:function(){var e,t=this.state,a=this.props,r=t.data,n=!(r instanceof Array&&r.length);n||(e=r.find(function(e){return e.code===a.code}));var o={"form-group":!0,"has-error":t.error,"has-warning":t.warning,"has-success":t.success,"has-loading":t.loading,"is-empty":n,"not-found":!e},s=this.getLabelFromData(e);return p.default.createElement("span",{className:(0,g.default)(o)},s)}}]),t}(h.default);t.default=M,M.contextTypes={accessKeys:p.default.PropTypes.object}},2730:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=a(13),p=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props.data;if(this.props.options){var a=this.props.options.find(function(t){return t.tprcode?t.tprcode===e.props.data:t.tcocode?t.tcocode===e.props.data:void 0});a?t=a.pellibelle?a.pellibelle:a.libelletypecommission:this.props.emptyValue&&(t=this.props.emptyValue)}if(this.props.options&&this.props.options.length>0){var r=void 0;return r=this.props.options[0].tprcode?[c.default.createElement("option",{key:"IND",value:"IND"})].concat(n(this.props.options.map(function(e){return c.default.createElement("option",{key:e.tprcode,value:e.tprcode},e.pellibelle)}))):[c.default.createElement("option",{key:"IND",value:"IND"})].concat(n(this.props.options.map(function(e){return c.default.createElement("option",{key:e.tcocode,value:e.tcocode},e.libelletypecommission)}))),c.default.createElement("select",{className:"dropdownInside",defaultValue:this.props.data,onChange:function(t){return e.props.handleChanged(t,e.props.rowData)}},r)}return c.default.createElement("span",null,t)}}]),t}(u.Component),f=function(e,t){return{options:t.metadata.customComponentMetadata.options,handleChanged:t.metadata.customComponentMetadata.handleChanged}};t.default=(0,d.connect)(f)(p)},2731:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(356),m=r(f),h=a(17),y=a(3),g=r(y),b=[],v=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),c=0;c<o;c++)i[c]=arguments[c];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.symbList=function(){return r.props.currenciesList.asMutable().sort(function(e,t){return e.code<t.code?-1:e.code>t.code?1:0}).map(function(e){var t=r.context.intl.formatNumber(0,u({},r.context.intl.formats.number.currencyFormat,{currency:e.code})).replace(/[0-9]|[,. ]/g,"").trim(),a=e.code;return t&&t!==e.code&&(a+=" - "+t),p.default.createElement(h.MenuItem,{eventKey:e.code,onSelect:r.handleSelect},a)})},r.handleSelect=function(e){r.props.onCurrencyChange(e)},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.currenciesList,a=(e.onCurrencyChange,e.tpgcode,o(e,["currenciesList","onCurrencyChange","tpgcode"])),r=b,n=this.context.intl.formatNumber(0,u({},this.context.intl.formats.number.currencyFormat,{currency:this.props.currencyCode})).replace(/[0-9]|[,. ]/g,"").trim(),s={btn:!0,"btn-primary":!1,"btn-unchecked":!0};return t&&t.length>1&&(r=p.default.createElement(h.DropdownButton,{title:n||this.props.currencyCode,disabled:!1,className:(0,g.default)(s),id:"split-button-basic-primary-currency"},this.symbList()),a=u({},a,{prefixButton:r})),p.default.createElement(m.default,u({title:this.props.title},a))}}]),t}(d.Component);t.default=v,v.contextTypes={intl:d.PropTypes.object.isRequired}},2732:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(10),p=(a(14),a(526)),f=r(p),m=a(528),h=r(m),y=a(2643),g=(r(y),a(2761)),b=r(g),v=a(2762),E=a(2638),O=a(259),C=r(O),P=a(358),w=r(P),M=a(1102),T=r(M),F=a(360),A=a(2639),_=r(A),S=a(43),N=a(527),j=a(2700),x=a(261),k=r(x),R=a(64),D=a(1133),I=r(D),q=a(88),L=r(q),V=["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sep.","Oct.","Nov.","Dec."],B=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handlePaste=function(e){var t=e.clipboardData.getData("text/plain");if(t=(0,v.excelClipboardToJson)(t)){e.preventDefault(),a.setState({oldData:a.state.rows});var r=a.createRows(a.props,t);a.setState(r),R.notify.show("Table pasted from your clipboard","warning",2500)}},a.state={},a}return l(t,e),i(t,[{key:"setupPropsToVars",value:function(e){var t=e.startDate||Date.now(),a=new Date(t),r=e.quote,n=k.default.getPaymentMnt(r),o=r.pfinbperiodes||12;return{date:a,payment:n,pfinbperiodes:o,nbYear:Math.ceil(o/12)}}},{key:"createCollumns",value:function(e){for(var t=[""],a=this.setupPropsToVars(e),r=a.nbYear,n=a.date,o=0;o<r;o++){var s=n.getFullYear()+o;t.push(s+"/"+(s+1))}return t}},{key:"createRows",value:function(e,t){for(var a=this.setupPropsToVars(e),r=a.date,n=a.payment,o=a.pfinbperiodes,s=a.nbYear,l=[],i=0;i<12;i++){for(var u=[V[(r.getMonth()+i)%12]],c=0;c<s;c++){var d=12*c+i;o>0&&d>=o||u.push(t&&t[i]&&t[i][c]?t[i][c]:n||"0")}l.push(u)}return{rows:l}}},{key:"initRows",value:function(e,t){var a=this,r=this.setupPropsToVars(e),n=r.date,o=(r.payment,r.pfinbperiodes),s=r.nbYear;t=t||"0";for(var l=[],i=0;i<12;i++){for(var u=[],d=0;d<s+1;d++){var p=12*(d-1)+i;o>0&&p>=o||(u[d]=0===d?c.default.createElement("td",{className:"month"},V[(n.getMonth()+i)%12]):c.default.createElement("td",null,c.default.createElement(h.default,{onChange:function(e,t){return a.handleInputChange(i,d,t)},value:t,numberOfDigitAfterDecimal:"2"})))}l[i]=c.default.createElement("tr",null,u)}return l}},{key:"getJsonTableFromState",value:function(){return(0,b.default)(this.state.rows).map(function(e){return e.shift(),e})}},{key:"toggle",value:function(){this.props.quote&&this.props.quote.dpfordre&&this.props.dispatch((0,N.computePaymentAndCalculSchedule)(this.props.form,this.props.quoteField)),this.refs.modal.toggle()}},{key:"handleExportExcel",value:function(e){this.props.dispatch((0,j.exportGriddleToExcel)(k.default.getQuoteElement(this.props.quote).listdealquoteelementschedule,e,"payment_schedule.xlsx","Payment Schedule"))}},{key:"handleSaveEvent",value:function(){this.refs.modal.toggle()}},{key:"handleResetEvent",value:function(){this.setState({oldData:this.state.rows}),this.setState(this.createRows(this.props,[])),R.notify.show("Reset of the table, you can undo with the assiciated button","warning",2500)}},{key:"hangleCopyEvent",value:function(){var e=(0,v.jsonExcelClipboard)(this.getJsonTableFromState());e&&(I.default.copy({"text/plain":e}),R.notify.show("Table copied in the clipboard","success",2e3))}},{key:"handleInputChange",value:function(e,t,a){this.state.rows&&(this.state.rows[e][t]=a)}},{key:"componentDidMount",value:function(){window.addEventListener("paste",this.handlePaste)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("paste",this.handlePaste),this.setState({rows:void 0,oldData:void 0})}},{key:"shouldComponentUpdate",value:function(e,t){return!(this.state&&this.state.pastedData)||t.pastedData!=this.state.pastedData}},{key:"undoPaste",value:function(){this.state.oldData&&this.state.oldData!=this.state.rows&&(this.setState({rows:this.state.oldData}),R.notify.show("Undo to the last paste action, restoring the table","warning",2500))}},{key:"render",value:function(){var e=this,t=c.default.createElement(L.default,null),a=[],r=k.default.getPaymentMnt(this.props.quote);this.initRows(this.props,r);this.state.rows&&this.state.rows.map(function(t,a){return c.default.createElement("tr",null,Object.keys(t).map(function(r,n){var o=t[r];return 0==n?c.default.createElement("td",{className:"month"},o):c.default.createElement("td",null,c.default.createElement(h.default,{onChange:function(t,r){return e.handleInputChange(a,n,r)},value:o,numberOfDigitAfterDecimal:"2"}))}))});var n=[c.default.createElement("button",{onClick:function(){return e.undoPaste()},key:"undoPasteButton",className:"btn btn-secondary hidden",type:"button"},c.default.createElement("i",{className:"fa fa-undo"})," Undo Paste"),c.default.createElement("button",{onClick:function(){return e.hangleCopyEvent()},key:"copyButton",className:"btn btn-secondary",type:"button"},c.default.createElement("i",{className:"fa fa-copy"}),"Copy")],o=["pecordre","pectypeelement","pecdtdue","pecmtoutstanding","pecmtamortization","pecmtinterest","pecmtbasic","pecmtincidental","pecmttotal","pecmttotalttc"],s=[{columnName:"pecordre",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecordre",defaultMessage:"#"})},{columnName:"pectypeelement",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pectypeelement",defaultMessage:"Type"}),customComponent:_.default,customComponentMetadata:{refTable:S.tables.LANTTRPARAM,refParams:{ttrnom:"ECHTYPE"},allowEmptyParams:!0}},{columnName:"pecdtdue",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecdtdue",defaultMessage:"Due Date"}),customComponent:E.DateDisplay},{columnName:"pecmtoutstanding",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecmtoutstanding",defaultMessage:"Outstanding"}),customComponent:E.AmountDisplay,customComponentMetadata:{currencycode:this.props.currencyCode}},{columnName:"pecmtamortization",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecmtamortization",defaultMessage:"Amortization"}),customComponent:E.AmountDisplay,customComponentMetadata:{currencycode:this.props.currencyCode}},{columnName:"pecmtinterest",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecmtinterest",defaultMessage:"Interest"}),customComponent:E.NumberDisplay},{columnName:"pecmtbasic",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecmtbasic",defaultMessage:"Payment"}),customComponent:E.AmountDisplay,customComponentMetadata:{currencycode:this.props.currencyCode}},{columnName:"pecmtincidental",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecmtincidental",defaultMessage:"Service"}),customComponent:E.AmountDisplay,customComponentMetadata:{currencycode:this.props.currencyCode}},{columnName:"pecmttotal",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecmttotal",defaultMessage:"Total Amount"}),customComponent:E.AmountDisplay,customComponentMetadata:{currencycode:this.props.currencyCode}},{columnName:"pecmttotalttc",displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.pecmttotalttc",defaultMessage:"Total Amount Inc Tax"}),customComponent:E.AmountDisplay,customComponentMetadata:{currencycode:this.props.currencyCode}}],l=(0,F.getComponentAccessKeys)(this.props.accessKeys,this.props.id),i=(0,T.default)("griddle",l,{defaultColumns:o,defaultColumnMetadata:s}),u=i.columns,p=i.columnMetadata,m=k.default.getQuoteElement(this.props.quote);m=m?m.listdealquoteelementschedule:void 0;var y=c.default.createElement("p",{className:"center-text"},c.default.createElement(d.FormattedMessage,{id:"pos.deal.ScheduledPaymentProfilePopup.nodata",defaultMessage:"You have no data"})),g=this.props.isLoading?t:y;this.props.isLoading&&(m=a);var b=[];b.push(c.default.createElement("i",{key:"btn-export",className:"btn-export"},c.default.createElement("a",{onClick:function(){return e.handleExportExcel(p)},className:"fa fa-cloud-download"})));var v=c.default.createElement("div",{className:"box-tools pull-right"},b);return c.default.createElement(f.default,{ref:"modal",title:c.default.createElement(d.FormattedMessage,{id:"pos.quote.schedule.title",defaultMessage:"Payment schedule"}),onReset:this.props.enableReset?function(t){return e.handleResetEvent(t)}:void 0,onSave:this.props.enableSave?function(t){return e.handleSaveEvent(t)}:void 0,specificButtons:n,headerButtons:v,accessKeys:this.props.accessKeys,noDataMessage:g},c.default.createElement("div",{className:"pull-right"},c.default.createElement("div",null,c.default.createElement(C.default,{tableClassName:"table table-hover",useGriddleStyles:!1,results:m,initialSort:"pecordre",sortAscending:!1,columns:u,columnMetadata:p,noDataMessage:g,useCustomPagerComponent:!0,customPagerComponent:w.default}))))}}]),t}(c.default.Component);B.propTypes={enableSave:u.PropTypes.boolean,enableReset:u.PropTypes.boolean},t.default=B},2752:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(13),f=a(14),m=a(28),h=r(m),y=a(2651),g=r(y),b=a(2753),v=r(b),E=a(1115),O=r(E),C=a(3),P=r(C),w=a(10),M=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.dispatch=e.dispatch,a}return l(t,e),u(t,[{key:"_formatNumber",value:function(e,t,a){return t?e.toFixed(t).replace(/(\d)(?=(\d{3})+\.)/g,"$1 "):e.toFixed(t).replace(/(\d)(?=(\d{3})+$)/g,"$1 ")}},{key:"render",value:function(){var e=this,t=this.getSelectedRow(),a=0;(this.props.listdealasset[this.props.assetIndex]?this.props.listdealasset[this.props.assetIndex]:void 0)&&this.props.listdealasset[this.props.assetIndex].dpmquantity&&(a=parseInt(this.props.listdealasset[this.props.assetIndex].dpmquantity));var r=this.getRows().map(function(r){return d.default.createElement("tr",{key:r.key,"data-key":r.key,className:(0,P.default)({selected:t===r})},d.default.createElement("td",null,r.description),d.default.createElement("td",{className:"number"},e._formatNumber(a)),d.default.createElement("td",{className:"number"},e._formatNumber(r.unitPriceBeforeTax,2)),d.default.createElement("td",{className:"number"},e._formatNumber(r.unitPriceBeforeTax*a,2)),d.default.createElement("td",null,r.tax),d.default.createElement("td",{className:"number"},e._formatNumber(r.unitPriceAfterTax*a+r.vatAmount,2)),d.default.createElement("td",null,d.default.createElement("input",{type:"checkbox"})))});return d.default.createElement(h.default,i({type:"primary"},this.props.accessKeys[this.props.id],{id:this.props.id,title:d.default.createElement(w.FormattedMessage,{id:"pos.assets.box.title",defaultMessage:"Components"}),withBoder:"true"}),d.default.createElement("table",{className:"table table-bordered table-hover",onClick:this.$handleTableOnClick},d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("th",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.describe.title",defaultMessage:"Description"})),d.default.createElement("th",{className:"number"},d.default.createElement(w.FormattedMessage,{id:"pos.assets.quantity.title",defaultMessage:"Quantity"})),d.default.createElement("th",{className:"number"},d.default.createElement(w.FormattedMessage,{id:"pos.assets.unitprice.title",defaultMessage:"Unit price"})),d.default.createElement("th",{className:"number"},d.default.createElement(w.FormattedMessage,{id:"pos.assets.totalht.title",defaultMessage:"Total before tax"})),d.default.createElement("th",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.tax.title",defaultMessage:"Tax"})),d.default.createElement("th",{className:"number"},d.default.createElement(w.FormattedMessage,{id:"pos.assets.totaltc.title",defaultMessage:"Total after tax "})),d.default.createElement("th",null,"Option")),r)),d.default.createElement("div",{className:"box-footer"},d.default.createElement("div",{className:"col-md-6"},d.default.createElement("dl",{className:"dl-horizontal"},d.default.createElement("dt",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.describe.title",defaultMessage:"Description"})),d.default.createElement("dd",null,d.default.createElement("input",{type:"text",disabled:!0,value:t.description,className:"form-control"})),d.default.createElement("dt",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.quantity.title",defaultMessage:"Quantity"})),d.default.createElement("dd",null,d.default.createElement(v.default,{value:a,style:"count",className:"assets-rowCount"})),d.default.createElement("dt",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.tax.title",defaultMessage:"Tax"})),d.default.createElement("dd",null,d.default.createElement("select",{className:"form-control"},d.default.createElement("option",{value:"EXO"},this.props.intl.formatMessage({id:"pos.assets.taxfree.title",defaultMessage:"Tax free"})))),d.default.createElement("dt",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.unitpriceht.title",defaultMessage:"Unit price before tax"})),d.default.createElement("dd",null,d.default.createElement(g.default,{value:t.unitPriceBeforeTax,style:"currency",className:"assets-rowCurrency"})),d.default.createElement("dt",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.unitpricetc.title",defaultMessage:"Unit price after tax"})),d.default.createElement("dd",null,d.default.createElement(g.default,{value:t.unitPriceAfterTax,style:"currency",className:"assets-rowCurrency"})))),d.default.createElement("div",{className:"col-md-6"},d.default.createElement("dl",{className:"dl-horizontal"},d.default.createElement("dt",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.totalht.title",defaultMessage:"Total before tax"})),d.default.createElement("dd",null,d.default.createElement(g.default,{value:t.totalBeforeTax*a,style:"currency",className:"assets-rowCurrency"})),d.default.createElement("dt",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.totalvat.title",defaultMessage:"Total VAT amount"})),d.default.createElement("dd",null,d.default.createElement(g.default,{value:t.vatAmount,style:"currency",className:"assets-rowCurrency"})),d.default.createElement("dt",null,d.default.createElement(w.FormattedMessage,{id:"pos.assets.totaltc.title",defaultMessage:"Total after tax"})),d.default.createElement("dd",null,d.default.createElement(g.default,{value:t.totalAfterTax*a,style:"currency",className:"assets-rowCurrency"}))))))}}]),t}(O.default),T=(0,f.formValueSelector)("dealForm"),F=function(e,t){return{listdealasset:T(e,"deal.listdealasset"),assetIndex:e.newdeal.assetIndex}};t.default=(0,p.connect)(F)((0,w.injectIntl)(M))},2753:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(1101),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return"formatted-integer"}},{key:"isReadOnly",value:function(){return!0}}]),t}(u.default);t.default=c},2754:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(14),h=a(17),y=a(261),g=r(y),b=a(1101),v=r(b),E=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.accessKeys,a=o(e,["accessKeys"]),r=g.default.getQuoteAttributeFieldValue(a.currentQuote,this.props.currentQuotePath,g.default.pfacodes.WINTERTIRES),n=g.default.getQuoteAttributeFieldValue(a.currentQuote,this.props.currentQuotePath,g.default.pfacodes.SUMMERTIRES);return p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:6},p.default.createElement(m.Field,u({name:r,component:v.default,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.assets.wintertires.title",defaultMessage:"Winter Tires"}),key:"winter-tires"},t[r]))),p.default.createElement(h.Col,{md:6},p.default.createElement(m.Field,u({name:n,component:v.default,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.assets.summertires.title",defaultMessage:"Summer Tires"}),key:"summer-tires"},t[n]))))}}]),t}(p.default.Component);t.default=E},2755:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(2756),m=r(f),h=a(17),y=a(13),g=a(10),b=a(14),v=a(2655),E=a(262),O=a(2649),C=r(O),P=a(1132),w=a(2757),M=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleEditOptions=function(e){r.refs.editAssetOptionsPopup.toggle()},r.getTotalEditOptionsValue=function(e){return e.reduce(function(e,t){return(0,E.parseFloatOrEmpty)(t.dmdprixunitaire)&&(e+=(0,E.parseFloatOrEmpty)(t.dmdprixunitaire)+(0,E.parseFloatOrEmpty)(t.dmdmttax)),e},0)},n=a,l(r,n)}return i(t,e),c(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,P.fetchSiteOptions)({tpaparam:this.props.siteOptionKey})).then(function(e){console.log("Site option fetch: ",e)})}},{key:"render",value:function(){var e=this.props,t=e.component,a=e.intl,r=e.popupTitle,n=e.listdealassetcomponent,s=(e.siteOptionValue,e.form),l=e.makId,i=e.assetComponents,c=e.devCode,d=e.assetExp,f=e.accessKeys,y=e.id,g=o(e,["component","intl","popupTitle","listdealassetcomponent","siteOptionValue","form","makId","assetComponents","devCode","assetExp","accessKeys","id"]);if(f&&f[y]&&f[y].hidden)return null;this.context.showAccessKeys&&y&&(g.title=y);var b=a.formatMessage,E=a.formatNumber,O=p.default.createElement(m.default,{ref:"editAssetOptionsPopup",popupTitle:r,assetComponentOptions:i,listdealassetcomponent:n,currencyCode:c,currentAsset:d,accessKeys:f,form:s,dispatch:this.props.dispatch,formatMessage:b,formatNumber:E,listtaxrates:this.props.listtaxrates}),C=t;return p.default.createElement(C,u({},g,{value:this.getTotalEditOptionsValue(i),suffix:!0,disabled:this.props.disabled,suffixButton:p.default.createElement(h.Button,{className:"fa fa-plus",type:"button",disabled:!l,onClick:this.handleEditOptions,title:b(v.messages.editAssetOptionsLabel)})}),O)}}]),t}(d.Component);M.propTypes={component:d.PropTypes.element.isRequired,popupTitle:d.PropTypes.element.isRequired,siteOptionKey:d.PropTypes.string.isRequired},M.defaultProps={};var T=function(){var e=(0,b.formValueSelector)("dealForm"),t=(0,w.listObjectSelector)();return function(a,r){var n=a.newdeal,o="deal.listdealasset["+n.assetIndex+"]",s=e(a,o+".makid"),l=e(a,"deal.devcode"),i=e(a,o+".listdealassetcomponent"),u=a.siteOptions.options[r.siteOptionKey],c=t(C.default.getComponentsBySiteOption(i,u));return{assetExp:o,listtaxrates:n.listtaxrates,makId:s,assetComponents:c,devCode:l,siteOptionValue:u,listdealassetcomponent:i}}};M.contextTypes={showAccessKeys:p.default.PropTypes.bool},t.default=(0,y.connect)(T)((0,g.injectIntl)(M))},2756:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function o(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function s(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):s(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(2638),m=r(f),h=a(526),y=r(h),g=a(10),b=a(358),v=r(b),E=a(356),O=r(E),C=a(14),P=a(2649),w=r(P),M=a(2655),T=function(e){function t(){var e,a,r,n;l(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.handleAmountChanged=function(e,t){var a=r.props.metadata.customComponentMetadata,n=a.listtaxrates,o=a.currentAsset,s=w.default.getAmountIncludingTaxAmount(n,r.props.rowData.taxcode,t),l=o+".listdealassetcomponent["+r.componentIndex+"].dmdprixunitaire",i=s?s-Number(t):0;i=w.default.roundValueFromDevParam(i,P.DEVDECIMAL),t=w.default.roundValueFromDevParam(Number(t),P.DEVDECIMAL),r.props.metadata.customComponentMetadata.dispatch((0,C.change)("dealForm",l,t)),r.props.metadata.customComponentMetadata.dispatch((0,C.change)("dealForm",o+".listdealassetcomponent["+r.componentIndex+"].dmdmttax",i))},n=a,i(r,n)}return u(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.props.metadata.customComponentMetadata,a=t.listdealassetcomponent,r=t.currentAsset,n=t.summaryRowIndex,o=t.currencyCode,s=t.accessKeys,l=(t.dmdcodeproduit,t.configurable);this.componentIndex=a?a.findIndex(function(t){return t.optcode===e.props.rowData.optcode}):1;var i=0!==this.props.data?this.props.data:"0",u=(this.componentIndex,!(!this.props.rowData||!this.props.rowData[n])),c=l?r+".listdealassetcomponent.assetoptionspopup.dmdprixunitaire":void 0;return(s&&l&&s[c]?s[c]:{}).disabled&&l?p.default.createElement("div",{className:"alignRight"},p.default.createElement(g.FormattedNumber,{value:this.props.data,format:"currencyFormat",currency:o})):p.default.createElement(O.default,{onChange:this.handleAmountChanged,value:i,disabled:u,currency:o})}}]),t}(d.Component),F=function(e){function t(){return l(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,[{key:"render",value:function(){var e=this.props.metadata.customComponentMetadata.getTaxPercentage(this.props.data),t=e&&e.taxrate?e.taxrate/100:0,a=this.props.metadata.customComponentMetadata.formatNumber(t,{style:"percent",maximumFractionDigits:2});return p.default.createElement("span",null,a)}}]),t}(d.Component),A=function(e){function t(){var e,a,r,n;l(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.handleAmountTTCChanged=function(e,t){var a=r.props.metadata.customComponentMetadata,n=a.listtaxrates,o=a.currentAsset,s=w.default.getAmountExcludingTaxAmount(n,r.props.rowData.taxcode,t),l=o+".listdealassetcomponent["+r.componentIndex+"].dmdprixunitaire",i=s?t-s:0;s=w.default.roundValueFromDevParam(s,P.DEVDECIMAL),i=w.default.roundValueFromDevParam(i,P.DEVDECIMAL),r.props.metadata.customComponentMetadata.dispatch((0,C.change)("dealForm",o+".listdealassetcomponent["+r.componentIndex+"].dmdmttax",i)),r.props.metadata.customComponentMetadata.dispatch((0,C.change)("dealForm",l,s))},n=a,i(r,n)}return u(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.props.metadata.customComponentMetadata,a=t.currencyCode,r=t.summaryRowIndex,n=t.listdealassetcomponent,o=t.listtaxrates,s=this.props.data?this.props.data:w.default.getAmountIncludingTaxAmount(o,this.props.rowData.taxcode,this.props.rowData.dmdprixunitaire);this.componentIndex=n?n.findIndex(function(t){return t.optcode===e.props.rowData.optcode}):1;var l=!(!this.props.rowData||!this.props.rowData[r]);return p.default.createElement(O.default,{onChange:this.handleAmountTTCChanged,value:s,currency:a,disabled:l})}}]),t}(d.Component),_=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClose=function(){a.props.dispatch((0,C.arrayRemoveAll)(a.props.form,a.props.currentAsset+".listdealassetcomponent")),a.backUpListForOptions&&a.backUpListForOptions.forEach(function(e){a.props.dispatch((0,C.arrayPush)(a.props.form,a.props.currentAsset+".listdealassetcomponent",e))})},a.handleSaveEdittedOptions=function(){a.refs.editAssetOptionsPopup.toggle()},a.getTaxPercentage=function(e){var t=null;return a.props.listtaxrates&&(t=a.props.listtaxrates.find(function(t){return t.taxcode===e})),t},a.backUpListForOptions=[],a}return u(t,e),c(t,[{key:"toggle",value:function(){this.backUpListForOptions=new(Function.prototype.bind.apply(Array,[null].concat(o(this.props.listdealassetcomponent)))),this.refs.editAssetOptionsPopup.toggle()}},{key:"render",value:function(){var e=this.props,t=e.listdealassetcomponent,a=e.assetComponentOptions,r=(e.listtaxrates,n(e,["listdealassetcomponent","assetComponentOptions","listtaxrates"]),a),o=["dmddesignation","taxcode","dmdprixunitaire","amountincludingtax"],s=[{columnName:"dmddesignation",displayName:"",cssClassName:"col-md-3",summaryLabel:"Total"},{columnName:"taxcode",displayName:p.default.createElement(g.FormattedMessage,{id:"pos.deal.assets.edit.options.taxrate",defaultMessage:"Taxrate"}),cssClassName:"col-md-1",customComponent:F,customComponentMetadata:{getTaxPercentage:this.getTaxPercentage,formatNumber:this.props.formatNumber}},{columnName:"dmdprixunitaire",displayName:p.default.createElement(g.FormattedMessage,{id:"pos.deal.assets.edit.options.priceexcludingtax",defaultMessage:"Price excl. tax"}),cssClassName:"col-md-4",summaryType:"SUM",customComponent:T,customComponentMetadata:{currentAsset:this.props.currentAsset,listdealassetcomponent:t,dispatch:this.props.dispatch,listtaxrates:this.props.listtaxrates,currencyCode:this.props.currencyCode,summaryRowIndex:0}},{columnName:"amountincludingtax",displayName:p.default.createElement(g.FormattedMessage,{id:"pos.deal.assets.edit.options.amountincludingtax",defaultMessage:"Price incl. tax"}),cssClassName:"col-md-4",summaryType:"SUM",customComponent:A,customComponentMetadata:{listdealassetcomponent:t,currencyCode:this.props.currencyCode,currentAsset:this.props.currentAsset,summaryRowIndex:0,dispatch:this.props.dispatch,listtaxrates:this.props.listtaxrates}}],l=!!(r&&r.length>0);return p.default.createElement(y.default,{ref:"editAssetOptionsPopup",title:this.props.popupTitle,onSave:this.handleSaveEdittedOptions,saveLabel:p.default.createElement(g.FormattedMessage,{id:"pos.deal.assets.edit.options.apply",defaultMessage:"Apply"}),onClose:this.handleClose},p.default.createElement(m.default,{tableClassName:"table table-hover",useGriddleStyles:!1,showSummary:l,columns:o,columnMetadata:s,results:r,useCustomPagerComponent:!0,customPagerComponent:v.default,showFilter:!0,filterPlaceholderText:this.props.formatMessage(M.messages.popupFilterPlaceHolder),noDataMessage:this.props.formatMessage(M.messages.noDataMessage)}))}}]),t}(d.Component);t.default=_},2757:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listObjectSelector=void 0;var r=a(177),n=a(139),o=function(e){return e&&e.__esModule?e:{default:e}}(n),s=(0,r.createSelectorCreator)(r.defaultMemoize,o.default),l=function(e){return e};t.listObjectSelector=function(){return s(l,function(e){return e})}},2758:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(259),p=r(d),f=a(526),m=r(f),h=a(10),y=a(358),g=r(y),b=a(2655),v=a(2638),E=(a(13),a(28)),O=r(E),C=(a(357),function(e){function t(e){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),i(t,[{key:"toggle",value:function(){this.refs.stockPop.toggle()}},{key:"render",value:function(){var e=["ircserie","ircdt1circul","jalcode","warehouse"],t=[{columnName:"ircserie",displayName:c.default.createElement(h.FormattedMessage,{id:"pos.stock.popup.assetcars.column.vin",defaultMessage:"Vin"})},{columnName:"ircdt1circul",displayName:c.default.createElement(h.FormattedMessage,{id:"pos.stock.popup.assetcars.column.registrationdate",defaultMessage:"Registration date"}),customComponent:v.DateDisplay},{columnName:"jalcode",displayName:c.default.createElement(h.FormattedMessage,{id:"pos.stock.popup.assetcars.column.status",defaultMessage:"Status"})},{columnName:"warehouse",displayName:c.default.createElement(h.FormattedMessage,{id:"pos.stock.popup.assetcars.column.warehouse",defaultMessage:"Warehouse"})}];return c.default.createElement(m.default,{ref:"stockPop",title:this.props.popupTitle,onClose:this.props.oncloseAsset},c.default.createElement(O.default,{type:"primary"},c.default.createElement(p.default,{tableClassName:"table table-hover",useGriddleStyles:!1,columns:e,columnMetadata:t,results:this.props.assetsCarlist,useCustomPagerComponent:!0,customPagerComponent:g.default,onRowClick:this.props.handleRowClick,showFilter:!0,filterPlaceholderText:this.props.formatMessage(b.messages.popupFilterPlaceHolder),noDataMessage:this.props.formatMessage(b.messages.noDataMessage)})))}}]),t}(u.Component));t.default=C},2759:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(526),f=r(p),m=a(10),h=a(44),y=r(h),g=a(357),b=a(263),v=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSave=function(){null!=a.state.config&&a.dispatch((0,g.patchDealFromImportedConfig)(a.state.config)),a.dispatch((0,b.showImportAssetPopup)(!1))},a.handleClose=function(){a.dispatch((0,b.showImportAssetPopup)(!1))},a.handleConfigChange=function(e){a.setState({config:e.target.value})},a.state={config:null},a.dispatch=e.dispatch,a}return l(t,e),u(t,[{key:"render",value:function(){var e=this.props.accessKeys;return d.default.createElement(f.default,{title:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.import.title",defaultMessage:"Import asset(s)"}),ref:"modal",onSave:this.handleSave,onClose:this.handleClose,saveLabel:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.import.import",defaultMessage:"Import"}),show:this.props.show},d.default.createElement(y.default,i({value:this.state.config,component:y.default,onChange:this.handleConfigChange,title:d.default.createElement(m.FormattedMessage,{id:"pos.deal.assets.import.config",defaultMessage:"Url/Code"})},e["pos.deal.assets.import.config"])))}}]),t}(d.default.Component);t.default=v},2760:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(122),p=r(d),f=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return console.log.apply(console,t)},m=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={empty:!0},a}return l(t,e),i(t,[{key:"loadDatas",value:function(e,t,a){var r,n=this;try{r=a?p.default.post(e,t):p.default.get(e,{params:t})}catch(e){return void this.setState(function(){return{loading:!1,error:e}})}this.setState(function(){return{loading:!0,error:void 0}}),this._loadingPromise=r,r.then(function(e){f("Json result=",e),n._loadingPromise&&(n._clearPromise(),n.setState({data:n.convertData(e.data),children:n.renderChildren(n.state.data,e.data),loading:!1,error:void 0}),n.onLoad(e.data))},function(t){console.error("Request '"+e+"' throws error=",t),n._clearPromise(),n.setState(function(){return{error:t,loading:!1}}),console.log("Connection problem !\n"+t)})}},{key:"renderChildren",value:function(e,t){}},{key:"onLoad",value:function(e){this.props.onLoad&&this.props.onLoad(e)}},{key:"clearData",value:function(){void 0!==this.state&&this.setState(function(){return{children:void 0,loading:!1,error:null,data:void 0,empty:!0}})}},{key:"convertData",value:function(e){return e}},{key:"componentWillUnmount",value:function(){this._clearPromise(!0)}},{key:"_clearPromise",value:function(e){var t=this._loadingPromise;t&&(delete this._loadingPromise,e&&"function"==typeof t.cancel&&t.cancel())}}]),t}(c.default.Component);t.default=m},2761:function(e,t,a){function r(e){return n(e,o|s)}var n=a(1128),o=1,s=4;e.exports=r},2762:function(e,t,a){"use strict";function r(e){try{var t=e.split(o),a=t.map(function(e,t){return e.split(s).map(function(e){return isNaN(parseFloat(e))?"0":e})});return a.pop(),0!=a.length&&(1!=a.length||1!=a[0].length)&&a}catch(e){return!1}}function n(e){try{var t=e.length,a=e.reduce(function(e,a,r){return e+a.reduce(function(e,t,r){return e+=t,r!=a.length-1&&(e+=s),e},"")+(r!=t-1?o:"")},"");return(1!=a.split(o).length||1!=a.split(o)[0].split(s).length)&&a}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.excelClipboardToJson=r,t.jsonExcelClipboard=n;var o="\n",s="\t"},2763:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(13),m=a(64),h=a(10),y=a(14),g=a(2764),b=r(g),v=a(2765),E=r(v),O=a(2767),C=r(O),P=a(2768),w=r(P),M=a(2769),T=r(M),F=a(2771),A=r(F),_=a(2732),S=r(_),N=a(2772),j=r(N),x=a(2731),k=r(x),R=a(527),D=a(208),I=r(D),q=a(261),L=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(q),V=a(262),B=a(43),K=a(263),U=a(2773),H=r(U),Q=a(357),G=a(2671),W=r(G),Y=a(17),z=[],J=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),c=0;c<o;c++)i[c]=arguments[c];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.isFieldHidden=function(e){return r.props.accessKeys[e]&&r.props.accessKeys[e].hidden},r.isFieldHiddenOrReadOnly=function(e){return!r.props.accessKeys[e]||r.props.accessKeys[e].hidden||r.props.accessKeys[e].readOnly||r.props.accessKeys[e].disabled},r.notifySuccess=function(e,t){var a=void 0,n=e;switch(t){case L.FNDWHAT_INTERESTRATE_CODE:a=r.props.intl.formatMessage(W.default.interestSuccess),n=r.props.intl.formatNumber(e/100,{style:"percent",maximumFractionDigits:2});break;case L.FNDWHAT_SUBSIDY_CODE:n=r.props.intl.formatNumber(e,u({},r.props.intl.formats.number.currencyFormat,{currency:r.props.currencyCode})),a=r.props.intl.formatMessage(W.default.subsidySuccess);break;default:n=r.props.intl.formatNumber(e,u({},r.props.intl.formats.number.currencyFormat,{currency:r.props.currencyCode})),a=r.props.intl.formatMessage(W.default.paymentSuccess)}m.notify.show(a+" "+n,"success")},r.notifyError=function(){m.notify.show(r.props.intl.formatMessage(W.default.computePaymentError),"error")},r.handleNewQuote=function(){r.props.dispatch((0,R.addQuote)(r.props.form,r.props.quoteCardinality)),r.props.quoteCardinality==L.QUOTE_CARDINALITY_ONE&&r.dispatch((0,K.appendNewAsset)(r.props.form))},r.handleCurrencyChanged=function(e){r.props.dispatch((0,y.change)(r.props.form,"deal.devcode",e))},r.handleCostChanged=function(e){r.props.dispatch((0,R.updateFromPfiInvestissement)(r.props.quote,r.props.form,r.quoteField,""==e.target.value?0:(0,V.parseFloatOrEmpty)(e.target.value)))},n=a,l(r,n)}return i(t,e),c(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,B.fetchReferenceTableWithParams)(B.tables.CURRENCY,{tpgcode:this.props.tpgcode})),this.props.dispatch((0,Q.getPossibleFinancialServices)(this.props.quoteIndex)),this.props.dpimt>0&&this.props.dpimt!==this.props.quote.pfiinvestissement&&(this.props.dispatch((0,R.updateFromPfiInvestissement)(this.props.quote,this.props.form,this.quoteField,this.props.dpimt)),m.notify.show(this.props.intl.formatMessage(W.default.assetCostUpdate),"warning"))}},{key:"componentWillReceiveProps",value:function(e){e.quote.pfimtdownpayment!==this.props.quote.pfimtdownpayment&&""===e.quote.pfimtdownpayment&&this.props.dispatch((0,R.setDepositMnt)(e.quote,this.quoteField,0,this.props.form)),e.quoteIndex!==this.props.quoteIndex||this.props.computeLoading||this.checkPayment(e,this.props),e.tpgcode!==this.props.tpgcode&&this.props.dispatch((0,B.fetchReferenceTableWithParams)(B.tables.CURRENCY,{tpgcode:e.tpgcode}))}},{key:"fieldAsChange",value:function(e,t,a,r){return a(e,r)!=a(t,r)}},{key:"checkPayment",value:function(e,t){var a=e.quote,r=this.props.quote,n=this.fieldAsChange(a,r,L.default.getAssetCost),o=this.fieldAsChange(a,r,L.default.getDepositMnt),s=this.fieldAsChange(a,r,L.default.getTerm),l=this.fieldAsChange(a,r,L.default.getProfile),i=!this.isFieldHiddenOrReadOnly(L.default.getCostOfFundsField(this.quoteField))&&this.fieldAsChange(a,r,L.default.getCostOfFunds),u=!this.isFieldHiddenOrReadOnly(L.default.getMarginField(this.quoteField))&&this.fieldAsChange(a,r,L.default.getMargin),c=this.fieldAsChange(a,r,L.default.getScaleId),d=this.fieldAsChange(a,r,L.default.getScaleOrder),p=this.fieldAsChange(a,r,L.default.getPfiterme),f=!this.isFieldHiddenOrReadOnly(L.default.getFindWhatField(r,this.quoteField))&&this.fieldAsChange(a,r,L.default.getFindWhat),m=!this.isFieldHiddenOrReadOnly(L.default.getPaymentField(this.quoteField))&&this.fieldAsChange(a,r,L.default.getPaymentMnt),h=!this.isFieldHiddenOrReadOnly(L.default.getSubsidyMntField(r,this.quoteField))&&this.fieldAsChange(a,r,L.default.getSubsidyMnt2,L.default.getQuoteAttribute),y=!this.isFieldHiddenOrReadOnly(L.default.getFindFromField(r,this.quoteField))&&this.fieldAsChange(a,r,L.default.getFindFromRateValue,L.default.getFindFromFixedIndex),g=!this.isFieldHiddenOrReadOnly(L.default.getCostOfFundsField(this.quoteField))&&this.fieldAsChange(a,r,L.default.getCustomerRate,L.default.getQuoteAttribute),b=this.fieldAsChange(a,r,L.default.getBalloonMnt),v=this.fieldAsChange(a,r,L.default.getAdvancePayment),E=this.fieldAsChange(a,r,L.default.getFollowedBy),O=this.fieldAsChange(a,r,L.default.getVATDEFER),C=e.startDate!==this.props.startDate,P=L.default.getAssetCost(a),w=L.default.getAssetCost(r);if(!this.props.computeLoading&&P>0&&(C||b||p||n||o||s||l||i||u||c||d||f||m||h||y||g||v||E||O)){var M=m?L.RENTAL:0===w||c?L.ALL:null;a.dpfordre&&this.props.dispatch((0,R.computePayment)(a.dpfordre,this.notifySuccess,this.notifyError,this.props.form,this.quoteField,this.props.quoteIndex,M))}}},{key:"handleChangeQuote",value:function(e){var t=this.props.dispatch;this.props.quoteCardinality==L.QUOTE_CARDINALITY_ONE&&t((0,K.changeAssetIndex)(e)),t((0,R.changeQuote)(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currencyCode,r=t.quote,n=t.startDate,s=t.startDateField,l=t.readOnly,i=t.listdealquote,c=t.intl,d=t.tpgcode;o(t,["currencyCode","quote","startDate","startDateField","readOnly","listdealquote","intl","tpgcode"]),c.formatMessage;if(!r)return null;var f=p.default.createElement(S.default,{ref:"scheduledPaymentProfilePopup",quote:r,quoteField:this.quoteField,startDate:n,currencyCode:a,form:this.props.form,dispatch:this.props.dispatch,enableReset:!1,enableSave:!1}),m=p.default.createElement(j.default,{ref:"subsidyPopup",quote:r,quoteField:this.quoteField,form:this.props.form,dispatch:this.props.dispatch,currencyCode:a}),g=this.props.promoteButton,v=z,O=z;if(r&&r.listdealquoteservice&&r.listdealquoteservice.length&&(v=p.default.createElement(H.default,u({rows:r.listdealquoteservice,possibleServices:this.props.possibleServices,id:"pos.deal.financialquote.services.table",accessKeys:this.props.accessKeys},this.props))),i.length>0){var P=i.map(function(t,a){return p.default.createElement(Y.Button,{className:"btn-quote-index",bsStyle:e.props.quoteIndex===a&&i.length>1?"primary":"default",onClick:function(){return e.handleChangeQuote(a)}},1+a)});O=p.default.createElement("div",{className:"quote-tab pull-right"},P,p.default.createElement(Y.Button,{bsStyle:"primary",disabled:l,onClick:this.handleNewQuote},p.default.createElement("i",{className:"fa fa-plus"})))}var M=p.default.createElement(h.FormattedMessage,{id:"pos.quote.assetcost",defaultMessage:"Asset cost"});return L.default.getQuoteType(r)===L.TPG_CODE_LOAN&&(M=p.default.createElement(h.FormattedMessage,{id:"pos.quote.amountFinanced",defaultMessage:"Amount financed"})),p.default.createElement("div",{className:"financialQuote2"},f,m,p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"pull-right"},p.default.createElement("div",{className:"btn-promote-to-deal"},g))),p.default.createElement("div",{className:"flex-row",style:{"flex-wrap":"wrap"}},p.default.createElement("div",{className:"col-md-4"},p.default.createElement(y.Field,{name:this.quoteField+".pfiinvestissement",component:k.default,readOnly:l,title:M,currencyCode:a,onCurrencyChange:this.handleCurrencyChanged,currenciesList:this.props.currenciesList,tpgcode:d,onChange:this.handleCostChanged})),p.default.createElement("div",{className:"col-md-8 pull-right"},p.default.createElement("div",{className:"text-right"},p.default.createElement(h.FormattedMessage,{id:"pos.quote.listquote",defaultMessage:"Quote",tagName:"label"})),O)),p.default.createElement("div",{className:" row"},p.default.createElement("div",{className:" col-md-4"},p.default.createElement(A.default,u({quoteField:this.quoteField},this.props))),p.default.createElement("div",{className:" col-md-4"},p.default.createElement(E.default,u({quoteField:this.quoteField},this.props))),p.default.createElement("div",{className:" col-md-4"},p.default.createElement(C.default,u({quoteField:this.quoteField},this.props,{popup:this.refs})))),p.default.createElement("div",{className:" row"},p.default.createElement("div",{className:" col-md-4"},p.default.createElement(T.default,u({startDateField:s},this.props,{quoteField:this.quoteField,popup:this.refs}))),p.default.createElement("div",{className:" col-md-4"},p.default.createElement(b.default,u({quoteField:this.quoteField},this.props))),p.default.createElement("div",{className:" col-md-4"},p.default.createElement(w.default,u({quoteField:this.quoteField},this.props)))),p.default.createElement("div",{className:" row"},v))}},{key:"quoteField",get:function(){return"deal.listdealquote["+this.props.quoteIndex+"]"}}]),t}(d.Component),X=function(e,t){var a=e.newdeal,r=(0,y.getFormValues)(t.form)(e).deal,n=(0,y.formValueSelector)(t.form),o="deal.listdealquote["+a.quoteIndex+"]",s=e.newdeal.quoteIndex,l=n(e,"deal.tpgcode");return{currencyCode:n(e,"deal.devcode"),tpgcode:l,computeLoading:a.computeLoading,quote:n(e,o),quoteIndex:a.quoteIndex,listdealquote:n(e,"deal.listdealquote"),readOnly:a.readOnly,startDate:I.default.getStartDate(r),startDateField:I.default.getStartDateField(r),action:a.action,currentJalcode:n(e,"deal.jalcode"),rateTaxValue:e.newdeal.rateTaxValue?e.newdeal.rateTaxValue:0,dealTaxCode:n(e,"deal.taxcode"),currenciesList:(0,B.getReferenceTable)(e,B.tables.CURRENCY,{tpgcode:l}).data,durprofileList:(0,B.getReferenceTable)(e,B.tables.LANTUSPARAM,{tusnom:"DURPROFIL"}).data,dpimt:r.listdealasset&&I.default.getTotalAssetAmount(r),possibleServices:e.newdeal.possibleServices,initialPossibleServices:e.newdeal.initialPossibleServices,initialSavedServices:e.newdeal.formValues.deal.listdealquote[s]?e.newdeal.formValues.deal.listdealquote[s].listdealquoteservice:[]}};t.default=(0,f.connect)(X)((0,h.injectIntl)(J))},2764:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(2647),h=r(m),y=a(109),g=r(y),b=a(2644),v=r(b),E=a(527),O=a(261),C=r(O),P=a(262),w=a(14),M=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleBalloonChanged=function(e,t){r.props.dispatch((0,E.setBalloonMnt)(r.props.quote,r.props.quoteField,(0,P.parseFloatOrEmpty)(t),r.props.form))},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.quote,a=e.quoteField,r=e.readOnly,n=e.accessKeys,s=(o(e,["quote","quoteField","readOnly","accessKeys"]),C.default.getBalloonMntField(a)),l=C.default.getBalloonPctField(a),i=C.default.getBalloonRVDateField(t,a),c=C.default.getAssetCost(t);return p.default.createElement(h.default,{title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.balloon.title",defaultMessage:"Balloon"}),readOnly:r},p.default.createElement(w.Fields,{names:[s,l],component:v.default,accessKeys:n,currencyCode:this.props.currencyCode,ref:"balloon",x:!0,onValueChange:this.handleBalloonChanged,baseValue:c,currencyValue:s,percentValue:l,readOnly:this.props.computeLoading,title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.ballon.amount",defaultMessage:"Amount"})}),p.default.createElement(w.Field,u({name:i,component:g.default},n[i],{title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.ballon.date",defaultMessage:"Date"})})))}}]),t}(p.default.Component);t.default=M},2765:function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function s(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),p=a(0),f=n(p),m=a(2647),h=n(m),y=a(2644),g=n(y),b=a(527),v=(r(b),a(261)),E=r(v),O=(a(262),a(10)),C=a(14),P=a(63),w=n(P),M=a(43),T=a(2766),F=n(T),A=a(356),_=n(A),S=a(1101),N=n(S),j=a(357),x=function(e){function t(){var e,a,r,n;l(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.handleButtonClick=function(){r.refs.depositPopup.toggle()},r.handleDepositChanged=function(e,t){r.props.dispatch((0,b.setDepositMnt)(r.props.quote,r.props.quoteField,t,r.props.form))},r.handleVATChanged=function(e,t){r.props.dispatch((0,j.fetchRateTax)(t,{isDeal:!0}))},r.handleVatDeferralChanged=function(e,t){var a=r.props.quoteField+E.default.getQuoteAttributeField(r.props.quote,E.VAT_PAYM_METHOD_ATTR)+".pfachaine";t&&t>0?r.props.dispatch((0,C.change)("dealForm",a,E.DEFERRAL_VAT)):r.props.dispatch((0,C.change)("dealForm",a,E.FINANCED_VAT))},n=a,i(r,n)}return u(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.currencyCode,a=e.quote,r=e.quoteField,n=e.readOnly,o=e.accessKeys,l=(s(e,["currencyCode","quote","quoteField","readOnly","accessKeys"]),E.default.getNetAdvanceMntField(a,r)),i=E.default.getNetAdvancePctField(a,r),u=E.default.getFundingCostMntField(a,r),d=E.default.getDepositMntField(a,r),p=E.default.getDepositPctField(a,r),m=(E.default.getVATMntField(a,r),E.default.getVATPctField(a,r),E.default.getAssetCost(a)),y=E.default.getPaymentField(r),b=(E.default.getFindWhat(a),E.default.getVATDEFERField(a,r)),v=f.default.createElement(F.default,{id:"pos.quote.costanalysis.popup",ref:"depositPopup",quote:a,quoteField:this.quoteField,dispatch:this.props.dispatch,currencyCode:t}),P=o["pos.quote.costanalysis.popup"],T=!P||!P.hidden||!P.hidden;return f.default.createElement(h.default,{title:f.default.createElement(O.FormattedMessage,{id:"pos.quote.costanalysis.title",defaultMessage:"Cost analysis"}),onButtonClick:this.handleButtonClick,hasPopup:T,popupId:"pos.quote.costanalysis.popup",readOnly:n},v,f.default.createElement(C.Fields,c({names:[d,p],component:g.default,ref:"deposit"},o[d],{currencyCode:t,currencyValue:d,baseValue:m,percentValue:p,onValueChange:this.handleDepositChanged,title:f.default.createElement(O.FormattedMessage,{id:"pos.quote.costanalysis.deposit",defaultMessage:"Deposit"})})),f.default.createElement(C.Fields,{names:[l,i],component:g.default,ref:"netAdvance",accessKeys:o,currencyCode:t,currencyValue:l,baseValue:m,percentValue:i,title:f.default.createElement(O.FormattedMessage,{id:"pos.quote.costanalysis.netadvance",defaultMessage:"Net advance"}),readOnly:!0}),f.default.createElement(C.Field,{name:u,component:_.default,ref:"fundingCost",title:f.default.createElement(O.FormattedMessage,{id:"pos.quote.costanalysis.fundingCost",defaultMessage:"Funding cost"}),disabled:!0}),f.default.createElement(C.Field,c({name:"deal.taxcode",title:f.default.createElement(O.FormattedMessage,{id:"pos.quote.costanalysis.vat",defaultMessage:"VAT"}),component:w.default},o["deal.taxcode"],{options:M.tables.LANTAXE,onChange:this.handleVATChanged})),f.default.createElement(C.Field,{name:b,component:N.default,suffix:"month(s)",title:f.default.createElement(O.FormattedMessage,{id:"pos.quote.costanalysis.deferralVAT",defaultMessage:"VAT Deferral"}),onBlur:this.handleVatDeferralChanged,hidden:a.tpgcode!==E.TPG_CODE_HPFI,disabled:this.props.computeLoading}),f.default.createElement(C.Field,c({name:y,component:_.default},o[y],{title:f.default.createElement(O.FormattedMessage,{id:"pos.quote.paymentamount",defaultMessage:"Payment amount"}),currencyCode:t,disabled:this.props.computeLoading})))}}]),t}(f.default.Component);t.default=x},2766:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(526),f=r(p),m=a(356),h=r(m),y=a(10),g=function(e){function t(e){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"toggle",value:function(){var e=this;this.refs.modal.toggle(),setTimeout(function(){e.refs.cost.focus()},200)}},{key:"handleSaveEvent",value:function(){this.refs.modal.toggle()}},{key:"handleResetEvent",value:function(){this.refs.modal.toggle()}},{key:"render",value:function(){var e=this,t=this.props,a=t.currencyCode;o(t,["currencyCode"]);return d.default.createElement(f.default,{ref:"modal",title:d.default.createElement(y.FormattedMessage,{id:"pos.quote.depositpopup.title",defaultMessage:"Analysis of advance"}),onReset:function(t){return e.handleResetEvent(t)},onSave:function(t){return e.handleSaveEvent(t)}},d.default.createElement(h.default,{currencyCode:a,title:d.default.createElement(y.FormattedMessage,{id:"pos.quote.depositpopup.cost",defaultMessage:"Cost (exc VAT)"}),ref:"cost"}),d.default.createElement(h.default,{currencyCode:a,title:d.default.createElement(y.FormattedMessage,{id:"pos.quote.cash.cost",defaultMessage:"Cash deposit"})}),d.default.createElement(h.default,{currencyCode:a,title:d.default.createElement(y.FormattedMessage,{id:"pos.quote.vat.cost",defaultMessage:"VAT on cost"})}),d.default.createElement(h.default,{currencyCode:a,title:d.default.createElement(y.FormattedMessage,{id:"pos.quote.netadvance.cost",defaultMessage:"Net advance"})}))}}]),t}(d.default.Component);t.default=g},2767:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(2647),m=r(f),h=a(14),y=a(2644),g=r(y),b=a(528),v=r(b),E=a(527),O=a(261),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(O),P=a(262),w=a(10),M=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleCommissionChanged=function(e,t){r.props.dispatch((0,E.setCommissionMnt)(r.props.quote,r.props.quoteField,(0,P.parseFloatOrEmpty)(t),r.props.form))},r.handleSubsidyChanged=function(e,t){r.props.dispatch((0,E.setSubsidyMnt)(r.props.quote,r.props.quoteField,(0,P.parseFloatOrEmpty)(t),r.props.form))},r.handleCofChanged=function(e,t){r.props.dispatch((0,E.setCostOfFunds)(r.props.quote,r.props.quoteField,(0,P.parseFloatOrEmpty)(t),r.props.form))},r.handleButtonClick=function(){r.props.popup.subsidyPopup.toggle()},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.quote,a=e.quoteField,r=e.readOnly,n=e.accessKeys,s=e.currencyCode,l=(o(e,["quote","quoteField","readOnly","accessKeys","currencyCode"]),C.default.getCommissionMntField(t,a)),i=C.default.getCommissionPctField(t,a),c=C.default.getSubsidyMntField(t,a),d=C.default.getSubsidyPctField(t,a),f=C.default.getCostOfFundsField(a),y=C.default.getDealerSubsidyMnt(t)||C.default.getManSubsidyMnt(t),b=C.default.getNetAdvanceMnt(t),E=C.default.getFindWhat(t),O=C.default.getCustomerRateField(t,a),P=C.default.getMarginField(a),M=!(n[c]&&n[c].hidden&&n[d]&&n[d].hidden);return p.default.createElement(m.default,{title:p.default.createElement(w.FormattedMessage,{id:"pos.quote.profitability.title",defaultMessage:"Profitability"}),onButtonClick:this.handleButtonClick,complete:y,hasPopup:M,readOnly:r},p.default.createElement(h.Fields,{names:[l,i],component:g.default,ref:"commission",accessKeys:n,currencyValue:l,currencyCode:s,percentValue:i,baseValue:b,title:p.default.createElement(w.FormattedMessage,{id:"pos.quote.profitability.commission",defaultMessage:"Commission"}),onValueChange:this.handleCommissionChanged}),p.default.createElement(h.Fields,u({names:[c,d],component:g.default,ref:"subsidy"},n[c],{readOnly:r||E===C.FNDWHAT_SUBSIDY_CODE,currencyValue:c,currencyCode:s,percentValue:d,baseValue:b,title:p.default.createElement(w.FormattedMessage,{id:"pos.quote.profitability.subsidy",defaultMessage:"Subsidy"}),onValueChange:this.handleSubsidyChanged})),p.default.createElement(h.Field,u({name:P},n[P],{component:v.default,prefix:"%",title:p.default.createElement(w.FormattedMessage,{id:"pos.quote.margin",defaultMessage:"Margin"})})),p.default.createElement(h.Field,u({name:O},n[O],{component:v.default,prefix:"%",title:p.default.createElement(w.FormattedMessage,{id:"pos.quote.customerrate",defaultMessage:"Customer rate"})})),p.default.createElement(h.Field,u({component:v.default},n[f],{prefix:"%",title:p.default.createElement(w.FormattedMessage,{id:"pos.quote.profitability.costoffunds",defaultMessage:"Cost of funds"}),name:f,onChange:this.handleCofChanged})))}}]),t}(p.default.Component);t.default=M},2768:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(10),f=a(2647),m=r(f),h=a(2644),y=r(h),g=a(527),b=a(261),v=r(b),E=a(262),O=a(14),C=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleDocumentationFeeChanged=function(e,t){r.props.dispatch((0,g.setDocumentationFeeMnt)(r.props.quote,r.props.quoteField,(0,E.parseFloatOrEmpty)(t),r.props.form))},r.handleOptionFeeChanged=function(e,t){r.props.dispatch((0,g.setOptionFeeMnt)(r.props.quote,r.props.quoteField,(0,E.parseFloatOrEmpty)(t),r.props.form))},n=a,l(r,n)}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.quote,a=e.quoteField,r=e.readOnly,n=e.accessKeys,s=e.currencyCode,l=(o(e,["quote","quoteField","readOnly","accessKeys","currencyCode"]),v.default.getDocumentationFeeMntField(t,a)),i=v.default.getDocumentationFeePctField(t,a),u=v.default.getOptionFeeMntField(t,a),c=v.default.getOptionFeePctField(t,a),f=v.default.getAssetCost(t);return d.default.createElement(m.default,{title:d.default.createElement(p.FormattedMessage,{id:"pos.quote.fees.title",defaultMessage:"Fees & charges"}),readOnly:r},d.default.createElement(O.Fields,{names:[l,i],component:y.default,ref:"documentationFee",accessKeys:n,currencyCode:s,currencyValue:l,percentValue:i,baseValue:f,currency:"£",title:d.default.createElement(p.FormattedMessage,{id:"pos.quote.fees.docfee",defaultMessage:"Documentation fee"}),onValueChange:this.handleDocumentationFeeChanged}),d.default.createElement(O.Fields,{names:[u,c],component:y.default,ref:"optionFee",accessKeys:n,currencyCode:s,currencyValue:u,percentValue:c,baseValue:f,currency:"£",title:d.default.createElement(p.FormattedMessage,{id:"pos.quote.fees.otpion",defaultMessage:"Option fee"}),hidden:"HPFI"!==t.tpgcode,onValueChange:this.handleOptionFeeChanged}))}}]),t}(d.default.Component);t.default=C},2769:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(2647),h=r(m),y=a(109),g=r(y),b=a(1101),v=r(b),E=a(208),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),C=a(261),P=r(C),w=a(262),M=a(63),T=r(M),F=a(2770),A=r(F),_=a(14),S=a(43),N=a(17),j="030",x=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleTermChanged=function(e){r.props.dispatch((0,_.change)(r.props.form,"deal.pfinbperiodes",(0,w.parseIntOrEmpty)(e.target.value))),r.props.dispatch((0,_.change)(r.props.form,r.props.quoteField+".pfinbperiodes",(0,w.parseIntOrEmpty)(e.target.value))),r.props.dispatch((0,_.change)("dealForm",P.default.getDurationProfilField(r.props.quote,r.props.quoteField),""))},r.getPeriodicity=function(e){switch(e){case"030":return"M";case"090":return"Q";case"180":return"S";case"360":return"A"}},r.handleProfileChanged=function(e,t){var a=[];if(t.includes("+"))a=t.split("+");else{var n=r.props.durprofileList.find(function(e){return e.code.includes(r.getPeriodicity(t))});if(!n)return void r.props.dispatch((0,_.change)("dealForm",r.props.quoteField+".pfiperiodicite",j));a=n.code.split("+")}var o=(0,w.parseIntOrEmpty)(a[0]),s=a[1][a[1].length-1],l=(0,w.parseIntOrZero)(a[1].substring(0,a[1].length-1)),i="";switch(s){case"M":i="030";break;case"Q":i="090";break;case"S":i="180";break;case"A":i="360"}r.props.dispatch((0,_.change)("dealForm",r.props.quoteField+".pfiperiodicite",i)),r.props.dispatch((0,_.change)("dealForm",P.default.getFollowedByField(r.props.quote,r.props.quoteField),l)),r.props.dispatch((0,_.change)("dealForm",P.default.getAdvancePaymentField(r.props.quote,r.props.quoteField),o)),r.props.dispatch((0,_.change)("dealForm",P.default.getDurationProfilField(r.props.quote,r.props.quoteField),t))},r.getProfile=function(){return P.default.getAdvancePayment(r.props.quote)+"+"+P.default.getFollowedBy(r.props.quote)+r.getPeriodicity(r.props.quote.pfiperiodicite)},r.handleInAdvanceChanged=function(e,t){r.props.dispatch((0,_.change)("dealForm",P.default.getDurationProfilField(r.props.quote,r.props.quoteField),""))},r.handleButtonClick=function(e){r.props.popup.scheduledPaymentProfilePopup.toggle()},r.handleTermEditable=function(e){var t=1===P.default.getTermEditable(r.props.quote);e.preventDefault(),e.stopPropagation(),r.props.dispatch((0,_.change)("dealForm",P.default.getTermEditableField(r.props.quote,r.props.quoteField),t?0:1)),t?setTimeout(function(){r.refs.term.getRenderedComponent().focus()},200):(r.props.dispatch((0,_.change)("dealForm","pfinbperiodes",null)),r.props.dispatch((0,_.change)("dealForm",P.default.getTermField(r.props.quote,r.props.quoteField),null)))},r.getButtonValues=function(){var e=r.props.durprofileList,t=[];if(e&&e.length>0){t.push({code:"030",label:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.paymentfrequency.monthly",defaultMessage:"Monthly"})},{code:"090",label:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.paymentfrequency.quarterly",defaultMessage:"Quarterly"})},{code:"360",label:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.paymentfrequency.annually",defaultMessage:"Annually"})});var a=!1;e.map(function(e){e.code.includes("S")&&!a&&(a=!0,t.push({code:"180",label:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.paymentfrequency.semi",defaultMessage:"Semi"})}))})}return t.sort(function(e,t){return e.code-t.code})},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.quote,a=e.quoteField,r=e.startDateField,n=e.accessKeys,s=(o(e,["quote","quoteField","startDateField","accessKeys"]),this.props.readOnly||this.props.computeLoading),l=(P.default.getTermField(t,a),P.default.getAdvancePaymentField(this.props.quote,a)),i=1===P.default.getTermEditable(t),c=this.props.quoteField+".pfiperiodicite",d=P.default.getFollowedByField(this.props.quote,a),m=a+".pfiterme",y=i&&"primary",b=i?"V":"",E=i?p.default.createElement(N.Button,{bsStyle:y,onClick:this.handleTermEditable},p.default.createElement("span",{className:"fa fa-pencil"})):"",C=P.default.getQuoteType(t),w=n["pos.quote.paymentprofile.popup"]||{},M=!w.hidden,F=P.default.getQuoteAttributeFieldValue(t,a,P.default.pfacodes.DTFIRSTPAYMENT);return p.default.createElement(h.default,{title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.title",defaultMessage:"Payment profile"}),onButtonClick:this.handleButtonClick,hasPopup:M,specificIcon:"fa fa-calendar"},p.default.createElement(_.Field,{component:g.default,name:r,title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.startdate",defaultMessage:"Start date"}),readOnly:s}),p.default.createElement(_.Field,u({component:g.default,name:F},n[F],{title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.firstpaydate",defaultMessage:"First payment date"}),readOnly:s})),p.default.createElement(T.default,{value:this.getProfile(),options:S.tables.LANTUSPARAM,refParams:{tusnom:"DURPROFIL"},title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.duration",defaultMessage:"Duration Profile"}),readOnly:s,onChange:this.handleProfileChanged}),p.default.createElement(_.Field,{component:A.default,options:this.getButtonValues(),name:c,title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.paymentfrequency",defaultMessage:"Payment frequency"}),readOnly:s,onChange:this.handleProfileChanged,durprofileList:this.props.durprofileList}),p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-md-6"},p.default.createElement(_.Field,{component:v.default,name:l,title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.advance",defaultMessage:"In Advance"}),readOnly:s,prefixButton:E,prefix:b,ref:"advance",visible:C===O.VALUE_CODE_BUSINESS_TYPE_CBM,onChange:this.handleInAdvanceChanged})),p.default.createElement("div",{className:"col-md-6"},p.default.createElement(_.Field,{component:v.default,name:d,withRef:!0,title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.followedby",defaultMessage:"Followed by"}),readOnly:s,prefix:b,prefixButton:E,ref:"term",visible:C===O.VALUE_CODE_BUSINESS_TYPE_CBM,onChange:this.handleTermChanged}))),p.default.createElement(_.Field,u({name:a+".pfiterme"},n[m],{readOnly:s,component:T.default,options:S.tables.LANTTRPARAM,refParams:{ttrnom:"PERCEPTION",pcrid:t.pcrid,pcrordre:t.pcrordre,tpgcode:this.props.tpgcode},allowEmptyParams:!0,title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.paymentprofile.term",defaultMessage:"Term"})})))}}]),t}(p.default.Component);t.default=x},2770:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=(a(14),a(17)),f=a(3),m=r(f),h=a(10),y=a(80),g=r(y),b=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"handleChange",value:function(e){var t=e.code;this.props.input&&this.props.input.onChange(t),this.props.onChange&&this.props.onChange(t)}},{key:"render",value:function(){var e=this,t=this.props.input||{},a=(o(t,["onChange","onBlur","onFocus"]),this.props),r=a.title,n=(a.isLoading,a.disabled),s=a.hidden,l=a.accessKey,i=a.id,u=a.akField,c=o(a,["title","isLoading","disabled","hidden","accessKey","id","akField"]);if(s||l&&l.hidden)return!1;var f={"form-group":!0};c.groupClassName&&(f[c.groupClassName]=!0);var y=t.value||c.defaultValue,b=function(e){return y&&y.includes(e.code)&&"primary"},v=c.options.map(function(t){return d.default.createElement(p.Button,{bsStyle:b(t),disabled:n,onClick:function(){return e.handleChange(t)}}," ",t.label)});return d.default.createElement(p.FormGroup,{bsClass:(0,m.default)(f)},d.default.createElement(p.ControlLabel,null,r),d.default.createElement(p.ButtonGroup,null,v),c.meta&&c.meta.touched&&c.meta.error&&d.default.createElement(p.HelpBlock,null,d.default.createElement(h.FormattedMessage,c.meta.error)),d.default.createElement(g.default,{name:name,id:i,title:r,akField:u}))}}]),t}(c.Component);t.default=b},2771:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(2647),f=r(p),m=a(356),h=r(m),y=a(528),g=r(y),b=a(262),v=a(527),E=a(261),O=r(E),C=a(10),P=a(14),w=a(63),M=r(w),T=a(43),F=a(2699),A=(r(F),[{code:"PA",label:"Payment Amount"},{code:"INT",label:"Interest Rate"},{code:"SUB",label:"Subsidy"}]),_=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleMarginChanged=function(e){r.props.dispatch((0,v.setMargin)(r.props.quote,r.props.quoteField,(0,b.parseFloatOrEmpty)(e.target.value),r.props.form))},r.handleScaleChanged=function(e,t){var a=t.split("_");if(2==a.length){var n=parseInt(a[0]),o=parseInt(a[1]);r.props.dispatch((0,P.change)("dealForm",r.props.quoteField+".pcrid",n)),r.props.dispatch((0,P.change)("dealForm",r.props.quoteField+".pcrordre",o))}},r.handleProductChanged=function(e,t){r.props.dispatch((0,P.change)("dealForm","deal.tpgcode",t)),r.props.dispatch((0,P.change)("dealForm",r.props.quoteField+".pcrlibelle",null))},r.handleFindFromChanged=function(e,t){if(r.props.quote.listdealquoteprofitability&&r.props.quote.listdealquoteprofitability.length>0){var a=r.props.quoteField+".listdealquoteprofitability["+O.default.getFindFromFixedIndex(r.props.quote)+"].pprflagfixed";r.props.dispatch((0,P.change)("dealForm",a,!1));var n=r.props.quoteField+".listdealquoteprofitability["+O.default.getFindFromCodeIndex(r.props.quote,t)+"].pprflagfixed";r.props.dispatch((0,P.change)("dealForm",n,!0))}},n=a,s(r,n)}return l(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.quote.listdealquoteattribute.findIndex(function(e){return"TMP_FINDWHAT"===e.pfacode}),a=e.quote.listdealquoteattribute.findIndex(function(e){return"TMP_FINDFROM"===e.pfacode}),r=O.default.getFindWhatField(e.quote,e.quoteField),n=O.default.getFindFromField(e.quote,e.quoteField);(-1==t||this.props.accessKeys!==e.accessKeys&&e.accessKeys[r]&&e.accessKeys[r].hidden)&&this.props.dispatch(O.default.createQuoteAttributeAction(e.quote,"dealForm",e.quoteField,"TMP_FINDWHAT",{pfachaine:"PA"})),(-1==a||this.props.accessKeys!==e.accessKeys&&e.accessKeys[n]&&e.accessKeys[n].hidden)&&this.props.dispatch(O.default.createQuoteAttributeAction(e.quote,"dealForm",e.quoteField,"TMP_FINDFROM",{pfachaine:"MARG"}))}},{key:"render",value:function(){var e=this.props,t=e.quote,a=e.quoteField,r=e.readOnly,n=e.accessKeys,o=t.pcrid+"_"+t.pcrordre,s=O.default.getFindWhatField(t,a),l=(O.default.getQuoteProfitabilityField(t,a),O.default.getQuoteProfitabilityValue(t,a)),u=O.default.getQuoteProfitabilityAmountField(t,a),c=O.default.getFindFromField(t,a),p=O.default.getFindFrom(t),m=a+".pcrlibelle",y=d.default.createElement(P.Field,i({name:l},n[c],{disabled:this.props.computeLoading,component:g.default,prefix:"%",title:d.default.createElement(C.FormattedMessage,{id:"pos.quote.targetoptions.rate",defaultMessage:"Rate"})})),b=d.default.createElement(P.Field,i({name:u},n[c],{disabled:this.props.computeLoading,component:h.default,title:d.default.createElement(C.FormattedMessage,{id:"pos.quote.targetoptions.amount",defaultMessage:"Amount"})}));return"NPV"===p&&(y=b),d.default.createElement(f.default,{title:d.default.createElement(C.FormattedMessage,{id:"pos.quote.targetoptions.title",defaultMessage:"Target options"}),readOnly:r},d.default.createElement(P.Field,{name:a+".tpgcode",component:M.default,options:T.tables.TPROFILGESTION,onChange:this.handleProductChanged,disabled:this.props.computeLoading,title:d.default.createElement(C.FormattedMessage,{id:"pos.quote.targetoptions.financetype",defaultMessage:"Product"})}),d.default.createElement(P.Field,i({name:m,value:o,component:M.default},n[m],{title:d.default.createElement(C.FormattedMessage,{id:"pos.quote.targetoptions.scale.title",defaultMessage:"Scale"}),key:"scale",options:T.tables.LANPRICINGCRITERIA,refParams:{tpgcode:t.tpgcode,devcode:this.props.currencyCode,pfiinvestissement:t.pfiinvestissement},onChange:this.handleScaleChanged,disabled:this.props.computeLoading,autoSelect:!0})),d.default.createElement(P.Field,i({name:s,component:M.default,options:A},n[s],{title:d.default.createElement(C.FormattedMessage,{id:"pos.quote.targetoptions.findwhat",defaultMessage:"Find what"})})),d.default.createElement(P.Field,i({name:c,component:M.default},n[c],{disabled:this.props.computeLoading,title:d.default.createElement(C.FormattedMessage,{id:"pos.quote.targetoptions.findfrom",defaultMessage:"Find from"}),key:"ff",options:T.tables.LANPROFITABILITYCRITERION,onChange:this.handleFindFromChanged})),y)}}]),t}(d.default.Component);t.default=_},2772:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=(a(13),a(526)),f=r(p),m=a(2644),h=r(m),y=a(527),g=a(261),b=r(g),v=a(10),E=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(){r.props.dispatch((0,y.setSubSubsidy)(r.props.quote,r.props.quoteField,parseFloat(r.refs.dealer.refs.currency.getRenderedComponent().state.value),parseFloat(r.refs.manufacturer.refs.currency.getRenderedComponent().state.value)))},r.handleResetEvent=function(){r.props.dispatch((0,y.setSubSubsidy)(r.props.quote,r.props.quoteField,0,0))},r.handleClose=function(){},n=a,l(r,n)}return i(t,e),u(t,[{key:"toggle",value:function(){var e=this;this.refs.modal.toggle(),setTimeout(function(){e.refs.dealer.refs.currency.getRenderedComponent().focus()},200)}},{key:"render",value:function(){var e=this.props,t=e.quote,a=e.quoteField,r=e.currencyCode,n=(o(e,["quote","quoteField","currencyCode"]),b.default.getDealerSubsidyMntField(t,a)),s=b.default.getDealerSubsidyPctField(t,a),l=b.default.getManSubsidyMntField(t,a),i=b.default.getManSubsidyPctField(t,a),u=b.default.getAssetCost(t);return d.default.createElement(f.default,{title:d.default.createElement(v.FormattedMessage,{id:"pos.quote.subsidy.title",defaultMessage:"Subsidy"}),ref:"modal",onReset:this.handleResetEvent,onClose:this.handleClose},d.default.createElement(h.default,{onValueChange:this.handleChange,currencyCode:r,title:d.default.createElement(v.FormattedMessage,{id:"pos.quote.subsidy.dealer.title",defaultMessage:"Dealer subsidy"}),ref:"dealer",currencyValue:n,percentValue:s,baseValue:u}),d.default.createElement(h.default,{onValueChange:this.handleChange,currencyCode:r,title:d.default.createElement(v.FormattedMessage,{id:"pos.quote.subsidy.manufact.title",defaultMessage:"Manufacturer subsidy"}),ref:"manufacturer",currencyValue:l,percentValue:i,baseValue:u}))}}]),t}(d.default.Component);t.default=E},2773:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomInputDisplay=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(24),p=r(d),f=a(28),m=r(f),h=a(259),y=r(h),g=a(10),b=a(123),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(b),E=a(358),O=r(E),C=a(2638),P=a(2730),w=r(P),M=a(1102),T=r(M),F=a(43),A=a(14),_=a(44),S=r(_),N=(0,g.defineMessages)({serviceTitle:{id:"pos.deal.financialquote.scale.services.box.title",defaultMessage:"Services"},serviceRate:{id:"pos.deal.financialquote.scale.prestation.pfptx",defaultMessage:"Rate exc.tax (%)"},serviceAmount:{id:"pos.deal.financialquote.scale.prestation.amount",defaultMessage:"Amount(Excl.Tax)"},serviceName:{id:"pos.deal.financialquote.scale.services.name",defaultMessage:"Service name"}}),j=t.CustomInputDisplay=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.data},a}return l(t,e),i(t,[{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this,t=!1,a=this.props.rowData.pfptypeassiette;return this.props.metadata.customComponentMetadata.readOnly?t=!0:("pfpmt"===this.props.metadata.columnName&&a&&"ASSLIBRE"!==a&&(t=!0),"pfptx"!==this.props.metadata.columnName||a&&"ASSLIBRE"!==a||(t=!0)),c.default.createElement(S.default,{value:this.state.value,className:"form-control",onChange:function(t){return e.props.metadata.customComponentMetadata.onChange(t,e.props.rowData,e.props.metadata.columnName)},updateOnEnter:!0,readOnly:t})}}]),t}(u.Component),x=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleEditServices=function(e,t){var r=(0,p.default)(a.props.quote.listdealquoteservice),n=(0,p.default)(a.props.possibleServices);r=r.map(function(a){if(a.pfpordre===t.pfpordre){var r=n.find(function(t){return t.tprcode===e.target.value}),o=v.ACTION_MODE_MODIFICATION;return a.actionMode===v.ACTION_MODE_INSERTION&&(o=v.ACTION_MODE_INSERTION),r.merge({pfpordre:t.pfpordre,actionMode:o})}return a}),a.props.dispatch((0,A.change)("dealForm","deal.listdealquote["+a.props.quoteIndex+"].listdealquoteservice",r))},a.handleAddRow=function(e){var t=(0,p.default)(a.props.quote.listdealquoteservice),r=(0,p.default)(a.props.possibleServices[0]);r=r.merge({pfpordre:t[t.length-1].pfpordre+1,actionMode:v.ACTION_MODE_INSERTION}),t=t.concat(r),a.props.dispatch((0,A.change)("dealForm","deal.listdealquote["+a.props.quoteIndex+"].listdealquoteservice",t))},a.handleDeleteRow=function(e){var t=(0,p.default)(a.props.quote.listdealquoteservice),r=void 0;t=t.map(function(e){if(!0===e.active){if(e.actionMode!==v.ACTION_MODE_INSERTION)return e.merge({actionMode:v.ACTION_MODE_DELETION});r=e.pfpordre}return e}),r&&(t=t.filter(function(e){return e.pfpordre!==r})),a.props.dispatch((0,A.change)("dealForm","deal.listdealquote["+a.props.quoteIndex+"].listdealquoteservice",t))},a.handleRowChange=function(e,t,r){var n=a.props.quote.listdealquoteservice,o="active"===r?e.target.checked:e.target.value,s=0,l=v.ACTION_MODE_MODIFICATION;n.forEach(function(e,a){e.pfpordre===t.pfpordre&&(s=a,e.actionMode===v.ACTION_MODE_INSERTION&&(l=v.ACTION_MODE_INSERTION))});var i="deal.listdealquote["+a.props.quoteIndex+"].listdealquoteservice["+s+"].";""!==o&&(a.props.dispatch((0,A.change)("dealForm",i+r,o)),a.props.dispatch((0,A.change)("dealForm",i+"actionMode",l)),"pfpmt"===r&&a.props.dispatch((0,A.change)("dealForm",i+"pfptx",null)),"pfptx"===r&&a.props.dispatch((0,A.change)("dealForm",i+"pfpmt",null)))},a}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.accessKeys,a=e.readOnly,r=e.id,n=t[r];if(n){var o=["active","tprcode","pfpmt","pfptx"],s=[{columnName:"active",displayName:"",customComponent:C.CheckBoxDisplay,customComponentMetadata:{onChange:this.handleRowChange}},{columnName:"tprcode",displayName:this.props.intl.formatMessage(N.serviceTitle),customComponent:w.default,customComponentMetadata:{refTable:F.tables.AVTPRESTATION,allowEmptyParams:!0,handleChanged:this.handleEditServices,options:this.props.possibleServices}},{columnName:"pfpmt",displayName:this.props.intl.formatMessage(N.serviceAmount),customComponent:j,customComponentMetadata:{onChange:this.handleRowChange,readOnly:a}},{columnName:"pfptx",displayName:this.props.intl.formatMessage(N.serviceRate),customComponent:j,customComponentMetadata:{onChange:this.handleRowChange,readOnly:a}}],l=(0,T.default)("griddle",n,{defaultColumns:o,defaultColumnMetadata:s}),i=l.columns,u=l.columnMetadata;return c.default.createElement(m.default,{type:"primary",id:r,title:this.props.intl.formatMessage(N.serviceTitle),withBoder:"true"},c.default.createElement("div",{className:"asset-tab"},c.default.createElement("button",{type:"button",className:"btn btn-primary fa fa-plus",onClick:this.handleAddRow}),c.default.createElement("button",{type:"button",className:"btn btn-primary fa fa-minus",onClick:this.handleDeleteRow})),c.default.createElement(y.default,{tableClassName:"table table-hover",useGriddleStyles:!1,results:this.props.rows.filter(function(e){return e.actionMode!==v.ACTION_MODE_DELETION}),initialSort:"pfpordre",sortAscending:!1,columns:i,columnMetadata:u,useCustomPagerComponent:!0,customPagerComponent:O.default}))}}}]),t}(u.Component);t.default=(0,g.injectIntl)(x)},2774:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(10),f=a(13),m=a(526),h=r(m),y=a(17),g=a(529),b=a(2775),v=r(b),E=a(74),O=(r(E),a(359)),C=r(O),P=a(1108),w=function(e){function t(){var e,a,r,n;s(this,t);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.handlePrintClicked=function(){r.props.dealId&&r.toogleModal()},r.handleModalSave=function(){var e,t,a=r.props,n=a.dealId,s=a.dispatch,l=r.state.documentsSelected;console.log("SAVE"),(e=console).log.apply(e,["VIEW"].concat(o(l.view))),(t=console).log.apply(t,["VIEW-SAVE"].concat(o(l.viewSave)));var i=function(e){var t=window.cassioPosConfig,a=t.apis?t.apis[t.masterApi||"ksiopFront"]:"",r=a.api+"/deals/"+n+"/documents/printDocument?docid="+e.docid;console.log("Print document using uri : "+r);var o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download",""),o.click(),o.remove()},u=function(e){var t=window.cassioPosConfig,a=t.apis?t.apis[t.masterApi||"ksiopFront"]:"",r=a.api+"/deals/"+n+"/documents/printdocumentandsave?docid="+e.docid;console.log("Print document using uri : "+r);var o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download",""),o.click(),o.remove()};l.view.forEach(function(e){return i(e)}),l.viewSave.forEach(function(e){return u(e)}),l.viewSave.length>0&&s((0,g.getListDocument)(n)),r.resetState(),r.toogleModal()},r.handleModalClose=function(){r.resetState(),r.toogleModal()},r.handleDocumentsSelectChange=function(e){r.setState({documentsSelected:e})},r.handlePrintReport=function(e){r.setState({isPrintReports:!r.state.isPrintReports}),r.toogleModal()},r.setIsAnyDocSelected=function(e){r.setState({isAnyDocSelected:e})},n=a,l(r,n)}return i(t,e),u(t,[{key:"toogleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"resetState",value:function(){this.setState({documentsSelected:{view:[],viewSave:[]},isPrintReports:!1})}},{key:"componentWillMount",value:function(){this.state={documentsSelected:{view:[],viewSave:[]}}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.dealId,a=e.fetchList,r=e.fetPrintReports;t&&a(t),t&&r(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,r=(a.dealId,a.fetchList);e.dealId&&function(a){return t.props[a]!==e[a]}("dealId")&&r(e.dealId)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.dealId,r=e.loading,n=e.accessKeys,o=e.downloadedFileUrl,s=e.intl.formatMessage,l=e.reportsToPrint,i=e.documents,u=this.state,c=u.isPrintReports,p=u.isModalOpen,f=(u.isAnyDocSelected,n&&n[t]||{}),m=s(C.default.print),g=s(c?C.default.reportDescriptionTitle:C.default.printingServicesTitle),b=o||P.constants.defaultDownloadedFileUrl,E=null;return l&&(E=d.default.createElement(y.MenuItem,{eventKey:"1",onSelect:this.handlePrintReport},s(C.default.reportDescriptionTitle))),!f.hidden&&a&&d.default.createElement(y.ButtonToolbar,{className:"deal-print",disabled:f.disabled},d.default.createElement(y.SplitButton,{id:"split-button-print",onClick:this.handlePrintClicked,dropup:!0,title:m},E,d.default.createElement(y.MenuItem,{eventKey:"2",href:b},s(C.default.sendAsEmail)),d.default.createElement(y.MenuItem,{eventKey:"3"},s(C.default.eSignature))),d.default.createElement(h.default,{show:p,title:g,saveLabel:s(C.default.printingServicePrintLabel),onSave:this.handleModalSave,onClose:this.handleModalClose},d.default.createElement(v.default,{onChange:this.handleDocumentsSelectChange,setIsAnyDocSelected:this.setIsAnyDocSelected,isPrintReports:c,documents:c?l:i,loading:r,accessKeys:n})))}}]),t}(d.default.Component);w.propTypes={id:c.PropTypes.string.isRequired,accessKeys:c.PropTypes.oneOfType(c.PropTypes.array,c.PropTypes.object).isRequired,dealId:c.PropTypes.number,downloadedFileUrl:c.PropTypes.string};var M=function(e){var t=e.attachmentsReducer.documentsToPrint,a=e.attachmentsReducer.reportsToPrint;return{loading:t.loading,documents:t.list,reportsToPrint:a}},T=function(e){return{fetchList:function(t){return e((0,g.fetchListDocumentsToPrint)(t))},fetPrintReports:function(t){return e((0,g.fetchAllReports)(t))}}};t.default=(0,f.connect)(M,T)((0,p.injectIntl)(w))},2775:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(259),h=r(m),y=a(358),g=r(y),b=a(1102),v=r(b),E=a(359),O=r(E),C=a(2776),P=r(C),w=a(2777),M=r(w),T=a(2778),F=r(T),A=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"updateDocumentsList",value:function(e){var t=e?e.map(function(e,t){return{name:e.doclibelle,view:!1,"view-save":!1,index:t}}):[];this.setState({list:t})}},{key:"componentWillMount",value:function(){var e=this.props.documents;this.state={list:[]},this.updateDocumentsList(e)}},{key:"handleCheckboxChange",value:function(e,t,a,r){var n=this.props,s=n.onChange,l=n.documents,i=n.setIsAnyDocSelected,c=this.state.list,d=c.map(function(n,s){return a||s==r?u({},n,o({},e,t)):n});this.setState({list:d});var p=!1;if((d||[]).forEach(function(e){e.view&&(p=!0)})&&i(p),s){var f=function(e){return d.filter(function(t){return t[e]}).map(function(e){return l[e.index]})};s({view:f("view"),viewSave:f("view-save")})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,r=t.accessKeys,n=t.intl.formatMessage,o=t.isPrintReports,s=this.state.list,l=function(t,a,r){return e.handleCheckboxChange(a,r,!1,t)},i=function(t){return function(a){return e.handleCheckboxChange(t,a,!0)}},u=r["pos.deal.documentsPrintTables"],c=n(O.default.serviceName);o&&(c=n(O.default.reportDescription));var d=["name","view","view-save"],f=[{columnName:"name",displayName:c,customComponent:F.default,customComponentMetadata:{url:"data/print/Nst28043_S14075628.pdf"}},{columnName:"view",displayName:n(O.default.view),sortable:!1,customComponent:P.default,customComponentMetadata:{onChange:l},customHeaderComponent:M.default,customHeaderComponentProps:{onChange:i("view")}},{columnName:"view-save",displayName:n(O.default.viewAndSave),sortable:!1,customComponent:P.default,customComponentMetadata:{onChange:l},customHeaderComponent:M.default,customHeaderComponentProps:{onChange:i("view-save")}}],m=(0,v.default)("griddle",u,{defaultColumns:d,defaultColumnMetadata:f}),y=m.columns,b=m.columnMetadata,E=(m.pattern,a?"loading":n(O.default.noDocumentFound));return p.default.createElement("div",null,p.default.createElement(h.default,{gridClassName:"fullWidth",tableClassName:"table table-hover",useGriddleStyles:!1,columns:y,columnMetadata:b,results:s,resultsPerPage:5,useCustomPagerComponent:!0,customPagerComponent:g.default,noDataMessage:E}))}}]),t}(p.default.Component);A.propTypes={documents:d.PropTypes.arrayOf(d.PropTypes.object),onChange:d.PropTypes.func},A.defaultProps={documents:[]},t.default=(0,f.injectIntl)(A)},2776:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=a(17),d=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(){var e=r.props,t=e.data,a=e.rowData,n=e.metadata;(0,n.customComponentMetadata.onChange)(a.index,n.columnName,!t)},s=a,o(r,s)}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props.data;return u.default.createElement(c.Checkbox,{onChange:this.handleChange,checked:e})}}]),t}(u.default.Component);d.propTypes={data:i.PropTypes.bool,rowData:i.PropTypes.shape({index:i.PropTypes.number.isRequired}),metadata:i.PropTypes.shape({columnName:i.PropTypes.string.isRequired,customComponentMetadata:i.PropTypes.shape({onChange:i.PropTypes.func.isRequired})})},t.default=d},2777:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=a(17),d=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleCheckboxChange=function(){var e=r.props.onChange,t=r.state.checked,a=!t;e&&e(a),r.setState({checked:a})},s=a,o(r,s)}return s(t,e),l(t,[{key:"componentWillMount",value:function(){this.state={checked:!1}}},{key:"render",value:function(){var e=this.props,t=e.columnName,a=e.displayName,r=this.state.checked,n=a||t;return u.default.createElement(c.Checkbox,{checked:r,onChange:this.handleCheckboxChange},u.default.createElement("b",null,n))}}]),t}(u.default.Component);d.propTypes={columnName:i.PropTypes.string.isRequired,displayName:i.PropTypes.element,onChange:i.PropTypes.func},t.default=d},2778:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.metadata;a.customComponentMetadata.url;return u.default.createElement("span",null,t)}}]),t}(u.default.Component);c.propTypes={data:i.PropTypes.string.isRequired,metadata:i.PropTypes.shape({customComponentMetadata:i.PropTypes.shape({url:i.PropTypes.string.isRequired})})},t.default=c},2779:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(139),d=r(c),p=a(0),f=r(p),m=a(10),h=a(13),y=a(14),g=a(2712),b=r(g),v=a(28),E=r(v),O=a(2639),C=r(O),P=a(2780),w=r(P),M=a(43),T=a(208),F=r(T),A=a(261),_=r(A),S=a(74),N=(r(S),a(527)),j=a(357),x=function(e){return f.default.createElement("div",{className:"box-tools pull-right summary-tools"},f.default.createElement("button",{type:"button",className:"btn btn-box-tool",onClick:e.onClick},e.icon," Main"))},k={},R=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.summaryItems=function(e){return e.map(function(e){return f.default.createElement(w.default,{metadata:e,accessKeys:a.props.accessKeys[e.id]})})},a.calculateAmountWithTaxValue=function(e){if(e&&a.props.rateTaxValue){return e+e*a.props.rateTaxValue/100}return e},a}return i(t,e),u(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,d.default)(e,this.props)}},{key:"handleSetMainQuote",value:function(e){this.props.dispatch((0,N.setMainQuote)(e)),this.props.dispatch((0,j.setMainTpgcodeToDeal)())}},{key:"render",value:function(){var e,t=this;if(!this.props.listdealquote)return null;var a=this.props,r=a.mainfinanceamt,n=a.accessKeys,s=a.isMF,l=(a.stepIndex,a.tpgcode,this.props.selectedQuote),i=this.props.variant||k,u=this.props.asset||{},c={},d={},p=u.makid&&u.makid.toString(),h=u.varid&&u.varid.toString();void 0!==this.props.quote&&(c=this.props.quote,d=c.listdealquoteelement&&c.listdealquoteelement.length&&c.listdealquoteelement[0]||{});var y=this.props.taccode===T.VALUE_CODE_PRET?f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.monthlypay.title1",defaultMessage:"Monthly Payment"}):f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.monthlypay.title",defaultMessage:"Monthly Payment"}),g=u.options?0:void 0,v=[];u.listdealassetcomponent&&u.listdealassetcomponent.length&&(v=u.listdealassetcomponent.map(function(e){return g+=e.dmdprixunitaire*u.dpmquantity,f.default.createElement("li",{key:e.key},e.dmddesignation)}),v=f.default.createElement("ul",null,v));var O=[],P=n&&n["pos.summary.assetinfo.variant.picture"]&&n["pos.summary.assetinfo.variant.picture"].hidden,w=n&&n["pos.summary.assetinfo.sectionasset"]&&n["pos.summary.assetinfo.sectionasset"].hidden,F=n&&n["pos.summary.assetinfo.sectionother"]&&n["pos.summary.assetinfo.sectionother"].hidden,A=n&&n["pos.summary.quote.sectionquote"]&&n["pos.summary.quote.sectionquote"].hidden,S=g||u.dpmmtinvest,N=_.default.getQuoteAttribute(c,_.default.pfacodes.MONTHCHARGEDAMT.pfacode)?_.default.getQuoteAttribute(c,_.default.pfacodes.MONTHCHARGEDAMT.pfacode).pfadouble:0,j=null,R=null;P||i.imageBase64&&(O=f.default.createElement("img",{src:"data:image/jpeg;base64,"+i.imageBase64,width:"100%"}));var D=function(e){return j=r||e.pfiinvestissement,R=_.default.getPaymentMnt(e),[{id:"pos.summary.quote.flatrate",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.flatrate.title",defaultMessage:"Flat rate"}),format:"number",value:_.default.getFlatRate(e)},{id:"pos.summary.quote.payment ",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.payment.title",defaultMessage:"Payment"}),format:"currency",value:t.calculateAmountWithTaxValue(R),currencyCode:t.props.currencyCode},{id:"pos.summary.quote.documentationfees",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.documentationfees.title",defaultMessage:"Documentation fees"}),format:"currency",value:_.default.getDocumentationFeeMnt(e),currencyCode:t.props.currencyCode},{id:"pos.summary.quote.amount",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.amount.title",defaultMessage:"Amount financed"}),format:"currency",currencyCode:t.props.currencyCode,value:_.default.getAmoutTTCValue(e,t.quoteField)},{id:"pos.summary.quote.vat",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.vat.title",defaultMessage:"VAT"}),format:"currency",value:_.default.getAssetVATMnt(e),currencyCode:t.props.currencyCode},{id:"pos.summary.quote.durationprofile",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.durationprofile.title",defaultMessage:"Duration profile"}),format:"number",value:_.default.getDurationProfil(e)},{id:"pos.summary.quote.deposit",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.deposit.title",defaultMessage:"Deposit"}),format:"number",value:_.default.getDepositMnt(e)},{id:"pos.summary.quote.rv",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.rv.title",defaultMessage:"RV"}),format:"currency",value:_.default.getQuoteElement(e)?_.default.getQuoteElement(e).pfrvr:0,currencyCode:t.props.currencyCode},{id:"pos.summary.quote.commission",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.commission.title",defaultMessage:"Commission"}),format:"currency",value:_.default.getCommissionPct(e),currencyCode:t.props.currencyCode},{id:"pos.summary.quote.subsidy",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.quote.subsidy.title",defaultMessage:"Subsidy"}),format:"number",value:_.default.getSubsidyMnt(e)}]},I=this.props.listdealquote.map(function(e,a){var r=_.default.getQuoteName(e),n=f.default.createElement("i",{className:"fa fa-square-o",title:f.default.createElement(m.FormattedMessage,{id:"pos.quote.summary.selectquote",defaultMessage:"Select quote"})});return e===l&&(n=f.default.createElement("i",{className:"fa fa-check-square-o",title:f.default.createElement(m.FormattedMessage,{id:"pos.quote.summary.selectedquote",defaultMessage:"Selected quote"})})),f.default.createElement(E.default,{hidden:A,type:"panel",title:r,tools:f.default.createElement(x,{icon:n,onClick:function(){return t.handleSetMainQuote(e)}})},f.default.createElement("div",{className:"panel-collapse collapse in"},f.default.createElement("div",null,f.default.createElement("dl",{className:"dl-horizontal"},t.summaryItems(D(e))))))}),q=[{id:"pos.summary.assetinfo.type",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.assetinfo.type.title",defaultMessage:"Models & Type"}),value:p,customComponent:C.default,customComponentMetadata:{refTable:M.tables.LANMAKE}},{id:"pos.summary.assetinfo.model",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.assetinfo.model.title",defaultMessage:"Model"}),value:u.mmocode,customComponent:C.default,customComponentMetadata:{refTable:M.tables.LANMAKEMODEL,refParams:{makid:u.makid}}},{id:"pos.summary.assetinfo.finish",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.assetinfo.finish.title",defaultMessage:"Finish"}),value:u.mmtcode,customComponent:C.default,customComponentMetadata:{refTable:M.tables.LANMAKMODTRIMLEVEL,refParams:{makid:u.makid,mmocode:u.mmocode}}},{id:"pos.summary.assetinfo.variant",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.assetinfo.variant.title",defaultMessage:"Variant"}),value:h,customComponent:C.default,customComponentMetadata:{refTable:M.tables.LANVARIANT,refParams:(e={makid:u.makid,mmocode:u.mmocode,mmtcode:u.mmtcode},o(e,"mmtcode",u.mmtcode),o(e,"exclvarstatus",this.props.exclvarstatus),e),allowEmptyParams:!0}},{id:"pos.summary.assetinfo.options",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.assetinfo.options.title",defaultMessage:"Options"}),value:v},{id:"pos.summary.assetinfo.options.co2",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.options.co2.title",defaultMessage:"Co2"}),format:"number",value:u.varcarbon},{id:"pos.summary.assetinfo.options.assetprice",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.options.assetprice.title",defaultMessage:"Selling Price"}),format:"currency",value:this.calculateAmountWithTaxValue(S),currencyCode:this.props.currencyCode},{id:"pos.summary.assetinfo.options.sum",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.options.options.title",defaultMessage:"Options Amount"}),format:"currency",value:{optionsSum:g},currencyCode:this.props.currencyCode},{id:"pos.summary.assetinfo.options.kminit",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.options.kminit.title",defaultMessage:"Km (initial value)"}),format:"number"}],L=[{id:"pos.summary.offerinfo.refDeal",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.refDeal.title",defaultMessage:"Reference deal"}),value:this.props.dprnumero},{id:"pos.summary.offerinfo.product",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.product.title",defaultMessage:"Product"}),value:this.props.tpgcode,customComponent:C.default,customComponentMetadata:{refTable:M.tables.TPROFILGESTION,refParams:{tpgflagfacility:s},allowEmptyParams:!0}},{id:"pos.summary.offerinfo.pfinom",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.pfinom.title",defaultMessage:"Quote"}),value:c.pfinom},{id:"pos.summary.offerinfo.profitability",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.profitability.title",defaultMessage:"Profitability"}),format:"currency",value:c.ratepnb,currencyCode:this.props.currencyCode},{id:"pos.summary.offerinfo.duration",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.duration.title",defaultMessage:"Duration"}),format:"number",value:c.pfinbperiodes},{id:"pos.summary.offerinfo.frequency",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.frequency.title",defaultMessage:"Frequency"}),value:c.pfiperiodicite,customComponent:C.default,customComponentMetadata:{refTable:M.tables.LANTTRPARAM,refParams:{ttrnom:"PERIODE"}}},{id:"pos.summary.offerinfo.mileage",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.mileage.title",defaultMessage:"Mileage"}),format:"number",value:c.pfikilometrage},{id:"pos.summary.offerinfo.stdrate",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.stdrate.title",defaultMessage:"Standart rate"}),format:"number",value:c.pfimtpremierloyer},{id:"pos.summary.offerinfo.firstpay",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.firstpay.title",defaultMessage:"First payment"}),format:"currency",currencyCode:this.props.currencyCode},{id:"pos.summary.offerinfo.pay",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.pay.title",defaultMessage:"Payment"}),format:"currency",value:this.calculateAmountWithTaxValue(d.pfrmtloyer),currencyCode:this.props.currencyCode},{id:"pos.summary.offerinfo.monthlypay",label:y,format:"currency",value:this.calculateAmountWithTaxValue(N),currencyCode:this.props.currencyCode},{id:"pos.summary.offerinfo.commission",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.commission.title",defaultMessage:"Commission"}),format:"currency",currencyCode:this.props.currencyCode},{id:"pos.summary.offerinfo.rv",label:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.rv.title",defaultMessage:"RV"}),format:"currency",value:d.pfrvr,currencyCode:this.props.currencyCode}],V=f.default.createElement(b.default,{dealId:this.props.dosid}),B=f.default.createElement("div",null,f.default.createElement(E.default,{hidden:w,type:"panel",title:f.default.createElement(m.FormattedMessage,{id:"pos.summary.assetinfo.title",defaultMessage:"Asset information"})},f.default.createElement("div",{className:"panel-collapse collapse in"},O,f.default.createElement("div",null,f.default.createElement("dl",{className:"dl-horizontal "},this.summaryItems(q))))),f.default.createElement(E.default,{hidden:F,type:"panel",title:f.default.createElement(m.FormattedMessage,{id:"pos.summary.offerinfo.title",defaultMessage:"Offer information"})},f.default.createElement("div",{className:"panel-collapse collapse in"},f.default.createElement("div",null,f.default.createElement("dl",{className:"dl-horizontal"},this.summaryItems(L))))),I);return f.default.createElement("div",null,V,B)}},{key:"quoteField",get:function(){return"deal.listdealquote["+this.props.quoteIndex+"]"}},{key:"currentAsset",get:function(){return this.props.dealPath+"listdealasset["+this.props.assetIndex+"]"}}]),t}(f.default.Component),D=function(e,t){var a=(0,y.formValueSelector)(t.form),r=a(e,"deal.listdealquote["+t.quoteIndex+"]"),n=a(e,"deal.listdealquote"),o=a(e,"deal.listdealasset["+t.assetIndex+"]")||"",s=a(e,"deal.tpgcode"),l=a(e,"deal.taccode"),i=a(e,"deal.devcode"),u=_.default.getQuoteAttribute(r,_.default.pfacodes.MAINFINACEAMT.pfacode),c=a(e,"deal.dprnumero"),d=a(e,"deal.dosid"),p=F.default.getSelectedQuote((0,y.getFormValues)("dealForm")(e).deal),f=0;return u&&u.pfadouble&&(f=u.pfadouble),{listdealquote:n,taccode:l,mainfinanceamt:f,currencyCode:i,quote:r,asset:o,dprnumero:c,selectedQuote:p,dosid:d,tpgcode:s,dealPath:"deal.",exclvarstatus:e.authentication.user.variantexclude,stepIndex:e.newdeal.stepIndex}};t.default=(0,h.connect)(D)((0,m.injectIntl)(R))},2780:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(1130),h=a(1127),y=r(h),g=a(365),b=r(g),v=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.metadata,a=e.accessKeys;o(e,["metadata","accessKeys"]);if(t=u({},t,a),t.hidden||a&&a.hidden)return!1;var r=this.renderField(t),n=t.label;return this.context.showAccessKeys&&(n='"component": "'+t.id+'"'),p.default.createElement("div",null,p.default.createElement("dt",null,n),r)}},{key:"renderField",value:function(e){if(e.customComponent)return p.default.createElement("dd",null,p.default.createElement(e.customComponent,u({data:e.value},this.props)));if(!e.value||0===e.value)return p.default.createElement("dd",null);switch(e.format){case"number":return p.default.createElement("dd",{className:"number"},p.default.createElement(f.FormattedNumber,{value:e.value&&!(0,y.default)(e.value)&&(0,b.default)(e.value)?e.value:""}));case"currency":return p.default.createElement("dd",{className:"formatted-currency"},p.default.createElement(f.FormattedNumber,{value:e.value&&!(0,y.default)(e.value)&&(0,b.default)(e.value)?e.value:0,format:"currencyFormat",currency:e.currencyCode}));case"date":return p.default.createElement("dd",null,p.default.createElement(m.DateDisplay,{value:e.value}));default:return p.default.createElement("dd",null,e.value)}}}]),t}(p.default.Component);t.default=v,v.contextTypes={showAccessKeys:p.default.PropTypes.bool}},2781:function(e,t,a){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(13),p=a(361),f=a(536),m=r(f),h=a(539),y=function(t){function a(e){o(this,a);var t=s(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));t.handleNewItem=function(e){t.setState(function(e){var a=e.items;return a.forEach(function(e){return e.editable=!1}),a.unshift({dealid:t.props.dosid,creationdate:(new Date).getTime(),type:"TASK",subtype:"CHAT",userfirstname:"Me",description:"Note",editable:!0}),setTimeout(function(){t.refs.timeline.setFocus()},200),{items:a}})},t.handleSaveItem=function(e){t.state.items.shift(),delete e.editable,e.userfirstname=t.props.user.firstname,e.userlastname=t.props.user.lastname,e.usercode=t.props.user.uticode,t.props.dispatch((0,p.saveItem)(e))},t.handleReadItem=function(e){t.props.dispatch((0,p.readItem)(e,e.dealid))};var r=[{creationdate:new Date(2016,1,11,17,27),subtype:"sort-numeric-asc",userfirstname:"DEALER1",description:"Generate contract number"},{creationdate:new Date(2016,1,3,8,0),subtype:"bank",userfirstname:"DEALER1",description:"Transfer into Back Office"},{creationdate:new Date(2016,0,3,18,0),subtype:"user",userfirstname:"DEALER1",description:"Submit for approval",comment:"Net Advance: £ 20,000\nStandard rate: 3.2%\nPayment: 36 months, £ 2,000"},{creationdate:new Date(2016,0,3,16,0),subtype:"file",userfirstname:"Mina Lee",description:"uploaded new document",documentURL:"http://www.google.fr",previewURL:"img/types/pdf.png"},{creationdate:new Date(2015,11,22,14,0),subtype:"money",userfirstname:"DEALER1",description:"Promote to deal"},{creationdate:new Date(2015,11,2,10,0),subtype:"money",userfirstname:"DEALER1",description:"New opportunity"}];return t.state={items:e.useMockTimeline?r:[]},t}return l(a,t),i(a,[{key:"componentWillReceiveProps",value:function(e){(this.props.dosid!==e.dosid||this.props.dosid&&!this.timeLineInterval)&&(this.startTimeLinePoll(e.dosid),e.dosid||this.props.dispatch((0,p.getTimeLine)()))}},{key:"componentWillMount",value:function(){var e=this.props.dosid;this.props.dispatch((0,p.getTimeLine)(e))}},{key:"startTimeLinePoll",value:function(e){var t=this;this.stopTimeLinePoll(),e&&(this.props.dispatch((0,p.getTimeLine)(e)),this.timeLineInterval=setInterval(function(){return t.props.dispatch((0,p.getTimeLine)(e))},3e4))}},{key:"stopTimeLinePoll",value:function(){this.timeLineInterval&&(clearInterval(this.timeLineInterval),this.timeLineInterval=void 0)}},{key:"componentWillUnmount",value:function(){this.stopTimeLinePoll()}}]),i(a,[{key:"render",value:function(){var t=e.union(this.props.timeLine,this.state.items);this.props.dosid;return c.default.createElement(m.default,{items:t,onNewItem:this.handleNewItem,onSaveNewItem:this.handleSaveItem,onReadItem:this.handleReadItem,ref:"timeline"})}}]),a}(c.default.Component),g=function(){var e=(0,h.timelineSelector)();return function(t,a){return{user:t.authentication.user,timeLine:e(t.timeline.deal,a),useMockTimeline:t.authentication.options.timelinedemomode}}};t.default=(0,d.connect)(g)(y)}).call(t,a(364))},2818:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.validateProspect=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(13),m=a(141),h=a(14),y=a(43),g=a(28),b=r(g),v=a(63),E=r(v),O=a(1110),C=r(O),P=a(1129),w=r(P),M=a(10),T=a(121),F=a(357),A=a(24),_=r(A),S=a(54),N=a(89),j=r(N),x=a(55),k=r(x),R=a(208),D=r(R),I=a(1121),q=r(I),L=a(538),V=r(L),B=(0,M.defineMessages)({suppliernameTitle:{id:"pos.deal.prospect.name.title",defaultMessage:"Name"},customernameTitle:{id:"pos.deal.prospect.id.title",defaultMessage:"Customer"},dealTypePlaceHolder:{id:"pos.deal.prospect.dealtype.placeholder",defaultMessage:"Select a deal type"},assetUsagePlaceHolder:{id:"pos.deal.prospect.assetusage.placeholder",defaultMessage:"Select an asset usage"},titlePlaceHolder:{id:"pos.deal.prospect.titretype.placeholder",defaultMessage:"Select title"},cspCategoryPlaceHolder:{id:"pos.deal.prospect.cspcategory.placeholder",defaultMessage:"Select CSP category"},fiscalStatusPlaceHolder:{id:"pos.deal.prospect.fiscalstatus.placeholder",defaultMessage:"Select fiscal status"},companyTypePlaceHolder:{id:"pos.deal.prospect.companytype.placeholder",defaultMessage:"Select company type"},apePlaceHolder:{id:"pos.deal.prospect.ape.placeholder",defaultMessage:"Select an APE"},lastNamePlaceHolder:{id:"pos.deal.prospect.lastname.placeholder",defaultMessage:"Select last name"},sirenPlaceHolder:{id:"pos.deal.prospect.siren.placeholder",defaultMessage:"Select siren"}}),K=(w.default.components.ActorSearchPopup,t.validateProspect=function(e,t,a){var r=e.actors,n=e.deal;return n.dprassetusage||(a=(0,j.default)(a,"deal.dprassetusage",S.GlobalMessages.fieldRequire)),n.dealextrainfo&&n.dealextrainfo.dcodealtype||(a=(0,j.default)(a,"deal.dealextrainfo.dcodealtype",S.GlobalMessages.fieldRequire)),r&&r.forEach(function(e,t){var r=e.actor;if(r){var n="actors["+t+"].actor",o=function(e){r[e]||(a=(0,j.default)(a,n+"."+e,S.GlobalMessages.fieldRequire))},s=function(){o("apaprenom"),o("apatitre"),o("apanommarital")},l=function(){o("actsiret"),o("nafcode"),o("actnom"),o("actdtimmatriculation")};o("acttype"),o("cjucode");[{type:"TEL",validationFunction:T.isValidTelephoneNo,errorMessage:S.GlobalMessages.invalidMobileNo},{type:"NET",validationFunction:T.isValidEmailAddress,errorMessage:S.GlobalMessages.invalidEmail}].forEach(function(e){if(r.listactortelecom){var t=k.default.getTelecomFieldErrorIndex(r.listactortelecom,e.type);if(-1!=t){var o=r.listactortelecom[t].atenum,s=function(e){return a=(0,j.default)(a,n+".listactortelecom["+t+"].atenum",e)};o?e.validationFunction(o)||s(e.errorMessage):s(S.GlobalMessages.fieldRequire)}}}),r.acttype==x.CUSTOMER_TYPE_INDIVIDUAL?(s(),function(){r.apadtnaiss?(0,T.isValidAge)(r.apadtnaiss,18)||(a=(0,j.default)(a,n+".apadtnaiss",S.GlobalMessages.InvalidAge)):a=(0,j.default)(a,n+".apadtnaiss",S.GlobalMessages.fieldRequire)}()):r.acttype==x.CUSTOMER_TYPE_CORPORATE?l():(s(),l())}}),a},function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleClearCustomer=function(){var e=r.props.actor.actor.acttype;r.props.dispatch((0,h.arrayRemove)(r.props.form,"actors",r.props.actorIndex)),r.props.dispatch((0,F.appendNewActor)(r.props.rolcode)).then(function(t){r.props.dispatch((0,h.change)(r.props.form,"deal.dealextrainfo.dcoclienttype",e)),r.props.dispatch((0,h.change)(r.props.form,"actors["+r.props.actorIndex+"].actor.acttype",e))})},r.handleCoCustomerSelection=function(e){e.target.checked||-1===r.props.coCustomerIndex||r.props.dispatch((0,h.arrayRemove)(r.props.form,"actors",r.props.coCustomerIndex)),r.props.dispatch((0,h.change)(r.props.form,"hasCoborower",e.target.checked))},r.handleActorSearch=function(){r.refs.actorPop.toggle()},r.handleCustomerTypeChange=function(e,t){r.props.dispatch((0,h.change)(r.props.form,"deal.dealextrainfo.dcoclienttype",t)),r.props.dispatch((0,h.change)(r.props.form,r.currentCoProspect+".acttype",t))},r.handleActorSelected=function(e){r.props.actor.actor.actcode!==e.actcode&&(0,m.bindActionCreators)(F.fetchActor,r.props.dispatch)(e.actid,r.props.rolcode,{skipAssignment:!0}).then(function(e){e=k.default.addMissingTelecomFields(e),e.listactorrole.find(function(e){return e.rolcode==r.props.rolcode})||(e=_.default.setIn(e,["listactorrole",e.listactorrole.length],{actionMode:"+",rolcode:r.props.rolcode})),r.props.dispatch((0,h.change)(r.props.form,r.currentProspect,e))})},r.handleAssetUsageChanged=function(e,t){r.props.dispatch((0,h.change)(r.props.form,"deal.dprassetusage",t))},r.hanleDealtypeChanged=function(e,t){r.props.dispatch((0,h.change)(r.props.form,"deal.dealextrainfo.dcodealtype",t))},n=a,l(r,n)}return i(t,e),c(t,[{key:"componentWillMount",value:function(){this.props.actor.rolcode||this.props.dispatch((0,F.appendNewActor)(this.props.rolcode)),this.props.dispatch((0,y.fetchReferenceTableWithParams)(y.tables.LANTTRPARAM,{ttrnom:"DEALTYPEPOS",tpgcode:this.props.tpgcode}))}},{key:"render",value:function(){var e=this.props,t=e.actor,a=e.intl,r=(e.prospectIndex,e.accessKeys),n=e.tpgcode,s=e.dprassetusage,l=e.readOnly,i=o(e,["actor","intl","prospectIndex","accessKeys","tpgcode","dprassetusage","readOnly"]);t=t.actor||{};var c=a.formatMessage,d=this.props.readOnly?"read-only":"",f=null,m=p.default.createElement(M.FormattedMessage,{id:"pos.deal.client.prospectinfo.cocustomer.title",defaultMessage:"Presence of Co - Customer"});f=p.default.createElement("div",{className:"col-md-6"},p.default.createElement(h.Field,u({name:"hasCoborower",component:C.default,checked:-1!=this.props.coCustomerIndex,onChange:this.handleCoCustomerSelection},r.hasCoborower,{title:m})));var g=p.default.createElement(b.default,{type:"primary",withBoder:"true",id:"pos.deal.dealextrainfo"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-md-6"},p.default.createElement(h.Field,u({name:"deal.dealextrainfo.dcodealtype",component:E.default,onChange:this.hanleDealtypeChanged,allowEmptyParams:!0,refTable:y.tables.LANTTRPARAM,refParams:{ttrnom:"DEALTYPE",tpgcode:this.props.tpgcode},placeholder:c(B.dealTypePlaceHolder),title:p.default.createElement(M.FormattedMessage,{id:"pos.deal.prospectinfo.dealtype.title",defaultMessage:"Deal type"})},r["deal.dealextrainfo.dcodealtype"],{readOnly:l}))),p.default.createElement("div",{className:"col-md-6"},p.default.createElement(h.Field,u({name:"deal.dprassetusage",component:E.default,onChange:this.handleAssetUsageChanged,options:y.tables.LANTUSPARAM,refParams:{tusnom:"ASSETUSAGE",tpgcode:this.props.tpgcode},placeholder:c(B.assetUsagePlaceHolder),title:p.default.createElement(M.FormattedMessage,{id:"pos.deal.prospectinfo.assetusage.title",defaultMessage:"Asset usage"})},r["deal.dprassetusage"],{readOnly:l})))));return!this.props.hasCoborower||this.props.rolcode!=x.COCLIEN&&this.props.rolcode!=x.COBORROWER||(f=null,g=null),p.default.createElement("div",{className:"customer "+d},g,p.default.createElement(b.default,{type:"primary"},p.default.createElement(q.default,{id:"pos.deal.actor.prospect.info",actorExp:this.currentProspect,actor:t,accessKeys:r,form:"dealForm",onTypeChange:this.handleCustomerTypeChange,onActorSelected:this.handleActorSelected,searchable:!0,dprassetusage:s,tpgcode:n,actorSearchFilters:i.actorSearchFilters,rolcode:i.rolcode,rolcodes:i.searchFilterRolcodes,onClearInput:this.handleClearCustomer,readOnly:l},p.default.createElement(V.default,{id:"pos.deal.actor.propect.telecom",actorExp:this.currentProspect,accessKeys:r,form:"dealForm",listActorTelecom:t.listactortelecom,readOnly:l}),f)))}},{key:"currentProspect",get:function(){return"actors["+this.props.prospectIndex+"].actor"}},{key:"currentCoProspect",get:function(){return"actors["+this.props.coCustomerIndex+"].actor"}}]),t}(p.default.Component)),U=function(e,t){var a=(0,h.formValueSelector)(t.form),r=a(e,"actors"),n=r.findIndex(function(e){return e.rolcode===t.rolcode});n=-1===n?t.actorIndex:n;var o=n,s=r.findIndex(function(e){return e.rolcode==x.COCLIEN||e.rolcode==x.COBORROWER}),l=a(e,"deal.tpgcode")||"TOUT",i=a(e,"deal.dprassetusage"),u=a(e,"deal.dealextrainfo.dcodealtype"),c=D.default.getDealTpgtype(a(e,"deal.listdealattribute")),d={};c&&(d=c===R.RESIDUAL_PRODUCT?{actroles:[R.APPORT]}:{});var p=a(e,"actors["+o+"]")||{};return{readOnly:e.newdeal.readOnly,hasCoborower:a(e,"hasCoborower")||-1!==s,tpgcode:l,dprassetusage:i,actorIndex:n,actor:p,actors:r,prospectIndex:o,coCustomerIndex:s,actorSearchFilters:d,tpgtype:c,dcodealtype:u}};t.default=(0,f.connect)(U)((0,M.injectIntl)(K))},2819:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=t.validateCustomer=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(13),m=a(14),h=a(10);a(1119);var y=a(2924),g=r(y),b=a(2643),v=r(b),E=a(357),O=a(89),C=r(O),P=a(54),w=a(121),M=a(55),T=r(M),F=a(2821),A=r(F),_=a(1110),S=r(_),N=a(2925),j=r(N),x=a(2926),k=r(x),R=a(88),D=r(R),I=a(28),q=r(I),L=a(43),V=a(208),B=r(V),K="dealForm",U=(t.validateCustomer=function(e,t,a){var r=e.actors;if(r)for(var n=0;n<r.length;n++)!function(t){var n=r[t].actor,o="actors["+t+"].actor",s=function(e){n[e]||(a=(0,C.default)(a,o+"."+e,P.GlobalMessages.fieldRequire))},l=function(){s("apaprenom"),s("apatitre"),s("apanommarital"),2==n.apasexe&&s("apanompatronymique"),n.apadtnaiss?(0,w.isValidAge)(n.apadtnaiss,18)||(a=(0,C.default)(a,o+".apadtnaiss",P.GlobalMessages.InvalidAge)):a=(0,C.default)(a,o+".apadtnaiss",P.GlobalMessages.fieldRequire),n.listactorjobhistory&&n.listactorjobhistory[0]&&(n.listactorjobhistory[0].ajhbuscareercode||n.actdtexthiring||n.apaemployeur)&&(s("actdtexthiring"),s("apaemployeur"),n.listactorjobhistory[0].ajhbuscareercode||(a=(0,C.default)(a,o+".listactorjobhistory[0].ajhbuscareercode",P.GlobalMessages.fieldRequire)))},i=function(){s("actsiret"),s("nafcode"),s("actdtimmatriculation"),s("actnom")};if(s("acttype"),s("cjucode"),n.acttype==M.CUSTOMER_TYPE_INDIVIDUAL?l():n.acttype==M.CUSTOMER_TYPE_CORPORATE?i():(l(),i()),n.listactortelecom){var u=T.default.getTelecomFieldErrorIndex(n.listactortelecom,"NET");-1!=u&&(n.listactortelecom[u].atenum?(0,w.isValidEmailAddress)(n.listactortelecom[u].atenum)||(a=(0,C.default)(a,o+".listactortelecom["+u+"].atenum",P.GlobalMessages.invalidEmail)):a=(0,C.default)(a,o+".listactortelecom["+u+"].atenum",P.GlobalMessages.fieldRequire));var c=T.default.getTelecomFieldErrorIndex(n.listactortelecom,"TEL");-1!=c&&(n.listactortelecom[c].atenum?(0,w.isValidTelephoneNo)(n.listactortelecom[c].atenum)||(a=(0,C.default)(a,o+".listactortelecom["+c+"].atenum",P.GlobalMessages.invalidMobileNo)):a=(0,C.default)(a,o+".listactortelecom["+c+"].atenum",P.GlobalMessages.fieldRequire));var d=T.default.getTelecomFieldErrorIndex(n.listactortelecom,"MOB");-1!=d&&(n.listactortelecom[d].atenum?(0,w.isValidTelephoneNo)(n.listactortelecom[d].atenum)||(a=(0,C.default)(a,o+".listactortelecom["+d+"].atenum",P.GlobalMessages.invalidPhoneNo)):a=(0,C.default)(a,o+".listactortelecom["+d+"].atenum",P.GlobalMessages.fieldRequire))}if(n.listactorbankaccount&&(e.changeIban&&n.listactorbankaccount.length>1&&!n.listactorbankaccount[1].iban&&(a=(0,C.default)(a,"actors["+t+"].actor.listactorbankaccount[1].iban",P.GlobalMessages.fieldRequire)),n.listactorbankaccount.length>0)){var p=n.listactorbankaccount.length-1;n.listactorbankaccount[p]&&n.listactorbankaccount[p].iban&&n.listactorbankaccount[p].bgucodeinterbancaire&&n.listactorbankaccount[p].ribintitule&&!n.listactorbankaccount[p].aridtdeb&&(a=(0,C.default)(a,"actors["+t+"].actor.listactorbankaccount["+p+"].aridtdeb",P.GlobalMessages.fieldRequire))}}(n);return a},t.Client=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleTabChange=function(e){r.props.dispatch((0,E.clientTabChange)(e))},r.handleSameAddressChecked=function(e){e.target.checked?r.props.dispatch((0,m.change)(K,r.currentCoActor+".listactoraddress",r.props.actor.listactoraddress)):r.props.dispatch((0,m.arrayRemoveAll)(K,r.currentCoActor+".listactoraddress"))},r.handleSameBankChecked=function(e){r.props.dispatch((0,m.arrayRemoveAll)(K,r.currentCoActor+".listactorbankaccount")),e.target.checked&&r.props.actor.listactorbankaccount.forEach(function(e){r.props.dispatch((0,m.arrayPush)(K,r.currentCoActor+".listactorbankaccount",e))})},r.handleCoContractantChecked=function(e){e.target.checked&&-1==r.props.coCustomerIndex?r.props.dispatch((0,E.appendNewActor)(r.props.coCustomerRolcode)):r.props.dispatch((0,m.arrayRemove)("dealForm","actors",r.props.coCustomerIndex))},n=a,l(r,n)}return i(t,e),c(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,L.fetchReferenceTableWithParams)(L.tables.LANTTRPARAM,{ttrnom:"DEALTYPEPOS",tpgcode:this.props.tpgcode}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.accessKeys,r=t.actor;o(t,["accessKeys","actor"]);if(!r)return p.default.createElement(q.default,{type:"primary"},p.default.createElement(D.default,null));var n=p.default.createElement(m.Field,u({name:"hasCoborower",component:S.default,checked:-1!=this.props.coCustomerIndex,onChange:this.handleCoContractantChecked},a.hasCoborower,{title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.client.customerinfo.cocustomer.title",defaultMessage:"Presence of co-customer"})})),s=[{key:"customerinformation",title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.step.client.step.customerinformation",defaultMessage:"Customer information"}),body:p.default.createElement(k.default,{actorExp:this.currentActor,actor:this.props.actor,accessKeys:a,form:K,tpgcode:this.props.tpgcode}),active:!1},{key:"contactreferences",title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.step.client.step.contactreferences",defaultMessage:"Contact references"}),body:p.default.createElement(g.default,{form:K,actorExp:this.currentActor,actorIndex:this.props.customerIndex,actor:this.props.actor,accessKeys:a}),active:!1}];this.props.acttype!==M.CUSTOMER_TYPE_CORPORATE&&s.push({key:"revenuecharges",title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.step.client.step.revenuecharges",defaultMessage:"Revenues charges"}),body:p.default.createElement(A.default,{form:K,id:"pos.deal.actor.client.income",actorExp:this.currentActor,actorIndex:this.props.customerIndex,accessKeys:a}),active:!1}),-1!=this.props.coCustomerIndex&&s.push({key:"contractant",title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.step.client.step.contractant",defaultMessage:"Co-Contractant"}),body:p.default.createElement(j.default,{actorExp:this.currentCoActor,onSameAddressClick:this.handleSameAddressChecked,onSameBankClick:this.handleSameBankChecked,actor:this.props.coactor,accessKeys:a,form:K,hasCoborower:this.props.hasCoborower,coCustomerIndex:this.props.coCustomerIndex,borrowerId:this.props.actor.actid,tpgcode:this.props.tpgcode,tpgtype:this.props.tpgtype}),active:!1});var l=s.find(function(t){return t.key===e.props.clientTabKey});return l&&(l.active=!0),p.default.createElement(v.default,{tabs:s,handleTabChange:this.handleTabChange},n)}},{key:"currentActor",get:function(){return"actors["+this.props.customerIndex+"].actor"}},{key:"currentCoActor",get:function(){return"actors["+this.props.coCustomerIndex+"].actor"}}]),t}(d.Component)),H=(0,m.formValueSelector)("dealForm"),Q=function(e,t){var a=H(e,"actors"),r=a.findIndex(function(e){return e.rolcode==M.CLIENT||e.rolcode==M.BORROWER}),n=a.findIndex(function(e){return e.rolcode==M.COCLIEN||e.rolcode==M.COBORROWER}),o=null;-1!=n&&(o=a[n].actor);var s=a[r]?a[r].rolcode:void 0,l=s==M.CLIENT?M.COCLIEN:M.COBORROWER,i=H(e,"hasCoborower")||-1!==n,u=B.default.getDealTpgtype(H(e,"deal.listdealattribute"));return{clientTabKey:e.newdeal.clientTabKey,acttype:H(e,"actors["+r+"].actor.acttype"),actor:a&&a[r]&&a[r].actor,coactor:o,customerIndex:r,coCustomerIndex:n,customerRolcode:s,coCustomerRolcode:l,hasCoborower:i,tpgtype:u}};t.default=(0,f.connect)(Q)(U)},2820:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(14),m=a(44),h=r(m),y=a(10),g=a(28),b=r(g),v=a(65),E=a(109),O=r(E),C=a(143),P=a(1110),w=r(P),M=a(13),T=a(123),F=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleIbanChanged=function(e){1==r.props.actor.listactorbankaccount.length&&r.props.dispatch((0,f.change)(r.props.form,r.props.actorExp+".listactorbankaccount[0].paycode",r.props.actor.paycode))},r.handleIbanAccountSelection=function(e){e.target.checked?(r.props.dispatch((0,f.arrayPush)(r.props.form,r.props.actorExp+".listactorbankaccount",{paycode:r.props.actor.paycode})),r.props.dispatch((0,f.change)(r.props.form,r.props.actorExp+".listactorbankaccount[0].aridtremplace",(new Date).getTime())),r.props.dispatch((0,f.change)(r.props.form,r.props.actorExp+".listactorbankaccount[0].actionMode",T.ACTION_MODE_MODIFICATION))):(r.props.dispatch((0,f.arrayPop)(r.props.form,r.props.actorExp+".listactorbankaccount")),r.props.dispatch((0,f.change)(r.props.form,r.props.actorExp+".listactorbankaccount[0].aridtremplace",null)),r.props.dispatch((0,f.change)(r.props.form,r.props.actorExp+".listactorbankaccount[0].actionMode",null))),r.props.dispatch((0,f.change)(r.props.form,"changeIban",e.target.checked))},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.accessKeys,a=e.actor,r=e.actorExp,n=e.hasSameBank,s=o(e,["accessKeys","actor","actorExp","hasSameBank"]),l=!!(a&&a.listactorbankaccount&&1==a.listactorbankaccount.length&&a.listactorbankaccount[0].ribid),i=!(!l||!a.listactorbankaccount[0].actid),c=a&&a.listactorbankaccount&&a.listactorbankaccount.length>0?a.listactorbankaccount.length-1:0,d=a&&a.listactorbankaccount&&(0==a.listactorbankaccount.length||1==a.listactorbankaccount.length&&!a.listactorbankaccount[0].ribid)?"iban-section":null,m=r+".listactorbankaccount["+c+"]",y=this.props.intl.formatMessage,g=null;return s.onSameBankClick&&(g=p.default.createElement(f.Field,{name:"hasSameBank",component:w.default,onChange:s.onSameBankClick,style:{float:"left",marginRight:"5px"},title:y(C.messages.sameBankTitle)})),p.default.createElement(b.default,{type:"none",id:s.id},p.default.createElement(v.Row,null,p.default.createElement(v.Col,{md:6},g),p.default.createElement(v.Col,{md:6,className:d},p.default.createElement(f.Field,{name:"changeIban",component:w.default,onChange:this.handleIbanAccountSelection,title:"Change IBAN account"}))),p.default.createElement(f.FormSection,{name:m,component:v.Row},p.default.createElement(v.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(f.Field,u({name:"iban",component:h.default,disabled:l||n,onChange:this.handleIbanChanged,title:y(C.messages.ibanTitle)},t[m+".iban"]))),p.default.createElement(v.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(f.Field,u({name:"bgucodeinterbancaire",component:h.default,disabled:l||n,title:y(C.messages.bicTitle)},t[m+".bgucodeinterbancaire"]))),p.default.createElement(v.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(f.Field,u({name:"ribintitule",component:h.default,disabled:n,title:y(C.messages.accountholderTitle)},t[m+".ribintitule"]))),p.default.createElement(v.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(f.Field,u({name:"aridtdeb",component:O.default,disabled:i||n,title:y(C.messages.accountOpeningDateTitle)},t[m+".aridtdeb"])))))}}]),t}(d.Component);F.propTypes={actorExp:d.PropTypes.string},F.defaultProps={actorExp:"actor"};var A=function(e,t){return{hasSameBank:(0,f.formValueSelector)(t.form)(e,"hasSameBank")}};t.default=(0,M.connect)(A)((0,y.injectIntl)(F))},2821:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(13),m=a(10),h=a(14),y=a(219),g=a(63),b=r(g),v=a(43),E=a(28),O=r(E),C=a(356),P=r(C),w=a(65),M=a(109),T=r(M),F=a(55),A=a(44),_=r(A),S=a(143),N=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleJobHistoryDateChange=function(e,t){r.props.dispatch((0,y.setJHDateFormActor)(r.props.form,r.currentActor,t))},r.handleJobHistoryEmplyerChange=function(e,t){r.props.dispatch((0,y.setJHEmployerFormActor)(r.props.form,r.currentActor,t))},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.accessKeys,a=e.devcode,r=o(e,["accessKeys","devcode"]),n=null;return this.props.acttype===F.CUSTOMER_TYPE_INDIVIDUAL&&(n=p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorContactInformation+".acoqualite",component:b.default,options:v.tables.LANTUSPARAM,refParams:{tusnom:"QUALITE"},placeholder:this.props.intl.formatMessage(S.messages.jobDescriptionPlaceHolder),title:this.props.intl.formatMessage(S.messages.jobDescriptionTitle)},t[this.currentActorContactInformation+".acoqualite"])))),p.default.createElement(O.default,{type:"none",id:r.id},p.default.createElement(w.Row,null,p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActor+".apasitfam",component:b.default,options:v.tables.LANTUSPARAM,refParams:{tusnom:"SITFAM"},placeholder:this.props.intl.formatMessage(S.messages.familystatusPlaceHolder),title:this.props.intl.formatMessage(S.messages.familyStatusTitle)},t[this.currentActor+".apasitfam"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActor+".apanbenfant",component:_.default,title:this.props.intl.formatMessage(S.messages.numberOfChildrenTitle)},t[this.currentActor+".apanbenfant"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActor+".apapancard",component:_.default,title:this.props.intl.formatMessage(S.messages.socialSecurityNumberTitle)},t[this.currentActor+".apapancard"])))),p.default.createElement(w.Row,null,n,p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActor+".listactorjobhistory[0].ajhbuscareercode",component:b.default,options:v.tables.LANTUSPARAM,refParams:{tusnom:"CAREERCODE"},placeholder:this.props.intl.formatMessage(S.messages.contractOfEmploymentPlaceHolder),title:this.props.intl.formatMessage(S.messages.contractOfEmploymentTitle)},t[this.currentActor+".listactorjobhistory[0].ajhbuscareercode"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActor+".actdtexthiring",component:T.default,placeholder:this.props.intl.formatMessage(S.messages.employedDatePlaceHolder),onChange:this.handleJobHistoryDateChange,title:this.props.intl.formatMessage(S.messages.hireDateTitle)},t[this.currentActor+".actdtexthiring"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActor+".apaemployeur",component:_.default,onChange:this.handleJobHistoryEmplyerChange,title:this.props.intl.formatMessage(S.messages.employerTitle)},t[this.currentActor+".listactorjobhistory[0].apaemployeur"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdemployeraddress1",component:_.default,title:this.props.intl.formatMessage(S.messages.addressLine1Title)},t[this.currentActorCharges+".afdemployeraddress1"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdemployeraddress2",component:_.default,title:this.props.intl.formatMessage(S.messages.addressLine2Title)},t[this.currentActorCharges+".afdemployeraddress2"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".paycodeemployer",component:b.default,options:v.tables.PAYS,placeholder:this.props.intl.formatMessage(S.messages.countryPlaceHolder),title:this.props.intl.formatMessage(S.messages.countryTitle)},t[this.currentActorCharges+".paycodeemployer"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdemployerpostalcode",component:_.default,title:this.props.intl.formatMessage(S.messages.postCodeTitle)},t[this.currentActorCharges+".afdemployerpostalcode"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdemployercity",component:_.default,title:this.props.intl.formatMessage(S.messages.cityTitle)},t[this.currentActorCharges+".afdemployercity"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdemployerphone",component:_.default,title:this.props.intl.formatMessage(S.messages.telePhoneTitle)},t[this.currentActorCharges+".afdemployerphone"])))),p.default.createElement(w.Row,null,p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdmtwageincome",component:P.default,currecyCode:a,title:this.props.intl.formatMessage(S.messages.netMonthlyIncomeTitle)},t[this.currentActorCharges+".afdmtwageincome"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdmtotherincome",component:P.default,currecyCode:a,title:this.props.intl.formatMessage(S.messages.otherIncomeTitle)},t[this.currentActorCharges+".afdmtotherincome"])))),p.default.createElement(w.Row,null,p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdmtrentpaid",component:P.default,currecyCode:a,title:this.props.intl.formatMessage(S.messages.propertyCostsTitle)},t[this.currentActorCharges+".afdmtrentpaid"]))),p.default.createElement(w.Col,{lg:3,md:3,xs:6,sm:3},p.default.createElement(h.Field,u({name:this.currentActorCharges+".afdmtotherpaid",component:P.default,currecyCode:a,title:this.props.intl.formatMessage(S.messages.otherReimbursementsTitle)},t[this.currentActorCharges+".afdmtotherpaid"])))))}},{key:"currentActor",get:function(){return this.props.actorExp}},{key:"currentActorCharges",get:function(){return this.currentActor+".listactorfinancialdata[0]"}},{key:"currentActorContactInformation",get:function(){return this.currentActor+".listactorcontact[0]"}}]),t}(p.default.Component);N.propTypes={actorExp:d.PropTypes.string,form:d.PropTypes.string},N.defaultProps={actorExp:"actor",form:"actor"};var j=function(e,t){var a=(0,h.formValueSelector)(t.form);return{acttype:a(e,"actors["+t.actorIndex+"].actor.acttype"),devcode:a(e,"deal.devcode")}};t.default=(0,f.connect)(j)((0,m.injectIntl)(N))},2902:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function s(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.StepContainer=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),p=a(0),f=r(p),m=a(13),h=a(10),y=a(1122),g=a(14),b=a(1114),v=r(b),E=a(2727),O=r(E),C=a(2903),P=r(C),w=a(2905),M=r(w),T=a(2763),F=r(T),A=a(2701),_=r(A),S=a(357),N=a(2641),j=r(N);a(1119);var x=a(140),k=a(17),R=a(2923),D=r(R),I=a(2818),q=r(I),L=a(2819),V=r(L),B=a(211),K=r(B),U=a(2928),H=r(U),Q=a(2929),G=r(Q),W=a(2774),Y=r(W),z=a(88),J=r(z),X=a(261),Z=a(55),$=a(262),ee=a(2930),te=r(ee),ae=v.default.components.CustomerContainer,re=[],ne={path:x.ACTOR},oe=t.StepContainer=function(e){function t(){var e,a,r,n;l(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.handleStepChange=function(e,t){r.props.dispatch((0,S.StepChange)(e,t))},n=a,i(r,n)}return u(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.submitting,a=e.pristine,r=e.accessKeys,n=this.props.attachments!==e.attachments,o=r&&r["pos.deal.stepcontainer.save"]||{},s=r&&r["pos.deal.stepcontainer.reset"]||{};this.resetButton=!s.hidden&&[f.default.createElement("button",{type:"button",key:"reset",className:"btn btn-danger",onClick:this.props.onReset,disabled:a||t},f.default.createElement(h.FormattedMessage,{id:"pos.deal.btn.reset",defaultMessage:"Reset"}))],this.saveButton=!o.hidden&&f.default.createElement("button",{key:"save",type:"submit",className:"btn btn-primary",disabled:t||a&&!n,onClick:this.props.onSave},f.default.createElement(h.FormattedMessage,{id:"pos.deal.btn.save",defaultMessage:"Save"}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.submitFailed,r=t.errors,n=t.currentFields,l=t.forceStep,i=(t.stepIndex,s(t,["submitFailed","errors","currentFields","forceStep","stepIndex"]));if(a&&n&&e.currentFields!==n){var u=Object.values(n).map(function(e){return e.name}).filter(function(e){return(0,K.default)(r,e)});u.length?(i.touch.apply(i,o(u)),l&&(0,$.focusFirstError)(r)):l&&i.dispatch((0,S.handleFaultyStep)(r,"dealForm"))}}},{key:"render",value:function(){if(this.props.dealLoading)return f.default.createElement(J.default,null);var e=this.props,t=e.stepIndex,a=e.handleSubmit,r=e.accessKeys,n=e.taccode,o=e.isDisabled,l=s(e,["stepIndex","handleSubmit","accessKeys","taccode","isDisabled"]),i=re,u=r&&r["pos.deal.stepcontainer.events"]||{};if(this.props.events&&this.props.events.length){var d=this.props.events[0],p=this.props.onEvent,m=this.props.events.map(function(e,t){if(e.tmffonction!=d.tmffonction)return f.default.createElement(k.MenuItem,{key:t,onSelect:a(function(t){return p(t,e)})},e.eventlabel)});this.props.events.length>1?i=!u.hidden&&f.default.createElement("div",{className:"col-md-12"},f.default.createElement(k.SplitButton,{bsSize:"small",bsStyle:"primary",title:d.eventlabel||"Submit for approval",id:"split-button-basic-primary",disabled:o,onClick:a(function(e){return p(e,d)})},m)):1===this.props.events.length&&this.props.defaultworkflow&&""!=this.props.defaultworkflow&&!this.props.dosid?i=!u.hidden&&f.default.createElement("div",{className:"action-label",key:"eventsGroup"},f.default.createElement("a",{onClick:a(function(e){return p(e,d)}),key:d.tmffonction,className:"btn btn-primary"},d.eventlabel)):1===this.props.events.length&&this.props.dosid&&(i=!u.hidden&&f.default.createElement("div",{className:"action-label",key:"eventsGroup"},f.default.createElement("a",{onClick:a(function(e){return p(e,d)}),key:d.tmffonction,className:"btn btn-primary"},d.eventlabel)))}var g=this.props.currentJalcode?f.default.createElement(j.default,{code:this.props.currentJalcode,wrapper:"span",type:"button",disabled:"true"}):re,b=re;this.props.dealLoading||(b=[f.default.createElement(q.default,{accessKeys:r,route:ne,form:"dealForm",rolcode:this.props.customerRolcode?this.props.customerRolcode:Z.CLIENT,key:"deal-ProspectContainer",boxTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.prospectbox.title",defaultMessage:"Prospect information"}),actorIndex:0,searchTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.customersearch.title",defaultMessage:"Search customer"}),newTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.newprospect.title",defaultMessage:"New Prospect"})})],1==this.props.hasCoborower&&b.push(f.default.createElement(q.default,{accessKeys:r,route:ne,form:"dealForm",rolcode:this.props.coCustomerRolcode?this.props.coCustomerRolcode:Z.COCLIEN,key:"deal-CoBorrowerContainer",boxTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.coborrowerbox.title",defaultMessage:"Co-Borrower Information"}),actorIndex:1,searchTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.customersearch.title",defaultMessage:"Search customer"}),newTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.newcustomer.title",defaultMessage:"New customer"})})));var v=re;this.props.dealLoading||(v=[f.default.createElement(ae,{accessKeys:r,route:ne,form:"dealForm",rolcode:this.props.customerRolcode?this.props.customerRolcode:Z.CLIENT,key:"deal-BorrowerContainer",boxTitle:"Borrower Info",searchTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.customersearch.title",defaultMessage:"Search customer"}),newTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.newcustomer.title",defaultMessage:"New customer"})})],this.props.tpgcode&&"PRET"==n&&v.push(f.default.createElement(ae,{accessKeys:r,route:ne,form:"dealForm",optional:!0,rolcode:this.props.coCustomerRolcode?this.props.coCustomerRolcode:Z.COBORROWER,key:"deal-CoBorrowerContainer",boxTitle:"Co-Borrower Info",searchTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.customersearch.title",defaultMessage:"Search customer"}),newTitle:f.default.createElement(h.FormattedMessage,{id:"pos.deal.newcustomer.title",defaultMessage:"New customer"})})));var E=re,C=re;this.props.dealLoading||(E=[f.default.createElement(G.default,{accessKeys:r,form:"dealForm",key:"deal-FinancialProductContainer",boxTitle:"Financial Product"}),f.default.createElement(H.default,{accessKeys:r,route:ne,form:"dealForm",rolcode:this.props.customerRolcode?this.props.customerRolcode:"PRET"==n?Z.BORROWER:Z.CLIENT,key:"deal-ClientVatContainer",boxTitle:"Client"})],C=[f.default.createElement(te.default,{accessKeys:r,form:"dealForm",key:"deal-FinancialProductContainer",boxTitle:"Financial Product",rolcode:this.props.customerRolcode?this.props.customerRolcode:"PRET"==n?Z.BORROWER:Z.CLIENT})]);var w=[];this.props.isMf?w.push({id:"pos.newdeal.step.generalinfomf",order:1,default:!0,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.generalinfo",defaultMessage:"General Information",tagName:"div"}),component:C},{id:"pos.newdeal.step.attachmf",order:2,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.attach",defaultMessage:"Attachments",tagName:"div"}),component:f.default.createElement(_.default,{form:"dealForm",accessKeys:r}),hidden:!this.props.dosid}):w.push({id:"pos.newdeal.step.generalinfo",order:1,default:!1,hidden:!0,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.generalinfo",defaultMessage:"General Information",tagName:"div"}),component:E},{id:"pos.newdeal.step.customer",order:1,default:!0,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.customer",defaultMessage:"Customer",tagName:"div"}),component:v},{id:"pos.newdeal.step.assets",default:!0,hidden:!1,order:2,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.assets",defaultMessage:"Assets",tagName:"div"}),component:f.default.createElement(O.default,{quoteCardinality:this.props.quoteCardinality,accessKeys:r,form:"dealForm"})},{id:"pos.newdeal.step.masterFacilityAssets",default:!1,hidden:!0,order:2,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.masterFacilityAssets",defaultMessage:"Assets",tagName:"div"}),component:f.default.createElement(P.default,{quoteCardinality:this.props.quoteCardinality,accessKeys:r,form:"dealForm",dispatch:l.dispatch})},{id:"pos.newdeal.step.quotes",default:!0,order:3,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.quote",defaultMessage:"Financial quote",tagName:"div"}),component:f.default.createElement(M.default,{quoteCardinality:this.props.quoteCardinality,options:this.props.options,accessKeys:r,form:"dealForm"})},{id:"pos.newdeal.step.quotes2",default:!1,hidden:!0,order:3,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.quote2",defaultMessage:"Financial quote",tagName:"div"}),component:f.default.createElement(F.default,{quoteCardinality:this.props.quoteCardinality,accessKeys:r,form:"dealForm"})},{id:"pos.newdeal.step.prospect",order:2,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.prospect",defaultMessage:"Prospect",tagName:"div"}),component:b,hidden:!0},{id:"pos.newdeal.step.client",order:3,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.client",defaultMessage:"Client",tagName:"div"}),component:f.default.createElement(V.default,{tpgcode:this.props.tpgcode,accessKeys:r}),hidden:!0},{id:"pos.newdeal.step.attach",order:4,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.attach",defaultMessage:"Attachments",tagName:"div"}),component:f.default.createElement(_.default,{form:"dealForm",accessKeys:r}),hidden:!0});var T=null;return this.props.flagSelfpayment&&(T="col-md-6",w.push({default:!0,order:5,name:f.default.createElement(h.FormattedMessage,{id:"pos.deal.step.selfpayment",defaultMessage:"Self payment",tagName:"div"}),component:f.default.createElement(D.default,c({form:"dealForm",accessKeys:r},this.props))})),f.default.createElement(y.Multistep,{steps:w,status:g,actionbar:i,actionbarClass:T,step:t,custom:this.saveButton,reset:this.resetButton,rightZone:[f.default.createElement(Y.default,{key:"print-toolbar",dealId:this.props.dosid,id:"pos.deal.stepcontainer.printtoolbar",accessKeys:r})],onStepChange:this.handleStepChange,accessKeys:r,id:"pos.deal.multistep"})}}]),t}(p.Component),se=(0,g.formValueSelector)("dealForm"),le=function(e,t){var a=(0,g.getFormSyncErrors)("dealForm")(e),r=e.form.dealForm?e.form.dealForm.registeredFields:re,n=se(e,"deal.taccode"),o=se(e,"deal"),s=X.QUOTE_CARDINALITY_MANY;t.accessKeys["pos.newdeal.container"]&&t.accessKeys["pos.newdeal.container"].quoteCardinality&&(s=t.accessKeys["pos.newdeal.container"].quoteCardinality);var l=se(e,"actors"),i=l.findIndex(function(e){return e.rolcode==Z.COCLIEN||e.rolcode==Z.COBORROWER});return{dealLoading:e.newdeal.dealLoading||0===Object.keys(o).length,isLoading:e.loader.isLoading,dosid:e.newdeal.formValues.deal.dosid,isMf:e.newdeal.isMF,stepIndex:e.newdeal.stepIndex,forceStep:e.newdeal.forceStep,onEdit:e.newdeal.onEdit,currentJalcode:se(e,"deal.jalcode"),isDisabled:Boolean(e.authentication.user.restrictedaccess),tpgcode:se(e,"deal.tpgcode"),events:e.newdeal.events,hasCoborower:se(e,"hasCoborower")||-1!==i,taccode:n,errors:a,currentFields:r,quoteCardinality:s,defaultworkflow:e.authentication.user.defaultworkflow,customerRolcode:e.newdeal.customerRolcode,coCustomerRolcode:e.newdeal.coCustomerRolcode,attachments:e.attachmentsReducer.documents,flagSelfpayment:e.newdeal.flagSelfpayment,options:(t.accessKeys||{}).options}};t.default=(0,m.connect)(le)(oe)},2903:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(14),f=a(10),m=a(263),h=a(17),y=a(3),g=r(y),b=a(13),v=a(123),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),O=a(2728),C=r(O),P=a(88),w=r(P),M=a(2904),T=r(M),F=a(1151),A=r(F),_=(0,A.default)("App:Pos:MasterFacilityAssetsContainer"),S=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleAssetVariantSelected=function(e,t){var r=e.target.getAttribute("id");if(_("handleAssetVariantSelected","variant=",t,"event=",e,"targetId",r),"optionsIcon"!==r&&"optionsText"!==r){var n=a.props,o=n.form,s=n.listdealasset,l=n.quoteCardinality,i=n.removeAsset,u=n.changeAssetIndex,c=n.accessKeys,d=n.assetDetailChanged,p=n.appendNewMFAsset,f=s.findIndex(function(e){return e.varid===t.varid&&e.actionMode!==E.ACTION_MODE_DELETION});if(f&&-1===f)p(o,a.currentAsset(s.length),t).then(d(o,l,1,t.vprmt,c.options));else{i(o,f,"deal.listdealasset",l,c.options);var m=s.findIndex(function(e){return null!==e.varid&&e.actionMode!==E.ACTION_MODE_DELETION});-1!==m&&u(m)}}},a.handleAddOptions=function(e,t){_("handleAddOptions","varid=",t,"event=",e);var r=a.props,n=r.listdealasset,o=r.changeAssetIndex,s=r.getOptionsList,l=a.refs.optionsSearchPopup;o(n.findIndex(function(e){return e.varid===t&&e.actionMode!==E.ACTION_MODE_DELETION})),s(t),l.toggle()},a.dispatch=e.dispatch,a}return l(t,e),u(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.form,a=e.listdealasset,r=e.quoteCardinality,n=e.accessKeys,o=e.change,s=e.removeAsset;a&&a.length>0&&null==a[0].varid&&(o(this.props.form,this.currentAsset(0)+".actionMode",v.ACTION_MODE_INSERTION),s(t,0,"deal.listdealasset",r,n.options))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.dosidautorisation,r=t.getVariantsFromDealId,n=e.dosidautorisation,o=e.variantsMF;e.variantsMFLoading||!n||0!=o.length&&a===n||r(n)}},{key:"currentAsset",value:function(e){return this.props.dealPath+"listdealasset["+e+"]"}},{key:"render",value:function(){var e=this,t=this.props,a=t.variantsMFLoading,r=t.form,n=t.listdealasset,o=t.varOptions,s=t.variantsMF,l=t.selectedOptionsList,u=t.accessKeys,c=t.intl.formatMessage;if(a)return d.default.createElement(w.default,null);if(s){var p=s.map(function(t,a){var s=null,p=n.findIndex(function(e){return _("asset.varid",e.varid,"variant.varid",t.varid,"asset.actionMode",e.actionMode),e.varid===t.varid&&e.actionMode!==E.ACTION_MODE_DELETION});_("assetIndex",p);var m=d.default.createElement("i",{id:"checkbox",className:"fa fa-square-o fa-2x"}),y=null;void 0!==p&&p>=0&&(s=d.default.createElement(C.default,{ref:"optionsSearchPopup",varOptions:o,selectedOptionsList:l,popupTitle:c(T.default.searchOptions),componentName:null,assetIndex:p,formatMessage:c,listdealassetcomponent:n[p].listdealassetcomponent,dispatch:e.dispatch,currentAsset:e.currentAsset(p),form:r,accessKeys:u}),m=d.default.createElement("i",{id:"checkbox",className:"fa fa-check-square-o fa-2x"}),y=d.default.createElement("i",{id:"optionsIcon",onClick:function(a){return e.handleAddOptions(a,t.varid)},className:"fa fa-list thumbnail-option"},d.default.createElement("span",{id:"optionsText",className:"options-text"}," "+c(T.default.options))));var g=[];t.imageBase64&&(g="data:image/png;base64,"+t.imageBase64);var b=[];return function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];b.push([d.default.createElement("span",null,c(a)),d.default.createElement("dd",{className:r?"number":""},r?!isNaN(t)&&d.default.createElement(f.FormattedNumber,i({value:t},n?{format:"currencyFormat"}:{})):t)])}("VARIANT",t.vprmt,T.default.vprmt,!0),d.default.createElement(h.Col,{className:"thumbnail-container",md:4,lg:4,key:a},d.default.createElement(h.Thumbnail,{src:g,onClick:function(a){return e.handleAssetVariantSelected(a,t)}},d.default.createElement(h.Row,null,d.default.createElement(h.Col,{xs:9,sm:10,md:7,lg:7,className:"title"},d.default.createElement("b",null,t.varlibelle)),d.default.createElement(h.Col,{xs:3,sm:2,md:5,lg:5,className:"options"},y,s)),d.default.createElement(h.Row,null,d.default.createElement(h.Col,{sm:12,md:12,lg:12},b)),m))});return d.default.createElement(h.Row,{key:"cars",className:(0,g.default)("quotes-car-list")},p)}}}]),t}(d.default.Component),N=(0,p.formValueSelector)("dealForm"),j=function(e,t){var a=e.newdeal,r=e.newdeal.variantsMF,n=e.newdeal.variantsMFLoading;return{listdealasset:N(e,"deal.listdealasset"),dosidautorisation:N(e,"deal.dealextrainfo.dosidautorisation"),variantsMF:r,assetIndex:a.assetIndex,dealPath:"deal.",variantsMFLoading:n,dosid:N(e,"deal.dosid"),varOptions:a.optionsList}},x={getVariantsFromDealId:m.getVariantsFromDealId,setCarVariant:m.setCarVariant,change:p.change,appendNewMFAsset:m.appendNewMFAsset,removeAsset:m.removeAsset,changeAssetIndex:m.changeAssetIndex,getOptionsList:m.getOptionsList,assetDetailChanged:m.assetDetailChanged};t.default=(0,b.connect)(j,x)((0,f.injectIntl)(S))},2904:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),n=(0,r.defineMessages)({vprmt:{id:"pos.summary.options.assetprice.title",defaultMessage:"Selling price"},searchOptions:{id:"pos.deal.assets.options.popup",defaultMessage:"Search options"},options:{id:"pos.deal.assets.options.label",defaultMessage:"Options"}});t.default=n},2905:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(13),m=a(14),h=a(43),y=a(10),g=a(64),b=a(63),v=r(b),E=a(109),O=r(E),C=a(2906),P=r(C),w=a(2914),M=r(w),T=a(2915),F=r(T),A=a(2917),_=r(A),S=a(2918),N=r(S),j=a(2699),x=r(j),k=a(2919),R=r(k),D=a(1101),I=r(D),q=a(261),L=r(q),V=a(208),B=r(V),K=a(2920),U=r(K),H=a(2921),Q=r(H),G=a(2922),W=r(G),Y=a(357),z=a(263),J=a(123),X=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(J),Z=a(1113),$=a(2731),ee=r($),te=a(2647),ae=r(te),re=a(2732),ne=r(re),oe=a(65),se=a(2671),le=r(se),ie=a(527),ue=a(24),ce=r(ue),de=a(55),pe=[],fe=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleNewQuote=function(){a.props.dispatch((0,ie.addQuote)(a.props.form,a.props.quoteCardinality)),a.props.quoteCardinality==q.QUOTE_CARDINALITY_ONE&&a.props.dispatch(appendNewAsset(a.props.form))},a.handleRemoveQuote=function(){a.props.dispatch((0,Y.removeQuote)(a.props.form,a.props.quoteIndex,"deal.listdealquote")),a.props.quoteCardinality==q.QUOTE_CARDINALITY_ONE&&a.props.dispatch(removeAsset(a.props.form,a.props.quoteIndex,"deal.listdealasset",a.props.quoteCardinality,a.props.accessKeys.options))},a.handleScaleChanged=function(e){var t=(0,ce.default)(a.props.quote),r=e.code||e.target.value,n=r.split("_");if(2==n.length){var o=parseInt(n[0]),s=parseInt(n[1]);t=t.merge({pcrid:o,pcrordre:s}),t=t.update("listdealquoteattribute",function(e){return e.map(function(e){return e.pfacode===L.default.pfacodes.MAINFINACEAMT.pfacode?e.merge({pfadouble:t.pfiinvestissement}):e})}),a.dispatch((0,Y.setQuoteFieldsModifiedFlag)(!0)),a.dispatch((0,m.change)("dealForm","deal.listdealquote["+a.props.quoteIndex+"].listdealquoteelement[0].pfrmtloyer",0)),a.dispatch((0,m.change)(a.props.form,a.currentQuote,t))}},a.handleProductChanged=function(e){e.customFields.defaultduration?a.dispatch((0,m.change)(a.props.form,a.currentQuote+".pfinbperiodes",e.customFields.defaultduration)):a.dispatch((0,m.change)(a.props.form,a.currentQuote+".pfinbperiodes",null));var t=pe;e.customFields&&(a.dispatch((0,m.change)(a.props.form,"deal.taccode",e.customFields.taccode)),t=e.customFields.rolcode===de.CLIENT?{customerRolcode:de.CLIENT,removeCustomerRolcode:de.BORROWER,coCustomerRolcode:de.COCLIEN,removeCoCustomerRolcode:de.COBORROWER}:{customerRolcode:de.BORROWER,removeCustomerRolcode:de.CLIENT,coCustomerRolcode:de.COBORROWER,removeCoCustomerRolcode:de.COCLIEN},a.dispatch((0,Y.setCustomerRolecodes)(t.customerRolcode,t.coCustomerRolcode)),a.props.actors&&1==a.props.actors.length?a.props.dispatch((0,Y.updateCustomerRoles)(a.props.form,a.props.actors,t.customerRolcode,t.removeCustomerRolcode)):a.props.actors&&a.props.actors.length>1&&(a.props.dispatch((0,Y.updateCustomerRoles)(a.props.form,a.props.actors,t.customerRolcode,t.removeCustomerRolcode)),a.props.dispatch((0,Y.updateCustomerRoles)(a.props.form,a.props.actors,t.coCustomerRolcode,t.removeCoCustomerRolcode)))),a.dispatch((0,Y.initQuoteByTpgcode)(a.props.form,a.props.quote.dpfordre))},a.handleCurrencyChanged=function(e){a.props.dispatch((0,m.change)("dealForm","deal.devcode",e))},a.handleButtonScheduleClick=function(e){a.refs.scheduledPaymentProfilePopup.toggle()},a.handleCopyQuote=function(){var e=a.props.listdealquote.length+1,t=(0,ce.default)(a.props.listdealquote[a.props.quoteIndex]);t=X.default.updateActionMode(t,X.ACTION_MODE_INSERTION),t=t.set("dpfordre",e),t=t.set("pfinom","Quote "+e),a.dispatch((0,m.arrayPush)(a.props.form,"deal.listdealquote",t)),a.dispatch((0,Y.changeQuoteIndex)(e-1))},a.listSectionsBox=[{id:"pos.deal.financialquote.downpaymentbox.container",customComponent:R.default},{id:"pos.deal.financialquote.residualvaluebox.container",customComponent:_.default},{id:"pos.deal.financialquote.rentalamountbox.container",customComponent:N.default},{id:"pos.deal.financialquote.mileagebox.container",customComponent:F.default},{id:"pos.deal.financialquote.PaymentsBox.container",customComponent:P.default},{id:"pos.deal.financialquote.profitabilitybox.container",customComponent:M.default}],a.dispatch=e.dispatch,a}return i(t,e),c(t,[{key:"componentWillMount",value:function(){this.dispatch((0,h.fetchReferenceTableWithParams)(h.tables.CURRENCY,{tpgcode:this.props.tpgcode}));var e=this.props.accessKeys["pos.deal.financialquote.services.table"];if(e&&!e.hidden&&(this.dispatch((0,Y.getPossibleFinancialCommissions)(this.props.quoteIndex)),this.dispatch((0,Y.getPossibleFinancialServices)(this.props.quoteIndex))),this.props.values&&this.props.values.dosid&&this.props.dispatch((0,ie.calculateTotalMileage)(this.props.quote.pfinbperiodes,this.props.quote.pfikilometrage)),this.props.deal&&this.dispatch((0,Y.fetchListProductFamily)(this.props.deal)),this.props.deal.dosid)this.dispatch((0,Y.initialiseSelectedServices)(this.props.listdealquoteservice)),this.dispatch((0,Y.getEligibleServices)(this.props.quoteIndex));else{var t=new Date;this.props.dispatch((0,m.change)(this.props.form,B.default.getEndDateField(this.props.deal),t))}}},{key:"componentDidMount",value:function(){(0,Z.searchFirstPaymentAndCreateIt)(this.props.quote),this.props.dispatch((0,Z.calculateAmoutInclTaxCommission)(this.props.quote,""+this.currentQuote))}},{key:"componentWillReceiveProps",value:function(e){e.quoteIndex===this.props.quoteIndex&&this.checkPayment(e.quote,this.props.quote),e.tpgcode!==this.props.tpgcode&&this.props.dispatch((0,h.fetchReferenceTableWithParams)(h.tables.CURRENCY,{tpgcode:e.tpgcode}))}},{key:"fieldAsChange",value:function(e,t,a,r,n){var o=null,s=null;if(n?(o=a(e,n,r),s=a(t,n,r)):r?(o=a(e,r),s=a(t,r)):(o=a(e),s=a(t)),n){if(o)return o!=s;if(s)return!0}return o&&o!=s}},{key:"checkPayment",value:function(e,t){var a=this,r=this.fieldAsChange(e,t,L.default.getScaleId,null,null),n=this.fieldAsChange(e,t,L.default.getScaleOrder,null,null),o=this.fieldAsChange(e,t,L.default.getQuoteElementValue,"pfrvr");if(r||n){this.dispatch((0,Y.computeSchedule)(e.dpfordre,function(e){a.props.dispatch((0,Y.setQuoteFieldsModifiedFlag)(!1)),a.dispatch((0,Y.getEligibleServices)(a.props.quoteIndex)),a.dispatch((0,Y.initialiseSelectedServices)(a.props.listdealquoteservice))},function(e){}));var s=this.props.accessKeys["pos.deal.financialquote.services.table"];s&&!s.hidden&&(this.dispatch((0,Y.getPossibleFinancialCommissions)(this.props.quoteIndex)),this.dispatch((0,Y.getPossibleFinancialServices)(this.props.quoteIndex)))}else{var l=this.fieldAsChange(e,t,L.default.getKilometrage),i=this.fieldAsChange(e,t,L.default.getFirtPayment),c=this.fieldAsChange(e,t,L.default.getQuotePaymentValue,"pfvpct",q.TYPE_VERSEMENT_DOWNPAYMENTARR),d=this.fieldAsChange(e,t,L.default.getQuotePaymentValue,"pfvpecordre",q.TYPE_VERSEMENT_DOWNPAYMENT),p=this.fieldAsChange(e,t,L.default.getPfimtdeposit),f=this.fieldAsChange(e,t,L.default.getQuotePaymentValue,"pfvmtdiscount",q.TYPE_VERSEMENT_NORMAL),h=this.fieldAsChange(e,t,L.default.getProfile),y=this.fieldAsChange(e,t,L.default.getMargin),b=this.fieldAsChange(e,t,L.default.getPfiinvestissement),v=!!this.props.options&&this.props.options.realtimecalc;e.pfinbperiodes&&(b||l||i||o||c||y||p||f||d||h&&t.pcrid)&&(v?this.dispatch((0,Y.computePayment)(e.dpfordre,function(e){g.notify.show(a.props.intl.formatMessage(le.default.paymentSuccess)+" "+a.props.intl.formatNumber(e,u({},a.props.intl.formats.number.currencyFormat,{currency:a.props.currencyCode})),"success")},function(e){g.notify.show(a.props.intl.formatMessage(le.default.paymentError),"warning")})):(this.dispatch((0,Y.setQuoteFieldsModifiedFlag)(!0)),this.props.quoteFieldsModified||this.dispatch((0,m.change)(this.props.form,this.currentQuote+".listdealquoteelement[0].pfrmtloyer",0))))}}},{key:"handleChangeQuote",value:function(e){this.props.quoteCardinality==q.QUOTE_CARDINALITY_ONE&&this.dispatch((0,z.changeAssetIndex)(e)),this.dispatch((0,Y.changeQuoteIndex)(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.quote,r=t.readOnly,n=t.accessKeys,s=(t.dpimttc,t.listdealquote),l=t.tpgcode,i=t.pcrid,c=t.currencyCode,d=(t.rateTaxValue,t.startDate),f=t.endDateField,h=t.durationdropdown,g=t.asset,b=t.computepaymentscheduleLoading,E=(o(t,["quote","readOnly","accessKeys","dpimttc","listdealquote","tpgcode","pcrid","currencyCode","rateTaxValue","startDate","endDateField","durationdropdown","asset","computepaymentscheduleLoading"]),a.pcrid+"_"+a.pcrordre),C=r?"read-only":"",P=pe,w=p.default.createElement(ne.default,{ref:"scheduledPaymentProfilePopup",quote:a,quoteField:this.currentQuote,startDate:d,currencyCode:c,form:this.props.form,dispatch:this.props.dispatch,accessKeys:this.props.accessKeys,enableRest:!1,enableSave:!1,isLoading:b}),M=pe;if(a&&a.listdealquotecommission&&a.listdealquotecommission.length&&(M=p.default.createElement(U.default,u({rows:a.listdealquotecommission,possibleCommissions:this.props.possibleCommissions,id:"pos.deal.financialquote.commission.table",accessKeys:this.props.accessKeys},this.props))),s.length>0){var T=0,F=s.map(function(t,a){var r=e.props.quoteIndex===a&&s.length>0?"btn btn-primary":"btn";if(X.ACTION_MODE_DELETION!==t.actionMode)return T++,p.default.createElement("button",{className:r,type:"button",onClick:function(){return e.handleChangeQuote(a)}},T)});P=p.default.createElement("div",{className:"asset-tab"},F,p.default.createElement("button",{className:"btn btn-primary fa fa-plus",type:"button",disabled:r,onClick:function(){return e.handleNewQuote()},title:this.props.intl.formatMessage(le.default.addQuoteTitle)}),p.default.createElement("button",{className:"btn btn-primary fa fa-minus",type:"button",disabled:r,onClick:function(){return e.handleRemoveQuote()},title:this.props.intl.formatMessage(le.default.removeQuoteTitle)}),p.default.createElement("button",{className:"btn btn-primary fa fa-clone",type:"button",onClick:this.handleCopyQuote,title:this.props.intl.formatMessage(le.default.copyQuoteLabel)}))}var A=this.props.values.listdealattribute?this.props.values.listdealattribute.find(function(e){return e.datcode===V.TPGTYPE}):{},_=(A&&A.datstringdata,this.props.values.dprassetusage,this.props.actors&&this.props.actors[0]&&this.props.actors[0].actor&&this.props.actors[0].actor.acttype,!n["pos.quote.paymentprofile.popup"]||!n["pos.quote.paymentprofile.popup"].hidden),S=L.default.getQuoteAttribute(a,L.default.pfacodes.MAINFINACEAMT.pfacode);S&&S.pfadouble&&S.pfadouble;var N=1==h?v.default:I.default;return p.default.createElement("div",{className:"financialQuote "+C},p.default.createElement("label",null,p.default.createElement(y.FormattedMessage,{id:"pos.quote.listquote",defaultMessage:"Quote"})),w,P,p.default.createElement(ae.default,{type:"primary",hasPopup:_,onButtonClick:this.handleButtonScheduleClick,specificIcon:"fa fa-calendar",title:p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.title",defaultMessage:"Financial data"}),withBoder:"true"},p.default.createElement(oe.Row,null,p.default.createElement(oe.Col,{md:6},p.default.createElement(m.Field,{name:this.currentQuote+".pfiinvestissement",component:ee.default,title:p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.amount.title",defaultMessage:"Amount (tax exc.)"}),currencyCode:c,onCurrencyChange:this.handleCurrencyChanged,currenciesList:this.props.currenciesList,tpgcode:l,readOnly:r,onChange:this.handlePfiinvestisementChanged})),p.default.createElement(oe.Col,{md:6},p.default.createElement(m.Field,u({name:L.default.getAmoutTTCField(this.props.quote,this.currentQuote),component:ee.default,title:p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.amounttc.title",defaultMessage:"Amount (tax incl.)"}),key:"amountTaxIncl",currencyCode:c},n["pos.deal.quote.dpimttc"],{disabled:!0,readOnly:r})))),p.default.createElement("div",{className:"row mb-4"},p.default.createElement(oe.Col,{md:3},p.default.createElement(m.Field,u({name:this.currentQuote+".tpgcode",component:v.default,currencyCode:c,title:p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.product.title",defaultMessage:"Financial product"}),options:this.props.listProductFamily,key:"quote-financialProduct-field",onValueChange:this.handleProductChanged},n[this.currentQuote+".tpgcode"],{placeholder:this.props.intl.formatMessage(le.default.quoteproductPlaceholder),readOnly:r}))),p.default.createElement(oe.Col,{md:3},p.default.createElement(x.default,{value:E,title:p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.scale.title",defaultMessage:"Scale"}),key:"scale",placeholder:this.props.intl.formatMessage(le.default.quotescalePlaceholder),taccode:this.props.values.taccode,tpgcode:this.props.tpgcode,deal:this.props.deal,devcode:this.props.values.devcode,dpfordre:this.props.quote.dpfordre,pfiinvestissement:this.props.quote.pfiinvestissement,pfinbperiod:this.props.quote.pfinbperiodes,dprreseaucial:this.props.values.dprreseaucial,onChange:this.handleScaleChanged,readOnly:r})),p.default.createElement(oe.Col,{md:6},p.default.createElement(Q.default,u({currentQuote:this.currentQuote,messages:le.default,currencyCode:c,durationType:N,tpgcode:l,pcrid:i||0,deal:this.props.deal,dpmdtpremiercirculation:g&&g.dpmdtpremiercirculation?g.dpmdtpremiercirculation:0},this.props,{id:"pos.deal.financialquote.durationbox.container"})),p.default.createElement(oe.Col,{md:6},p.default.createElement(m.Field,u({key:"pos.deal.listdealkeydate.dtFin",name:f,component:O.default,disable:!0},n["pos.deal.listdealkeydate.dtFin"],{title:p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.dtFin.title",defaultMessage:"End Date"}),readOnly:r}))))),p.default.createElement(W.default,u({metadatas:this.listSectionsBox,refField:this.currentQuote},this.props))),M)}},{key:"currentQuote",get:function(){return"deal.listdealquote["+this.props.quoteIndex+"]"}}]),t}(p.default.Component),me=(0,m.formValueSelector)("dealForm"),he=function(e,t){var a=e.newdeal.isMF,r=e.newdeal.showServicesModal,n=e.newdeal.quoteIndex,o=me(e,"deal.listdealquote["+n+"]"),s=me(e,"deal.listdealasset["+n+"]"),l=me(e,"deal"),i=(0,m.getFormValues)(t.form)(e).actors,u=o.tpgcode||"TOUT",c=t.accessKeys.options,d=o&&o.pcrid?o.pcrid:0,p=o.pfinbperiodes,f=(e.newdeal.formValues.deal,e.newdeal.listProductFamily),y={},g={};return t.quoteCardinality==q.QUOTE_CARDINALITY_ONE?(y=s?s.dpmmtttc:{},g=s?s.dpmmtinvest:{}):(y=B.default.getTotalAssetAmountWithVat(l,c.manageassetquantity),g=B.default.getTotalAssetAmount(l,c.manageassetquantity)),{computeLoading:e.newdeal.computeLoading,computepaymentscheduleLoading:e.newdeal.computepaymentscheduleLoading,listdealattribute:me(e,"deal.listdealattribute"),quoteIndex:n,tpgcode:u,pcrid:d,pfiNbPeriodes:p,currencyCode:l.devcode,quote:o,readOnly:e.newdeal.readOnly,rateTaxValue:e.newdeal.rateTaxValue?e.newdeal.rateTaxValue:0,dpimttc:y,dpmmtinvest:g,values:l,isMF:a,showServicesModal:r,listdealquote:me(e,"deal.listdealquote"),customerRolcode:e.newdeal.customerRolcode,coCustomerRolcode:e.newdeal.coCustomerRolcode,actors:i,dosid:l.dosid,napcode:s&&s.napcode||null,currenciesList:(0,h.getReferenceTable)(e,h.tables.CURRENCY,{tpgcode:u}).data,possibleServices:e.newdeal.possibleServices,initialPossibleServices:e.newdeal.initialPossibleServices,initialSavedServices:e.newdeal.formValues.deal.listdealquote[n]?e.newdeal.formValues.deal.listdealquote[n].listdealquoteservice:[],listdealquoteservice:o?o.listdealquoteservice:[],servicesValue:e.newdeal.mounthlyservice,dealServices:e.newdeal.dealServices,eligibleServices:e.newdeal.eligibleServices,eligibleServicesSelected:e.newdeal.eligibleServicesSelected,pricingServices:e.newdeal.pricingServices,subsidyServices:e.newdeal.subsidyServices,possibleCommissions:e.newdeal.possibleCommissions,summaryVisibility:e.newdeal.summaryVisibility,quoteFieldsModified:e.newdeal.quoteFieldsModified,selectedservices:e.newdeal.selectedservices,durationdropdown:e.authentication.user.durationdropdown,endDateField:B.default.getEndDateField(l),asset:s,deal:l,options:c,listProductFamily:f,pfiapprocheflux:o.pfiapprocheflux,duration:o.pfinbperiodes}};t.default=(0,f.connect)(he)((0,y.injectIntl)(fe))},2906:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(14),h=a(2644),y=r(h),g=a(357),b=a(356),v=r(b),E=a(1113),O=a(261),C=r(O),P=a(43),w=a(63),M=r(w),T=a(64),F=a(2671),A=r(F),_=a(2907),S=r(_),N=a(65),j=a(2908),x=r(j),k=a(17),R=a(2911),D=r(R),I=a(2912),q=r(I),L=a(2913),V=r(L),B=null,K=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleDisplayServices=function(){r.props.dispatch((0,g.setShowServicesModal)(!0))},r.handleDisplaySubventions=function(){r.refs.subventionsPopup.toggle()},r.handleDiscountChanged=function(e,t){r.props.dispatch((0,E.setDiscountMnt)(r.props.quote,r.props.quoteField,t))},r.handleComputePayment=function(){r.props.dispatch((0,g.computeSchedule)(function(e){r.props.dispatch((0,g.setQuoteFieldsModifiedFlag)(!1))},function(e){T.notify.show(r.props.intl.formatMessage(A.default.computePaymentError),"error")}))},r.handelPaymentMethodChanged=function(e){var t=r.currentQuote+".listdealquoteelement[0].listdealquoteelementstep";r.props.dispatch((0,m.arrayRemoveAll)(r.props.form,t,B))},n=a,l(r,n)}return i(t,e),c(t,[{key:"componentWillMount",value:function(){this.initServices()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.deal.listdealquote[this.props.quoteIndex||0].listdealquoteservice;e.deal.listdealquote[this.props.quoteIndex||0].listdealquoteservice===t&&this.initServices()}},{key:"initServices",value:function(){var e=0,t=this.props.deal.listdealquote[this.props.quoteIndex||0].listdealquoteservice;t&&(t.forEach(function(t){t.pfpmt&&(e+=t.pfpmt)}),this.props.dispatch((0,g.setMounthlyServices)(e)))}},{key:"renderSubventionsPopup",value:function(e,t){return p.default.createElement(D.default,{ref:"subventionsPopup",quote:e,quoteField:t})}},{key:"renderSubventionsField",value:function(e){return p.default.createElement(N.Col,{md:6},p.default.createElement(v.default,u({ref:"subvention",quoteIndex:this.props.quoteIndex,currencyCode:this.props.currencyCode,value:this.props.servicesValue,currencyPosition:"right",suffixButton:p.default.createElement(k.InputGroup.Button,null,p.default.createElement(k.Button,{disabled:this.props.disabled,bsStyle:"primary",onClick:this.handleDisplaySubventions},p.default.createElement("span",{className:"glyphicon glyphicon-plus"})))},this.props.accessKeys[this.currentQuote+".subventions"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.discount.subventions",defaultMessage:"Subsidy"}),readOnly:this.props.readOnly})))}},{key:"renderServicesPopup",value:function(e){return p.default.createElement(x.default,{ref:"servicesPopup",showServicesModal:this.props.showServicesModal,servicesValue:this.props.servicesValue,selectedservices:this.props.selectedservices,pricingServices:this.props.pricingServices,subsidyServices:this.props.subsidyServices,listdealquoteservice:this.props.listdealquoteservice,quoteIndex:this.props.quoteIndex,currencyCode:this.props.currencyCode,eligibleServices:this.props.eligibleServices,eligibleServicesSelected:this.props.eligibleServicesSelected,quote:this.props.quote,quoteField:this.currentQuote,summaryVisibility:this.props.summaryVisibility,dispatch:this.props.dispatch})}},{key:"renderServicesField",value:function(e){return p.default.createElement(N.Col,{md:6},p.default.createElement(v.default,u({ref:"mounthlyservice",quoteIndex:this.props.quoteIndex,currencyCode:this.props.currencyCode,value:this.props.servicesValue,currencyPosition:"right",suffixButton:p.default.createElement(k.InputGroup.Button,null,p.default.createElement(k.Button,{disabled:this.props.disabled,bsStyle:"primary",onClick:this.handleDisplayServices},p.default.createElement("span",{className:"glyphicon glyphicon-plus"})))},this.props.accessKeys[this.currentQuote+".mounthlyservice"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.discount.mounthlyservice",defaultMessage:"Mounthly Insurance and Services"}),readOnly:this.props.readOnly})))}},{key:"render",value:function(){var e=this.props,t=e.currencyCode,a=e.quote,r=e.quoteField,n=e.tpgcode,s=e.accessKeys,l=e.rateTaxValue,i=e.readOnly,c=e.quoteFieldsModified,d=(o(e,["currencyCode","quote","quoteField","tpgcode","accessKeys","rateTaxValue","readOnly","quoteFieldsModified"]),r+C.default.getQuotePaymentField(a,O.TYPE_VERSEMENT_NORMAL)+".pfvmtdiscount"),h=r+C.default.getQuotePaymentField(a,O.TYPE_VERSEMENT_NORMAL)+".pfvpctdiscount",g=a.pfrmtloyerttc?a.pfrmtloyerttc:a.listdealquoteelement[0].pfrmtloyer*(1+l/100),b=B,E=!!this.props.options&&this.props.options.realtimecalc,w=this.currentQuote+".listdealquoteelement[0].listdealquoteelementstep";if(E)b=[p.default.createElement(m.Field,u({name:this.currentQuote+".listdealquoteelement[0].pfrmtloyer",id:"payment",key:"payment",component:v.default,currencyCode:t,disabled:!0,readOnly:i},s[r+".listdealquoteelement[0].pfrmtloyer"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.pay.title",defaultMessage:"Payment Excl(Tax)"})}))];else{var T=c?"btn-warning":"btn-primary";b=[p.default.createElement(N.Col,{md:3},p.default.createElement(m.Field,u({name:this.currentQuote+".listdealquoteelement[0].pfrmtloyer",id:"payment",key:"payment",component:v.default,currencyCode:t,disabled:!0},s[r+".listdealquoteelement[0].pfrmtloyer"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.pay.title",defaultMessage:"Payment Excl(Tax)"}),readOnly:i}))),p.default.createElement(N.Col,{xs:1},p.default.createElement("button",{className:"btn calculate-btn-position fa fa-flash "+T,type:"button",disabled:!c,onClick:this.handleComputePayment,title:this.props.intl.formatMessage(A.default.calculateBtnTooltip),readOnly:i}))]}var F=B;F=p.default.createElement(V.default,u({currencyCode:t,quoteIndex:this.props.quoteIndex},this.props,{accessKeys:this.props.accessKeys}));var _=(s[r+".pfimtpremierloyer"]||[]).hidden&&(s["pos.deal.financialquote.sectiondeposit"]||[]).hidden?0:6;return p.default.createElement("div",null,p.default.createElement(N.Row,null,p.default.createElement(N.Col,{md:6},p.default.createElement(m.Fields,u({names:[d,h],component:y.default,ref:"deposit",currencyCode:t},s[r+".listdealquoteelement[0].pfvpctdiscount"],{unleash:!0,currencyValue:d,percentValue:h,onValueChange:this.handleDiscountChanged,baseValue:C.default.getAssetCost(a),title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.discount.title",defaultMessage:"Discount"}),readOnly:i}))),p.default.createElement(N.Col,{md:6},p.default.createElement(m.Field,u({name:this.currentQuote+".pfiapprocheflux",component:M.default,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.pcm.title",defaultMessage:"Payment calculation method"}),options:P.tables.PROPOSITIONFINANCIERE,refParams:{tpgcode:n},key:"quote-financialProduct-pcm-field",allowEmptyParams:!0,suffixButton:p.default.createElement(S.default,{form:this.props.form,fieldPath:w,quoteIndex:this.props.quoteIndex,paymentMethod:this.props.pfiapprocheflux,duration:this.props.quote.pfinbperiodes,computeLoading:this.props.computeLoading}),onChange:this.handelPaymentMethodChanged},s[this.currentQuote+".pfiapprocheflux"],{placeholder:this.props.intl.formatMessage(A.default.quotepcmPlaceholder),readOnly:i})))),p.default.createElement(N.Row,null,p.default.createElement(N.Col,{md:_},p.default.createElement(q.default,u({quoteField:r},this.props,{id:"pos.deal.financialquote.firstpaymentdepositbox.container",readOnly:i}))),p.default.createElement(N.Col,{md:6},p.default.createElement(N.Row,null,this.renderServicesPopup(a),this.renderServicesField(a),this.renderSubventionsPopup(a,r),this.renderSubventionsField(a))),p.default.createElement(N.Col,{md:6},F),p.default.createElement(N.Col,{md:3},b),p.default.createElement(N.Col,{md:3},p.default.createElement(v.default,u({value:g,id:"paymentTI",key:"paymentTI",currencyCode:t,disabled:!0,component:v.default,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.payit.title",defaultMessage:"Incl(Tax)"})},s[r+".listdealquoteelement[0].pfrmtloyer"],{readOnly:i})))))}},{key:"currentQuote",get:function(){return"deal.listdealquote["+this.props.quoteIndex+"]"}}]),t}(p.default.Component);t.default=K},2907:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(17),m=a(13),h=a(14),y=a(10),g=a(2),b=r(g),v=a(526),E=r(v),O=a(528),C=r(O),P=a(261),w=a(357),M=a(1101),T=r(M),F=a(64),A={prpordre:1,prpmt:0,prpnbperiodes:0},_=function(e){return Array.from(new Array(e),function(e,t){return t})},S=(0,y.defineMessages)({computeStepError:{id:"pos.deal.financialquote.calculatestep.error",defaultMessage:"Cannot compute step please check you data"},periodeError:{id:"pos.deal.financialquote.calculatestep.perioderror",defaultMessage:"The sum of periode must be equal to the main periode"},amountError:{id:"pos.deal.financialquote.calculatestep.amounterror",defaultMessage:"First amount should not be equal to 0"}}),N=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return j.call(a),a.dispatch=e.dispatch,a}return i(t,e),c(t,[{key:"paymentModalInformations",get:function(){var e,t=this;return e={},o(e,P.PAYMENT_METHODS.PAYMENT_STEP,{modal:{title:p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.paymentmodal.title.paymentSteps",defaultMessage:"Payment Steps"}),onClose:this.updatePaymentSteps,onReset:this.onResetPaymentSteps,props:this.props},render:this.renderPaymentSteps,init:function(e){return t.initPaymentSteps(e)}}),o(e,P.PAYMENT_METHODS.SEASONAL,{modal:{title:p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.paymentmodal.title.seasonal",defaultMessage:"Seasonal"}),onClose:this.onCloseSeasonal,onReset:this.onResetSeasonal,props:this.props},render:this.renderSeasonal,init:function(e){return t.initSeasonal(e)}}),e}}]),c(t,[{key:"commonReset",value:function(){var e=this.props,t=e.form,a=e.fieldPath;e.elements.length&&this.dispatch((0,h.arrayRemoveAll)(t,a))}},{key:"handleClick",value:function(){var e=this.refs.modal,t=this.props.paymentMethod;this.setState({loading:!0}),e.toggle();var a=this.paymentModalInformations[t];a&&a.init?a.init(this.props):this.commonReset()}},{key:"initPaymentSteps",value:function(e){var t=e.form,a=e.fieldPath,r=e.elements;r&&0!=r.length||this.dispatch((0,h.arrayPush)(t,a,A))}},{key:"initSeasonal",value:function(e){var t=this,a=e.form,r=e.fieldPath,n=e.elements,o=e.startDate,s=e.duration,l=[],i=(0,b.default)(o).add(s,"months"),c=0,d=i.year()-o.year()+1,p=(0,b.default)(o).month()+1,f=[];if(0==n.length){var m={prpordre:null,prpnbperiodes:s,prppct:0,prpmt:null};n=n.asMutable?n.asMutable:n,n=[],n.splice(1,0,m)}var y=function(){return f=Array.from(n)};y();var g={weight:0,fee:!1,disabled:!1},v=0,E=_(d).map(function(e){return{year:o.year()+e,monthIndex:_(12).map(function(t){if(v++,++c>s)return g=u({},g,{disabled:!0,weight:null});var a=f[0]||{},r=a.prppct,n=a.prpnbperiodes;return g=u({},g,{weight:r,disabled:!1}),0==e&&t<p&&(l.push(g),g=u({},g,{disabled:!0,weight:null}),c--),v>=n&&(v=0,f.shift(),0==f.length&&y()),g})}});this.dispatch((0,h.arrayRemoveAll)(this.props.form,r,[])),E.forEach(function(e){return t.dispatch((0,h.arrayPush)(a,r,e))})}},{key:"renderSeasonal",value:function(e){var t=e.fields;return p.default.createElement(f.Table,{bordered:!0,striped:!0},p.default.createElement("thead",null,p.default.createElement("tr",{key:"tr-month"},p.default.createElement("th",null,p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.paymentmodal.header.Seasonal.monthYear",defaultMessage:"Month / Year"})),_(t.length).map(function(e){return p.default.createElement("th",{key:"th-year-"+e,className:"flex-col"},p.default.createElement("div",null,p.default.createElement(y.FormattedDate,{value:(0,b.default)().add(e,"years"),year:"numeric"})),p.default.createElement("div",null))})),p.default.createElement("tr",{key:"tr-weight"},p.default.createElement("th",null),_(t.length).map(function(e){return p.default.createElement("th",{key:"th-weight-"+e},p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.paymentmodal.header.Seasonal.WeightFee",defaultMessage:"Weight"}))}))),p.default.createElement("tbody",null,_(12).map(function(a){return p.default.createElement("tr",{key:"tr-body-"+a},p.default.createElement("td",null,p.default.createElement(y.FormattedDate,{value:(0,b.default)(0).add(a,"months"),month:"long"})),t.map(function(t,r){return p.default.createElement("td",{key:"td-"+a+"-"+r},p.default.createElement("div",{className:"flex-row"},p.default.createElement("div",null,p.default.createElement(h.Field,{name:t+".monthIndex["+a+"].weight",component:C.default,numberOfDigitAfterDecimal:2,disabled:!(!e.elements[r]||!e.elements[r].monthIndex)&&e.elements[r].monthIndex[a].disabled}))))}))})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.fieldPath,r=t.paymentMethod,n=t.computeLoading,o=this.paymentModalInformations[r],s=o?p.default.createElement(E.default,u({ref:"modal"},o.modal),p.default.createElement("div",{className:"financialQuotePaymentModal"},p.default.createElement(h.FieldArray,{name:a,component:o.render,props:this.props}))):null;return p.default.createElement(f.Button,{onClick:function(){return e.handleClick()},disabled:n||!o},p.default.createElement("i",{className:"fa fa-th-list"}),s)}}]),t}(d.Component);N.propTypes={paymentMethod:p.default.PropTypes.oneOf(Object.values(P.PAYMENT_METHODS)).isRequired,fieldPath:p.default.PropTypes.string.isRequired,form:p.default.PropTypes.string.isRequired};var j=function(){var e=this;this.handleClickCalculateStep=function(t,a){var r=e.props,n=r.elements,o=r.duration,s=0;if(n.forEach(function(e){return s+=parseInt(e.prpnbperiodes)}),o!=s)return void F.notify.show(e.props.intl.formatMessage(S.periodeError),"error");a.dispatch((0,w.calculateStep)(a.quoteIndex+1,t))},this.onResetPaymentSteps=function(t){var a=e.props,r=a.form,n=a.fieldPath,o=a.elements;e.dispatch((0,h.arrayRemoveAll)(r,n)).then(o&&o.length&&o.forEach(function(){return e.dispatch((0,h.arrayPush)(r,n,A))}))},this.renderPaymentSteps=function(t){var a=t.fields,r=e.props,n=e.handleClickCalculateStep,o=e.handleClickAddStep;return p.default.createElement("div",null,p.default.createElement(f.Row,null,p.default.createElement(f.Col,{xs:2,xsOffset:4,className:"text-center"},p.default.createElement("b",null,p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.paymentmodal.header.nbPeriods",defaultMessage:"Nb Periods"}))),p.default.createElement(f.Col,{xs:2,xsOffset:1,className:"text-center"},p.default.createElement("b",null,p.default.createElement(y.FormattedMessage,{id:"pos.deal.financialquote.paymentmodal.header.amount",defaultMessage:"Amount"})))),a.map(function(e,t){return p.default.createElement(f.Row,{key:t},p.default.createElement(f.Col,{md:1}," ",p.default.createElement("span",null)),p.default.createElement(f.Col,{md:1},p.default.createElement("span",{className:"pull-right"},p.default.createElement(f.Button,{disabled:1==a.length,bsStyle:"danger",onClick:function(){return a.remove(t)}},p.default.createElement("i",{className:"fa fa-minus","aria-hidden":"true"})))),p.default.createElement(f.Col,{md:1},p.default.createElement(f.Button,{bsStyle:"primary",onClick:function(){return o(t+1,r)}},p.default.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}))),p.default.createElement(f.Col,{md:2,xsOffset:1},p.default.createElement(h.Field,{name:e+".prpnbperiodes",component:T.default})),p.default.createElement(f.Col,{md:2,xsOffset:1},p.default.createElement(h.Field,{name:e+".prpmt",component:C.default})),p.default.createElement(f.Col,{md:1},p.default.createElement(f.Button,{bsStyle:"primary",onClick:function(){return n(t+1,r)}},p.default.createElement("i",{className:"fa fa-flash","aria-hidden":"true"}))))}))},this.onCloseSeasonal=function(t,a){var r=e.props,n=r.form,o=r.fieldPath,s=r.elements,l=r.startDate,i=(0,b.default)(l).month()+1,c=[],d=[],p=[];if(s&&s.length){s.forEach(function(e,t){return e.monthIndex.forEach(function(e,t){d.push(e)})}),d.forEach(function(e,t){!1===e.disabled&&c.push(e)}),d=[],c.forEach(function(e,t){t>=c.length-i&&d.push(e)}),c.forEach(function(e,t){t<c.length-i&&d.push(e)}),c=[],d.forEach(function(e,t){c.push(e)});var f=0,m=0,y=void 0;c.forEach(function(e,t){m++,0==t&&(y=e.weight),parseInt(e.weight)!==parseInt(y)&&(f++,p.push({prpordre:f,prppct:y,prpnbperiodes:m-1}),m=1),t+1===c.length&&(f++,p.push({prpordre:f,prppct:e.weight,prpnbperiodes:m})),y=e.weight})}e.dispatch((0,h.arrayRemoveAll)(e.props.form,o,[])),p.forEach(function(t,a){return e.dispatch((0,h.arrayPush)(n,o,u({prpordre:a},t)))})},this.updatePaymentSteps=function(t){var a=e.props,r=a.form,n=a.fieldPath,o=a.elements,s=[],l=1;o.forEach(function(e){var t={prpordre:l,prpmt:e.prpmt,prpnbperiodes:e.prpnbperiodes};l+=1,s.push(t)}),e.dispatch((0,h.arrayRemoveAll)(r,n)),s.forEach(function(t){e.dispatch((0,h.arrayPush)(r,n,t))})},this.handleClickAddStep=function(t){var a=e.props,r=a.form,n=a.fieldPath,o=a.elements;o=o.asMutable?o.asMutable:o,o.splice(t,0,A);var s=[],l=1;o.forEach(function(e){var t={prpordre:l,prpmt:e.prpmt,prpnbperiodes:e.prpnbperiodes};l+=1,s.push(t)}),e.dispatch((0,h.arrayRemoveAll)(r,n)),s.forEach(function(t){e.dispatch((0,h.arrayPush)(r,n,t))})},this.onResetSeasonal=function(t){var a=e.props,r=a.form,n=a.fieldPath,o=a.elements,s=a.startDate,l=a.duration,i=[],c=(0,b.default)(s).add(l,"months"),d=0,p=c.year()-s.year()+1,f=(0,b.default)(s).month()+1,m=[];e.dispatch((0,h.arrayRemoveAll)(r,n));var y={prpordre:null,prpnbperiodes:l,prppct:0,prpmt:null};o=o.asMutable?o.asMutable:o,o.splice(1,0,y);var g=function(){return m=Array.from(o)};g();var v={weight:0,fee:!1,disabled:!1},E=0,O=_(p).map(function(e){return{year:s.year()+e,monthIndex:_(12).map(function(t){if(E++,++d>l)return v=u({},v,{disabled:!0,weight:null});var a=m[0]||{},r=a.prpnbperiodes;return v=u({},v,{weight:0,disabled:!1}),0==e&&t<f&&(i.push(v),v=u({},v,{disabled:!0,weight:null}),d--),E>=r&&(E=0,m.shift(),0==m.length&&g()),v})}});e.dispatch((0,h.arrayRemoveAll)(e.props.form,n,[])),O.forEach(function(t){return e.dispatch((0,h.arrayPush)(r,n,t))})}},x=function(e,t){var a=t.form,r=t.fieldPath,n=t.quoteIndex,o=t.duration,s=(0,h.formValueSelector)(a),l=s(e,r),i=s(e,"deal"),u=s(e,"deal"),c=u.dprapproxdureean,d=u.dprdtcreation,p=d&&(0,b.default)(d)||(0,b.default)();return s(e,"deal.listdealquote["+n+"]").pfiapprocheflux,{elements:l,startDate:p,duration:o,dprapproxdureean:c,deal:i,quoteIndex:n}};t.default=(0,m.connect)(x)((0,y.injectIntl)(N))},2908:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(17),f=a(10),m=a(14),h=a(262),y=a(43),g=a(2643),b=r(g),v=a(2909),E=r(v),O=a(2910),C=r(O),P=a(2639),w=r(P),M=a(357),T=a(123),F=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(T),A=a(13),_=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return d.default.createElement("div",{className:this.props.skinClass},this.props.children)}}]),t}(c.Component);_=(0,A.connect)(function(e){return{skinClass:e.authentication.skinClass}})(_);var S=function(e){function t(){var e,a,r,o;s(this,t);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.handlePopupClose=function(){r.props.dispatch((0,M.setShowServicesModal)(!1)),r.props.dispatch((0,M.setVisibilitySection)(!1)),r.props.dispatch((0,M.initialiseSelectedServices)(r.props.listdealquoteservice)),r.props.dispatch((0,M.initialiseSelectedELServices)())},r.showSummarySection=function(e,t){r.props.dispatch((0,M.setVisibilitySection)(t))},r.findService=function(e,t){var a=!1;return t&&t.find(function(t){t.pelid==e&&(a=!0)}),a},r.getTotalSummary=function(e){return e.reduce(function(e,t){return(0,h.parseFloatOrEmpty)(t.pfpmt)&&(e+=(0,h.parseFloatOrEmpty)(t.pfpmt)),e},0)},r.handleSaveServices=function(){var e=r.props,t=(e.eligibleServices,e.eligibleServicesSelected),a=(e.subsidyServices,e.servicesValue),o=e.listdealquoteservice,s=[],l=(r.props,a),i=r.props.listdealquoteservice&&r.props.listdealquoteservice.length>0?Math.max.apply(Math,n(r.props.listdealquoteservice.map(function(e){return e.pfpordre}))):0;if(o){var u=o.filter(function(e){return 1==e.ppeflagauto});t.map(function(e){if(e.pelflagdefault){if(e.pelflagdefault){var t=r.findService(e.pelid,o),a=e;t||(i++,a=e.merge({action:F.ACTION_MODE_INSERTION,pfpordre:i}),l+=e.pfpmt,s.push(a))}}else{var n=r.findService(e.pelid,o),u=o.find(function(t){return t.pelid==e.pelid});n&&u.action!==F.ACTION_MODE_INSERTION&&(l-=e.pfpmt,u=u.set("action",F.ACTION_MODE_DELETION),s.push(u))}}),s=u.concat(s)}r.props.dispatch((0,M.setMounthlyServices)(l)),r.props.dispatch((0,m.change)("dealForm","deal.listdealquote["+r.props.quoteIndex+"].listdealquoteservice",s)),r.handlePopupClose()},r.getTotalServicesValue=function(e){return e.reduce(function(e,t){return(0,h.parseFloatOrEmpty)(t.pfpmt)&&t.pelflagdefault&&(e+=(0,h.parseFloatOrEmpty)(t.pfpmt)),e},0)},o=a,l(r,o)}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.listdealquoteservice,r=t.eligibleServicesSelected,n=t.selectedservices,o=t.summaryVisibility,s=!0,l={},i=[],u=[],c=[],m=[],h=[],g=[],v={customComponentMetadata:{refTable:y.tables.AVTPRESTATION}},O=function(e){return e.reduce(function(e,t){return e[t.tprcode]=e[t.tprcode]||[],e[t.tprcode].push(t),u.push(t.tprcode),e},{})};return a&&a.length>0&&(h=a.filter(function(e){return 1==e.ppeflagauto}),c=O(h)),r&&r.length>0&&(m=O(r)),u&&u.length>0&&(u=function(e){return e.filter(function(e,t,a){return a.indexOf(e)===t})}(u)),!o&&u&&u.length>0?(u.forEach(function(t){i.push({key:""+t,title:d.default.createElement(w.default,{data:t,metadata:v}),body:d.default.createElement(E.default,{value:t,totalServicesValue:e.getTotalServicesValue(m[""+t]||[]),eligibleServices:m[""+t]||[],servicesIncluded:c[""+t]||[],customComponentMetadata:v,dispatch:e.props.dispatch}),active:!0})}),n&&n.length>0&&(s=!1),g=d.default.createElement("div",null,d.default.createElement(p.Button,{disabled:s,className:"btn btn-primary pull-left",type:"button",onClick:function(t,a){return e.showSummarySection(t,!0)}},d.default.createElement(f.FormattedMessage,{id:"servicer.service.submit",defaultMessage:"Summary"})),d.default.createElement(p.Button,{key:"saveButton",className:"btn btn-primary",type:"button",disabled:this.props.saveDisabled,onClick:this.handleSaveServices}," ",d.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.services.Apply",defaultMessage:"Apply"})),d.default.createElement(p.Button,{key:"resetButton",className:"btn btn-default",type:"button",onClick:this.handlePopupClose}," ",d.default.createElement(f.FormattedMessage,{id:"core.modal.btn.close",defaultMessage:"Close"})))):o&&n&&n.length>0&&(i.push({key:"summaryKey",title:"Summary",body:d.default.createElement(C.default,{selectedservices:n,totalServicesValue:this.getTotalSummary(n||[]),customComponentMetadata:v}),active:!0}),g=d.default.createElement(p.Button,{className:"btn btn-primary pull-right",type:"button",onClick:function(t,a){return e.showSummarySection(t,!1)}},d.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.services.return",defaultMessage:"Retour"}))),l=i.length>0?d.default.createElement(b.default,{className:"options",tabs:i}):d.default.createElement(f.FormattedMessage,{id:"pos.deal.assets.options.nodata",defaultMessage:"No option are available"}),d.default.createElement(p.Modal,{ref:"modal",className:"text-align-modal",show:this.props.showServicesModal,onHide:this.handlePopupClose},d.default.createElement(_,null,d.default.createElement(p.Modal.Header,{closeButton:!0},d.default.createElement(p.Modal.Title,null,d.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.services.popup",defaultMessage:"Services management"}))),d.default.createElement(p.Modal.Body,null,l),d.default.createElement(p.Modal.Footer,null,g)))}}]),t}(c.Component);t.default=S},2909:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.COL3=t.COL2=t.COL1=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=(a(17),a(10)),p=(a(14),a(357)),f=a(358),m=r(f),h=a(2638),y=r(h),g=a(2639),b=r(g),v=a(43),E=a(28),O=r(E),C=t.COL1="pelflagdefault",P=t.COL2="pellibelle",w=t.COL3="pfpmt",M=[P,w],T=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleCheckBoxClick=function(e,t){r.props.dispatch((0,p.setListServicesSelected)(e.pelid,t)),r.props.dispatch((0,p.pushSelectedService)(e,t))},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e={columnName:C,displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.financialquote.services.choice",defaultMessage:"Choice"}),customComponent:h.CheckBoxDisplay,customComponentMetadata:{handleCheckBoxClick:this.handleCheckBoxClick}},t=[{columnName:P,displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.financialquote.services.name",defaultMessage:"Name of Service"}),customComponent:b.default,Sortable:!0,customComponentMetadata:{refTable:v.tables.AVTPRESTATION,allowEmptyParams:!0}},{columnName:w,displayName:c.default.createElement(d.FormattedMessage,{id:"pos.deal.financialquote.services.amount",defaultMessage:"Amount"}),customComponent:h.AmountDisplay,customComponentMetadata:{currencycode:this.props.currencyCode}}],a=this.props,r=a.servicesIncluded,n=a.eligibleServices,o=a.totalServicesValue,s=(a.customComponentMetadata,a.value,[e].concat(t)),l=[C].concat(M),i=[];return i.push(c.default.createElement("div",null,c.default.createElement("p",null,c.default.createElement("h4",null,c.default.createElement(d.FormattedMessage,{id:"pos.deal.quotes.serviceIncluded.title",defaultMessage:"Services included"}))),c.default.createElement(O.default,{type:"primary",withBoder:"true"},c.default.createElement(y.default,{tableClassName:"table table-hover",useGriddleStyles:!1,results:r||[],initialSort:"tprcode",sortAscending:!1,columns:M,columnMetadata:t,useCustomPagerComponent:!0,customPagerComponent:m.default,externalSortAscending:"tprdetailedgroupcode"})))),i.push(c.default.createElement("div",null,c.default.createElement("p",null,c.default.createElement("h4",null,c.default.createElement(d.FormattedMessage,{id:"pos.deal.quotes.additionnalServices.title",defaultMessage:"Additionnal services"}))),c.default.createElement(O.default,{type:"primary",withBoder:"true"},c.default.createElement(y.default,{tableClassName:"table table-hover",useGriddleStyles:!1,results:n||[],initialSort:"tprcode",sortAscending:!1,columns:l,columnMetadata:s,useCustomPagerComponent:!0,customPagerComponent:m.default,externalSortAscending:"tprdetailedgroupcode"})),c.default.createElement("div",null,c.default.createElement("div",{className:"pull-left col-md-6 bloc-total"},c.default.createElement("h4",null,c.default.createElement(d.FormattedMessage,{id:"pos.deal.financialquote.services.total",defaultMessage:"Sub-total"}))),c.default.createElement("div",{className:"pull-left col-md-6"},c.default.createElement("h4",{className:"center-text bloc-total"},o))))),c.default.createElement("div",null,i)}}]),t}(u.Component);t.default=T},2910:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.COL2=t.COL1=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(259),p=(r(d),a(17),a(526)),f=(r(p),a(10)),m=(a(14),a(357),a(123)),h=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e}(m),a(356)),y=(r(h),a(358)),g=r(y),b=a(2638),v=r(b),E=a(2639),O=r(E),C=a(43),P=a(28),w=r(P),M=t.COL1="pellibelle",T=t.COL2="pfpmt",F=[M,T],A=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=[],t=this.props,a=t.selectedservices,r=t.customComponentMetadata,n=t.totalServicesValue,o=[{columnName:M,displayName:c.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.services.name",defaultMessage:"Name of Service"}),customComponent:O.default,Sortable:!0,customComponentMetadata:{refTable:C.tables.AVTPRESTATION,allowEmptyParams:!0}},{columnName:T,displayName:c.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.services.amount",defaultMessage:"Amount"}),customComponent:b.AmountDisplay,customComponentMetadata:{currencycode:this.props.currencyCode}}],s=function(t){return t.reduce(function(t,a){return t[a.tprcode]=t[a.tprcode]||[],t[a.tprcode].push(a),e.push(a.tprcode),t},{})}(a);e=e.filter(function(e,t,a){return a.indexOf(e)===t});var l=[];return e&&e.length>0&&(e.forEach(function(e){l.push(c.default.createElement("div",null,c.default.createElement("p",null,c.default.createElement("h4",null,c.default.createElement(O.default,{data:e,metadata:r}))),c.default.createElement(w.default,{type:"primary",withBoder:"true"},c.default.createElement(v.default,{tableClassName:"table table-hover",useGriddleStyles:!1,results:s[""+e]||[],initialSort:"tprcode",sortAscending:!1,columns:F,columnMetadata:o,useCustomPagerComponent:!0,customPagerComponent:g.default,externalSortAscending:"tprdetailedgroupcode"}))))}),l.push(c.default.createElement("div",null,c.default.createElement("h4",{className:"pull-left col-md-6 bloc-total"},c.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.services.summary.total",defaultMessage:"Total"})),c.default.createElement("h4",{className:"center-text col-md-6 bloc-total"},n)))),c.default.createElement("div",null,l)}}]),t}(u.Component);t.default=A},2911:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=(a(13),a(526)),f=r(p),m=a(2644),h=r(m),y=(a(527),a(261)),g=r(y),b=a(10),v=a(63),E=(r(v),a(14)),O=(a(43),a(367),a(65)),C=a(28),P=r(C),w=a(356),M=r(w),T=a(528),F=r(T),A=a(545),_=(r(A),a(17),function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(){},r.handleResetEvent=function(){},r.handleClose=function(){},n=a,l(r,n)}return i(t,e),u(t,[{key:"toggle",value:function(){var e=this;this.refs.modal.toggle(),setTimeout(function(){e.refs.dealer.refs.currency.getRenderedComponent().focus()},200)}},{key:"render",value:function(){var e=this.props,t=e.quote,a=e.quoteField,r=e.currencyCode,n=(o(e,["quote","quoteField","currencyCode"]),g.default.getDealerSubsidyMntField(t,a)),s=g.default.getDealerSubsidyPctField(t,a),l=g.default.getManSubsidyMntField(t,a),i=g.default.getManSubsidyPctField(t,a),u=g.default.getDealerSubsidyPctField(t,a),c=g.default.getManSubsidyPctField(t,a),p=t.pfiinvestissement;return d.default.createElement(f.default,{title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.title",defaultMessage:"Subsidy"}),ref:"modal",onReset:this.handleResetEvent,onClose:this.handleClose},d.default.createElement(O.Row,null,d.default.createElement(O.Col,{md:6},d.default.createElement(P.default,{type:"primary",title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.box.reduction.amount.title",defaultMessage:"Reduction of the financed amount"}),withBoder:"true"},d.default.createElement(E.Field,{component:h.default,onValueChange:this.handleChange,currencyCode:r,title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.dealer.title",defaultMessage:"Dealer subsidy"}),ref:"dealeramountsubv",currencyValue:n,percentValue:s,baseValue:p,readAndWrite:"true"}),d.default.createElement(E.Field,{component:h.default,onValueChange:this.handleChange,currencyCode:r,title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.manufact.title",defaultMessage:"OEM subsidy"}),ref:"manufactureramountsubv",currencyValue:l,percentValue:i,baseValue:p,readAndWrite:"true"}))),d.default.createElement(O.Col,{md:6},d.default.createElement(P.default,{type:"primary",title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.box.reduction.rate.title",defaultMessage:"Reduction of the customer rate"}),withBoder:"true"},d.default.createElement(E.Field,{groupClassName:"col-md-12",component:F.default,name:u,title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.dealerrate.title",defaultMessage:"Dealer subsidy"}),prefix:"%"}),d.default.createElement(E.Field,{groupClassName:"col-md-12",component:F.default,name:c,title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.manufactrate.title",defaultMessage:"OEM subsidy"}),prefix:"%"})))),d.default.createElement(O.Row,null,d.default.createElement(O.Col,{md:6},d.default.createElement(P.default,{type:"primary",title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.box.reverse.title",defaultMessage:"Dealer reverse"}),withBoder:"true"},d.default.createElement(E.Field,{component:M.default,onValueChange:this.handleChange,currencyCode:r,title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.reverse.title",defaultMessage:"Amount"}),ref:"dealerreverse",currencyValue:n}))),d.default.createElement(O.Col,{md:6},d.default.createElement(P.default,{type:"primary",title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.box.grace.title",defaultMessage:"Grace period"}),withBoder:"true"},d.default.createElement(E.Field,{component:F.default,name:a+".pfigracenbperiod",onValueChange:this.handleChange,title:d.default.createElement(b.FormattedMessage,{id:"pos.quote.subventions.popup.grace.duration.title",defaultMessage:"Duration"}),ref:"graceduration"})))))}}]),t}(d.default.Component));t.default=_},2912:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(14),h=a(2644),y=r(h),g=a(17),b=a(356),v=r(b),E=a(1113),O=a(261),C=r(O),P=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleDepositChanged=function(e,t){r.props.dispatch((0,E.depositMntChanged)(r.props.quote,r.props.quoteField,t))},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.currencyCode,a=e.quote,r=e.quoteField,n=e.accessKeys,s=e.rateTaxValue,l=e.readOnly,i=(o(e,["currencyCode","quote","quoteField","accessKeys","rateTaxValue","readOnly"]),a.pfimtpremierloyer?a.pfimtpremierloyer/(1+s/100):void 0),c=(n[r+".pfimtpremierloyer"]||[]).hidden?12:6;return p.default.createElement(g.Row,null,p.default.createElement(g.Col,{md:6},p.default.createElement(g.Row,null,p.default.createElement(g.Col,{md:6},p.default.createElement(v.default,u({value:i,id:"firstPayment",key:"firstPayment",disabled:!0,currencyCode:t},n[r+".pfimtpremierloyer"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.firstpay.title",defaultMessage:"First payment Excl(Tax)"}),readOnly:l}))),p.default.createElement(g.Col,{md:6},p.default.createElement(m.Field,u({name:r+".pfimtpremierloyer",component:v.default,prefix:"%",key:"firstPaymentTI",title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.firstpayincltax.title",defaultMessage:"Incl(Tax)"})},n[r+".pfimtpremierloyer"],{readOnly:l}))))),p.default.createElement(g.Col,{md:c},p.default.createElement(m.Fields,u({names:[r+".pfimtdeposit",r+".pfipctdeposit"],component:y.default,ref:"deposit",currencyCode:t,unleash:!0,currencyValue:r+".pfimtdeposit",percentValue:r+".pfipctdeposit",onValueChange:this.handleDepositChanged,baseValue:C.default.getAssetCost(a)},n[r+".pfipctdeposit"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.deposit.title",defaultMessage:"Deposit"}),readOnly:l}))))}}]),t}(p.default.Component);t.default=P},2913:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(10),f=a(43),m=a(63),h=r(m),y=a(14),g=a(17),b=a(28),v=r(b),E=function(e){function t(e){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.accessKeys,a=(e.hidden,o(e,["accessKeys","hidden"]),t&&t["pos.deal.financialquote.sectiondeposit"]&&t["pos.deal.financialquote.sectiondeposit"].hidden),r=d.default.createElement("div",null,d.default.createElement(g.Row,null,d.default.createElement(g.Col,{md:12},d.default.createElement(y.Field,{name:"deposit",component:h.default,refTable:f.tables.LANTTRPARAM,refParams:{ttrnom:"REMUNDEPOT"},title:d.default.createElement(p.FormattedMessage,{id:"pos.deal.financialquote.deposit.title",defaultMessage:"Deposit"})}))));return d.default.createElement(v.default,{openOnMount:!1,className:"box-collapsible hidden-box inline-box",collapsible:!0,tools:!0,hidden:a},r)}}]),t}(c.Component);t.default=E},2914:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(261),h=r(m),y=a(43),g=a(14),b=a(63),v=r(b),E=a(528),O=r(E),C=a(357),P=a(65),w=a(2671),M=r(w),T=a(28),F=r(T),A=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleComputeProfitability=function(){r.props.dispatch((0,C.computeProfitability)())},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.quote,a=e.quoteField,r=e.accessKeys,n=e.tpgcode,s=e.computeLoading,l=e.readOnly,i=(o(e,["quote","quoteField","accessKeys","tpgcode","computeLoading","readOnly"]),!t.pfiid);return p.default.createElement(F.default,{openOnMount:!1,className:"box-collapsible inline-box",collapsible:!0,tools:!0},p.default.createElement(P.Row,null,p.default.createElement(P.Col,{md:6},p.default.createElement(P.Row,null,p.default.createElement(P.Col,{md:6},p.default.createElement(g.Field,u({name:a+".listdealquoteelement[0].pfrtotalnominal",component:O.default,prefix:"%"},r[a+".listdealquoteelement[0].pfrtotalnominal"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.stdrate.title",defaultMessage:"Standard rate"}),key:"standardRate",disabled:!0,readOnly:l}))),p.default.createElement(P.Col,{md:6},p.default.createElement(g.Field,u({name:h.default.getQuoteAttributeFieldValue(t,a,h.default.pfacodes.TAEG),prefix:"%",title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.taeg.title",defaultMessage:"TAEG"}),key:"taeg",component:O.default},r["pos.deal.quote.TAEG"],{disabled:!0,readOnly:l})),p.default.createElement(g.Field,u({name:a+".listdealquoteelement[0].pfrtxnominal",component:O.default},r[a+".listdealquoteelement[0].pfrtxnominal"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.stdPCode.title",defaultMessage:"Standard price code"}),key:"StandardPriceCode",disabled:!0,readOnly:l}))),p.default.createElement(P.Col,{md:6},p.default.createElement(g.Field,u({name:a+".ratepnb",component:O.default,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.ratepnb.title",defaultMessage:"Profitability"}),key:"ratepnb"},r[a+".ratepnb"],{disabled:!0,suffix:!0,readOnly:l,suffixButton:p.default.createElement("button",{className:"btn fa fa-flash btn-primary",disabled:s||i,onClick:this.handleComputeProfitability,type:"button"})}))))),p.default.createElement(P.Col,{md:6},p.default.createElement(P.Row,null,p.default.createElement(P.Col,{md:6},p.default.createElement(g.Field,u({name:a+".listdealquoteelement[0].pfrmargenominale",component:O.default,prefix:"%",title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.margin.title",defaultMessage:"Margin"})},r[a+".listdealquoteelement[0].pfrmargenominale"],{key:"margin",readOnly:l}))),p.default.createElement(P.Col,{md:6},p.default.createElement(g.Field,u({name:a+".listdealquotepayment[0].pfvpctdiscount",component:O.default,prefix:"%",key:"other",title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.other.title",defaultMessage:"Other"})},r[a+".listdealquotepayment[0].pfvpctdiscount"],{disabled:!0,readOnly:l})),p.default.createElement(g.Field,u({name:a+".listdealquoteelement[0].ftvcode",component:v.default,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.rateFormul.title",defaultMessage:"Rate formula"}),options:y.tables.LANFORMULE,refParams:{tpgcode:n},key:"quote-financialProduct-rateFormul-field",allowEmptyParams:!0},r[a+".listdealquoteelement[0].ftvcode"],{placeholder:this.props.intl.formatMessage(M.default.rateFormulPlaceholder),readOnly:l})))))))}}]),t}(p.default.Component);t.default=A},2915:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(43),m=a(63),h=r(m),y=a(356),g=r(y),b=a(528),v=r(b),E=a(14),O=a(2916),C=(r(O),a(10)),P=a(17),w=a(527),M=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleMileageChanged=function(e,t){r.props.dispatch((0,w.calculateTotalMileage)(r.props.quote.pfinbperiodes,t))},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.currencyCode,a=(e.quote,e.quoteField),r=e.readOnly,n=e.accessKeys,s=e.napcode,l=e.tpgcode,i=(o(e,["currencyCode","quote","quoteField","readOnly","accessKeys","napcode","tpgcode"]),(n[a+".pfiunitemesure"]||[]).hidden?12:6);return p.default.createElement(P.Row,null,p.default.createElement(P.Col,{md:6},p.default.createElement(P.Row,null,p.default.createElement(P.Col,{md:i},p.default.createElement(E.Field,u({name:a+".pfikilometrage",component:h.default,title:p.default.createElement(C.FormattedMessage,{id:"pos.deal.financialquote.mileage.title",defaultMessage:"Mileage"}),key:"mileage",suffix:"km",options:f.tables.LANTUSPARAM,refParams:{tusnom:"MILEAGE"},onChange:this.handleMileageChanged},n[a+".pfikilometrage"],{readOnly:r}))),p.default.createElement(P.Col,{md:6},p.default.createElement(E.Field,u({name:a+".pfiunitemesure",title:p.default.createElement(C.FormattedMessage,{id:"pos.deal.financialquote.unit.title",defaultMessage:"Unit"}),key:"unit",component:h.default,options:f.tables.MILEAGE,refParams:{napcode:s,tpgcode:l}},n[a+".pfiunitemesure"],{readOnly:r}))))),p.default.createElement(P.Col,{md:6},p.default.createElement(P.Row,null,p.default.createElement(P.Col,{md:6},p.default.createElement(E.Field,u({name:"totalMileage",component:v.default,title:p.default.createElement(C.FormattedMessage,{id:"pos.deal.financialquote.mileagetotal.title",defaultMessage:"Mileage total"}),key:"mileagetotal",disabled:!0},n.totalMileage,{readOnly:r}))),p.default.createElement(P.Col,{md:6},p.default.createElement(E.Field,u({name:a+".pfimtexcessuse",component:g.default,title:p.default.createElement(C.FormattedMessage,{id:"pos.deal.financialquote.extramileagecost.title",defaultMessage:"Extra mileage cost"})},n[a+".pfimtexcessuse"],{currencyCode:t,key:"extraMileageCost",disabled:!0,readOnly:r}))))))}}]),t}(p.default.Component);t.default=M},2916:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(2729),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=[{code:"km",label:"kilometer"},{code:"miles",label:"miles"}];this.setState(function(){return{data:t,children:e.renderChildren(e.state.data,t)}})}}]),t}(u.default);t.default=c},2917:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(17),h=a(261),y=r(h),g=a(1113),b=a(14),v=a(2644),E=r(v),O=a(528),C=r(O),P=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleResidualValueChanged=function(e,t){r.props.dispatch((0,g.setResidualValue)(r.props.quote,r.props.quoteField,t))},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.currencyCode,a=e.quote,r=e.quoteField,n=e.readOnly,s=e.accessKeys,l=(o(e,["currencyCode","quote","quoteField","readOnly","accessKeys"]),y.default.getQuoteAttribute(a,y.default.pfacodes.PCTRVMIN.pfacode).pfadouble),i=y.default.getQuoteAttribute(a,y.default.pfacodes.PCTRVMAX.pfacode).pfadouble;return p.default.createElement(m.Row,null,p.default.createElement(m.Col,{md:6},p.default.createElement(b.Fields,u({names:[r+".listdealquoteelement[0].pfrvr",r+".listdealquoteelement[0].pfrpctvr"],component:E.default,ref:"residualvalue",unleash:!0,onValueChange:this.handleResidualValueChanged,currencyValue:r+".listdealquoteelement[0].pfrvr",currencyCode:t,percentValue:r+".listdealquoteelement[0].pfrpctvr",baseValue:y.default.getAssetCost(a)},s[r+".listdealquoteelement[0].pfrpctvr"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.residualvaluebox.rv",defaultMessage:"Residual value"}),readOnly:n}))),p.default.createElement(m.Col,{md:6},p.default.createElement(m.Row,null,p.default.createElement(m.Col,{md:6},p.default.createElement(C.default,u({value:l,prefix:"%"},s[r+".listdealquoteelement[0].ptapctrvmin"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.residualvaluebox.minresidualvalue.title",defaultMessage:"Min"}),key:"minresidualvalue",disabled:!0,readOnly:n}))),p.default.createElement(m.Col,{md:6},p.default.createElement(C.default,u({value:i},s[r+".listdealquoteelement[0].ptapctrvmax"],{prefix:"%",key:"maxresidualvalue",title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.residualvaluebox.maxresidualvalue.title",defaultMessage:"Max"}),disabled:!0,readOnly:n}))))))}}]),t}(p.default.Component);t.default=P},2918:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(17),h=a(261),y=r(h),g=a(14),b=a(1113),v=a(2644),E=r(v),O=a(1101),C=r(O),P=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleRentalAmountChanged=function(e,t){r.props.dispatch((0,b.setRentalAmount)(r.props.quote,r.props.quoteField,t))},r.handleUntilRentalnbChanged=function(e,t){r.props.dispatch((0,b.setUntilRentalnb)(r.props.quote,r.props.quoteField,t))},r.handleWithRentalnbChanged=function(e,t){r.props.dispatch((0,b.setWithRentalnb)(r.props.quote,r.props.quoteField,t))},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.currencyCode,a=e.quote,r=e.quoteField,n=e.readOnly,s=e.accessKeys,l=(o(e,["currencyCode","quote","quoteField","readOnly","accessKeys"]),y.default.getPaymentFieldValues(a,r,h.TYPE_VERSEMENT_DOWNPAYMENT)),i=y.default.getPaymentFieldValues(a,r,h.TYPE_VERSEMENT_RENTALNB),c=l+".pfvmt",d=void 0,b=void 0,v=void 0,O=y.default.getQuotePaymentIndex(a,h.TYPE_VERSEMENT_RENTALNB);return O&&-1!==O?(c=i+".pfvmt",v=i+".pfvpct",b=i+".pfvpecordre",d=i+".pfvdt"):(v=l+".pfvpct",d=l+".pfvpecordre",b=l+".pfvpctdpwithrental"),p.default.createElement(m.Row,null,p.default.createElement(m.Col,{md:6},p.default.createElement(g.Fields,u({names:[{pfiRentalMnt:c},{pfipctRentalMnt:v}],component:E.default,ref:"rentalAmount",unleash:!0,onValueChange:this.handleRentalAmountChanged,currencyValue:c,currencyCode:t,percentValue:v,baseValue:y.default.getAssetCost(a)},s["pos.deal.quote.payment.pcm"],{title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.rentalAmountBox.DWPra",defaultMessage:"DWP With rental Amount"}),readOnly:n}))),p.default.createElement(m.Col,{md:6},p.default.createElement(m.Row,null,p.default.createElement(m.Col,{md:6},p.default.createElement(g.Field,u({name:b,component:C.default,currencyCode:t},s["pos.deal.quote.payment.pcm"],{onChange:this.handleUntilRentalnbChanged,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.rentalAmountBox.untilRentalnb.title",defaultMessage:"Until rental nb"}),key:"untilRentalnb",readOnly:n}))),p.default.createElement(m.Col,{md:6},p.default.createElement(g.Field,u({name:d,component:C.default,currencyCode:t},s["pos.deal.quote.payment.pcm"],{onChange:this.handleWithRentalnbChanged,key:"withRentalnb",title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.rentalAmountBox.withRentalnb.title",defaultMessage:"With rental nb"}),readOnly:n}))))))}}]),t}(p.default.Component);t.default=P},2919:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(261),h=r(m),y=a(1113),g=a(14),b=a(2644),v=r(b),E=a(528),O=r(E),C=a(17),P=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleDownPaymentChanged=function(e,t){r.props.dispatch((0,y.setDownPaymentMnt)(r.props.quote,r.props.quoteField,t))},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.currencyCode,a=e.quote,r=e.quoteField,n=e.accessKeys,s=e.readOnly,l=(o(e,["currencyCode","quote","quoteField","accessKeys","readOnly"]),h.default.getPaymentFieldValues(a,r,m.TYPE_VERSEMENT_DOWNPAYMENTARR)+".pfvmt"),i=h.default.getPaymentFieldValues(a,r,m.TYPE_VERSEMENT_DOWNPAYMENTARR)+".pfvpct";return p.default.createElement(C.Row,null,p.default.createElement(C.Col,{md:6},p.default.createElement(g.Fields,u({names:[l,i],component:v.default,accessKeys:n,unleash:!0,ref:"downpayment",onValueChange:this.handleDownPaymentChanged,currencyValue:l,percentValue:i},n[i],{baseValue:h.default.getAssetCost(a),currencyCode:t,title:p.default.createElement(f.FormattedMessage,{id:"pos.quote.downpaymentbox.amount",defaultMessage:"Down payment"}),readOnly:s}))),p.default.createElement(C.Col,{md:6},p.default.createElement(C.Row,null,p.default.createElement(C.Col,{md:6},p.default.createElement(g.Field,u({name:h.default.getQuoteAttributeFieldValue(a,r,h.default.pfacodes.DWPPCTMIN),prefix:"%",component:O.default},n[h.default.getQuoteAttributeFieldValue(a,r,h.default.pfacodes.DWPPCTMIN)],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.downpaymentbox.mindowpayment.title",defaultMessage:"Min"}),key:"mindowpayment",disabled:!0,readOnly:s}))),p.default.createElement(C.Col,{md:6},p.default.createElement(g.Field,u({name:h.default.getQuoteAttributeFieldValue(a,r,h.default.pfacodes.DWPPCTMAX),prefix:"%",key:"maxdownpayment",component:O.default},n[h.default.getQuoteAttributeFieldValue(a,r,h.default.pfacodes.DWPPCTMAX)],{title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.downpaymentbox.maxdownpayment.title",defaultMessage:"Max"}),disabled:!0,readOnly:s}))))))}}]),t}(p.default.Component);t.default=P},2920:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(24),m=r(f),h=a(28),y=r(h),g=a(259),b=r(g),v=a(10),E=a(123),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),C=a(358),P=r(C),w=a(2638),M=a(2730),T=r(M),F=a(1102),A=r(F),_=a(360),S=a(43),N=a(14),j=(0,v.defineMessages)({commissionTitle:{id:"pos.deal.financialquote.commissions.box.title",defaultMessage:"Commissions"},commissionRate:{id:"pos.deal.financialquote.commisions.prestation.pfptx",defaultMessage:"Rate exc.tax (%)"},commissionAmount:{id:"pos.deal.financialquote.commisions.prestation.amount",defaultMessage:"Amount(Excl.Tax)"},commissionName:{id:"pos.deal.financialquote.commissions.commission.name",defaultMessage:"commission name"}}),x=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleEditCommission=function(e,t){var r=(0,m.default)(a.props.quote.listdealquotecommission),n=(0,m.default)(a.props.possibleCommissions);r=r.map(function(a){if(a.pfcordre===t.pfcordre){var r=n.find(function(t){return t.tcocode===e.target.value}),o=O.ACTION_MODE_MODIFICATION;return a.actionMode===O.ACTION_MODE_INSERTION&&(o=O.ACTION_MODE_INSERTION),r.merge({pfcordre:t.pfcordre,actionMode:o})}return a}),a.props.dispatch((0,N.change)("dealForm","deal.listdealquote["+a.props.quoteIndex+"].listdealquotecommission",r))},a.handleAddRow=function(e){var t=(0,m.default)(a.props.quote.listdealquotecommission),r=(0,m.default)(a.props.possibleCommissions[0]);r=r.merge({pfcordre:t[t.length-1].pfcordre+1,actionMode:O.ACTION_MODE_INSERTION}),t=t.concat(r),a.props.dispatch((0,N.change)("dealForm","deal.listdealquote["+a.props.quoteIndex+"].listdealquotecommission",t))},a.handleDeleteRow=function(e){var t=(0,m.default)(a.props.quote.listdealquotecommission),r=void 0;t=t.map(function(e){if(!0===e.active){if(e.actionMode!==O.ACTION_MODE_INSERTION)return e.merge({actionMode:O.ACTION_MODE_DELETION});r=e.pfcordre}return e}),r&&(t=t.filter(function(e){return e.pfcordre!==r})),a.props.dispatch((0,N.change)("dealForm","deal.listdealquote["+a.props.quoteIndex+"].listdealquotecommission",t))},a.handleRowChange=function(e,t,r){var n=a.props.quote.listdealquotecommission,o="active"===r?e.target.checked:e.target.value,s=0,l=O.ACTION_MODE_MODIFICATION;n.forEach(function(e,a){e.pfcordre===t.pfcordre&&(s=a,e.actionMode===O.ACTION_MODE_INSERTION&&(l=O.ACTION_MODE_INSERTION))});var i="deal.listdealquote["+a.props.quoteIndex+"].listdealquotecommission["+s+"].";""!==o&&(a.props.dispatch((0,N.change)("dealForm",i+r,o)),a.props.dispatch((0,N.change)("dealForm",i+"actionMode",l)),"pcfmt"===r&&a.props.dispatch((0,N.change)("dealForm",i+"pcftx",null)),"pcftx"===r&&a.props.dispatch((0,N.change)("dealForm",i+"pcfmt",null)))},a}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.accessKeys,a=(e.hidden,e.fieldName,o(e,["accessKeys","hidden","fieldName"]),["active","tcocode","pcfmt","pcftx"]),r=[{columnName:"active",displayName:"",customComponent:w.CheckBoxDisplay,customComponentMetadata:{onChange:this.handleRowChange}},{columnName:"tcocode",displayName:this.props.intl.formatMessage(j.commissionTitle),customComponent:T.default,customComponentMetadata:{refTable:S.tables.TCOMMISSION,allowEmptyParams:!0,handleChanged:this.handleEditCommission,options:this.props.possibleCommissions}},{columnName:"pcfmt",displayName:this.props.intl.formatMessage(j.commissionAmount),customComponent:w.InputDisplay,customComponentMetadata:{onChange:this.handleRowChange}},{columnName:"pcftx",displayName:this.props.intl.formatMessage(j.commissionRate),customComponent:w.InputDisplay,customComponentMetadata:{onChange:this.handleRowChange}}],n=(0,_.getComponentAccessKeys)(t,this.props.id),s=(0,A.default)("griddle",n,{defaultColumns:a,defaultColumnMetadata:r}),l=s.columns,i=s.columnMetadata;return p.default.createElement(y.default,u({type:"primary",id:this.props.id},n,t[this.props.id],{title:this.props.intl.formatMessage(j.commissionTitle),withBoder:"true"}),p.default.createElement("div",{className:"asset-tab"},p.default.createElement("button",{type:"button",className:"btn btn-primary fa fa-plus",onClick:this.handleAddRow}),p.default.createElement("button",{type:"button",className:"btn btn-primary fa fa-minus",onClick:this.handleDeleteRow})),p.default.createElement(b.default,{tableClassName:"table table-hover",useGriddleStyles:!1,results:this.props.rows.filter(function(e){return e.actionMode!==O.ACTION_MODE_DELETION}),initialSort:"pfcordre",sortAscending:!1,columns:l,columnMetadata:i,useCustomPagerComponent:!0,customPagerComponent:P.default}))}}]),t}(d.Component);t.default=x},2921:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(43),h=a(14),y=a(63),g=r(y),b=a(1101),v=(r(b),a(208)),E=r(v),O=a(17),C=a(527),P=a(357),w=function(e){function t(){var e,a,r,n;s(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return a=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleDurationChanged=function(e,t){if(r.props.dispatch((0,C.calculateTotalMileage)(t,r.props.quote.pfikilometrage)),r.props.dispatch((0,P.setQuoteFieldsModifiedFlag)(!0)),r.props.dispatch((0,h.change)(r.props.form,r.props.currentQuote+".listdealquoteelement[0].pfrmtloyer",0)),!r.props.deal.dosid){var a=new Date,n=a.setMonth(a.getMonth()+Number(t));r.props.dispatch((0,h.change)(r.props.form,E.default.getEndDateField(r.props.deal),n))}},n=a,l(r,n)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=(e.quote,e.quoteField,e.accessKeys),a=e.tpgcode,r=e.messages,n=e.currencyCode,s=e.currentQuote,l=e.durationType,i=e.pcrid,c=e.dpmdtpremiercirculation,d=e.readOnly,y=(o(e,["quote","quoteField","accessKeys","tpgcode","messages","currencyCode","currentQuote","durationType","pcrid","dpmdtpremiercirculation","readOnly"]),p.default.createElement(h.Field,u({name:s+".pfinbperiodes",component:l,currencyCode:n,options:m.tables.TMINMAXDURATION,refParams:{tpgcode:a,pcrid:i,dpmdtpremiercirculation:c}},t[s+".pfinbperiodes"],{onChange:this.handleDurationChanged,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.duration.nop.title",defaultMessage:"Duration"}),key:"periodsCount",readOnly:d})));return t[s+".pfiperiodicite"]&&t[s+".pfiperiodicite"].hidden||(y=p.default.createElement(O.Col,{md:6},y)),p.default.createElement(O.Col,{md:6},p.default.createElement(O.Row,null,y,p.default.createElement(O.Col,{md:6},p.default.createElement(h.Field,u({name:s+".pfiperiodicite",component:g.default,currencyCode:n,title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.financialquote.frequency.title",defaultMessage:"Frequency"}),options:m.tables.FREQUENCY,refParams:{tpgcode:a},key:"quote-financialProduct-frequency-field",allowEmptyParams:!0},t[s+".pfiperiodicite"],{placeholder:this.props.intl.formatMessage(r.frequencyPlaceholder),readOnly:d})))))}}]),t}(p.default.Component);t.default=w},2922:function(e,t,a){"use strict";function r(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(e){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),i(t,[{key:"renderFields",value:function(e){return e.metadatas.map(function(t){var a=e.accessKeys[t.id];return!(t.hidden||a&&a.hidden)&&c.default.createElement(t.customComponent,l({data:t.value,quoteField:e.refField},e))})}},{key:"render",value:function(){return c.default.createElement("div",null," ",this.renderFields(this.props)," ")}}]),t}(c.default.Component);t.default=d},2923:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(17),m=a(13),h=a(10),y=a(14),g=a(28),b=r(g),v=a(44),E=r(v),O=a(109),C=r(O),P=a(63),w=r(P),M=a(43),T=(a(357),a(261)),F=r(T),A=(0,h.defineMessages)({nettingPlaceHolder:{id:"pos.deal.selfpayment.netting.placeholder",defaultMessage:"Select netting"}}),_=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.dispatch((0,M.fetchReferenceTableWithParams)(M.tables.LANTUSPARAM,{tusnom:"PAYMENTDAYPOS",tpgcode:this.props.tpgcode}))}},{key:"render",value:function(){var e=this.props,t=e.accessKeys,a=e.listPaymentDayPos,r=e.listdealattribute,n=(o(e,["accessKeys","listPaymentDayPos","listdealattribute"]),a&&a.length>0?"PAYMENTDAYPOS":"PAYMENTDAY"),s=this.props.listdealquote[this.props.quoteIndex],l=null;r.length&&(l=r.findIndex(function(e){return"NETTING"===e.datcode}));var i="deal.listdealattribute["+l+"].datstringdata";return p.default.createElement("div",{className:"self-payment-form"},p.default.createElement(b.default,{type:"primary",title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.selfpayment.title",defaultMessage:"Self payment"}),withBoder:"true"},p.default.createElement(f.Row,null,p.default.createElement(f.Col,{md:6},p.default.createElement(y.Field,u({name:this.currentAsset+".dpmnumserie",component:E.default,title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.selfpayment.vinumber",defaultMessage:"VIN number"})},t[this.currentAsset+".dpmnumserie"]))),p.default.createElement(f.Col,{md:6},p.default.createElement(y.Field,u({name:F.default.getQuoteAttributeFieldValue(s,""+this.currentQuote,F.default.pfacodes.DTFIRSTPAYMENT),component:w.default,title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.selfpayment.paymentday",defaultMessage:"Payment day"}),placeholder:"",refTable:M.tables.LANTUSPARAM,refParams:{tusnom:n,tpgcode:this.props.tpgcode},clearable:!0},t[F.default.getQuoteAttributeFieldValue(s,""+this.currentQuote,F.default.pfacodes.DTFIRSTPAYMENT)])))),p.default.createElement(f.Row,null,p.default.createElement(f.Col,{md:6},p.default.createElement(y.Field,u({name:this.currentAsset+".dpmimmatriculation",component:E.default,title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.selfpayment.registrationnumber",defaultMessage:"Registration number"})},t[this.currentAsset+".dpmimmatriculation"]))),p.default.createElement(f.Col,{md:6},p.default.createElement(y.Field,u({name:this.currentAsset+".dpmdtrelease",component:C.default,title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.selfpayment.deliverydate",defaultMessage:"Delivery date"})},t[this.currentAsset+".dpmdtrelease"])))),p.default.createElement(f.Row,null,p.default.createElement(f.Col,{md:6}),p.default.createElement(f.Col,{md:6},p.default.createElement(y.Field,u({name:i,component:w.default,options:M.tables.LANTTRPARAM,refParams:{ttrnom:"NETTING"},placeholder:this.props.intl.formatMessage(A.nettingPlaceHolder),title:p.default.createElement(h.FormattedMessage,{id:"pos.deal.selfpayment.netting",defaultMessage:"NETTING"})},t[this.currentAsset+".dpmdtrelease"]))))))}},{key:"currentAsset",get:function(){return"deal.listdealasset["+this.props.assetIndex+"]"}},{key:"currentQuote",get:function(){return"deal.listdealquote["+this.props.quoteIndex+"]"}}]),t}(p.default.Component),S=function(e,t){var a=(0,y.formValueSelector)(t.form);return{assetIndex:e.newdeal.assetIndex,quoteIndex:e.newdeal.quoteIndex,deal:a(e,"deal"),listdealquote:a(e,"deal.listdealquote"),listdealattribute:a(e,"deal.listdealattribute"),listPaymentDayPos:(0,M.getReferenceTable)(e,M.tables.LANTUSPARAM,{tusnom:"PAYMENTDAYPOS",tpgcode:t.tpgcode}).data}};t.default=(0,m.connect)(S)((0,h.injectIntl)(_))},2924:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(13),f=a(14),m=a(1131),h=r(m),y=a(538),g=r(y),b=a(2820),v=r(b),E=a(28),O=r(E),C=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){return d.default.createElement(O.default,{type:"none",id:"pos.deal.actor.client.references"},d.default.createElement(h.default,i({},this.props,{id:"pos.deal.actor.client.references.address"})),d.default.createElement(g.default,i({},this.props,{listActorTelecom:this.props.actor.listactortelecom,id:"pos.deal.actor.client.references.telecom"})),d.default.createElement(v.default,i({},this.props,{id:"pos.deal.actor.client.references.bank"})))}}]),t}(d.default.Component),P=((0,f.formValueSelector)("dealForm"),function(e,t){return{}});t.default=(0,p.connect)(P)(C)},2925:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(13),f=a(10),m=(a(14),a(1121)),h=r(m),y=a(1131),g=r(y),b=a(538),v=r(b),E=a(2820),O=r(E),C=a(2821),P=r(C),w=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){return this.props.actor?d.default.createElement(h.default,i({},this.props,{id:"pos.deal.actor.coborrower.info"}),d.default.createElement(g.default,i({},this.props,{onSameAddressClick:this.props.onSameAddressClick,id:"pos.deal.actor.coborrower.address"})),d.default.createElement(v.default,i({},this.props,{listActorTelecom:this.props.actor.listactortelecom,id:"pos.deal.actor.coborrower.telecom"})),d.default.createElement(O.default,i({},this.props,{onSameBankClick:this.props.onSameBankClick})),d.default.createElement(P.default,i({},this.props,{id:"pos.deal.actor.coborrower.income"}))):null}},{key:"currentActor",get:function(){return"actors["+this.props.actorIndex+"].actor"}},{key:"currentActorAddress",get:function(){return"actors["+this.props.actorIndex+"].actor.listactoraddress[0]"}}]),t}(d.default.Component),M=function(e,t){return{}};t.default=(0,p.connect)(M)((0,f.injectIntl)(w))},2926:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(10),m=a(14),h=a(43),y=a(63),g=r(y),b=a(28),v=r(b),E=a(1121),O=r(E),C=a(2927),P=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.accessKeys;o(e,["accessKeys"]);return p.default.createElement(v.default,{type:"panel",withBorder:"true",className:"separator",id:"pos.deal.type"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-md-4"},p.default.createElement(m.Field,u({name:"deal.dealextrainfo.dcodealtype",required:!0,component:g.default,options:h.tables.LANTTRPARAM,refParams:{ttrnom:"DEALTYPE",tpgcode:this.props.tpgcode},placeholder:this.props.intl.formatMessage(C.messages.dealTypePlaceHolder),title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.client.customerinfo.dealtype.title",defaultMessage:"Deal type"})},t["deal.dealextrainfo.dcodealtype"]))),p.default.createElement("div",{className:"col-md-4"},p.default.createElement(m.Field,u({name:"deal.dprassetusage",component:g.default,options:h.tables.LANTUSPARAM,refParams:{tusnom:"ASSETUSAGE",tpgcode:this.props.tpgcode},placeholder:this.props.intl.formatMessage(C.messages.assetUsagePlaceHolder),title:p.default.createElement(f.FormattedMessage,{id:"pos.deal.client.customerinfo.assetUsage.title",defaultMessage:"Asset usage"})},t["deal.dprassetusage"])))),p.default.createElement(O.default,u({},this.props,{id:"pos.deal.actor.client.info"})))}},{key:"currentActor",get:function(){return"actors["+this.props.actorIndex+"].actor"}}]),t}(p.default.Component);t.default=(0,f.injectIntl)(P)},2927:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messages=void 0;var r=a(10);t.messages=(0,r.defineMessages)({dealTypePlaceHolder:{id:"common.actor.info.dealtype.placeholder",defaultMessage:"Select a Deal Type"},assetUsagePlaceHolder:{id:"common.actor.info.assetusage.placeholder",defaultMessage:"Select an Asset Usage"}})},2928:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(0),p=r(d),f=a(13),m=a(14),h=a(10),y=a(44),g=r(y),b=a(28),v=r(b),E=a(357),O=a(55),C=r(O),P=(t.CLIENT="CLIENT",function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"render",value:function(){this.props.actor.rolcode||this.props.dispatch((0,E.appendNewActor)(this.props.rolcode));var e=this.props,t=e.actor,a=e.accessKeys,r=(o(e,["actor","accessKeys"]),t.actor?C.default.computeV4TelecomFields(t.actor):{}),n=r.phone,s=this.props.readOnly?"read-only":"";return p.default.createElement(v.default,{type:"primary",className:"ClientVatContainer "+s,title:p.default.createElement(h.FormattedMessage,{id:"common.clientVat.form.actinfo",defaultMessage:"Customer Informations"})},p.default.createElement(m.FormSection,{name:this.currentActor},p.default.createElement(m.Field,u({component:g.default,title:p.default.createElement(h.FormattedMessage,{id:"common.clientVat.form.actsiret",defaultMessage:"VAT code"}),name:"actsiret"},a[this.currentActor+".actsiret"])),p.default.createElement(m.Field,u({component:g.default,title:p.default.createElement(h.FormattedMessage,{id:"common.clientVat.form.actnom",defaultMessage:"Name"}),name:"actnom"},a[this.currentActor+".actnom"])),p.default.createElement(m.Field,u({component:g.default,title:p.default.createElement(h.FormattedMessage,{id:"common.clientVat.form.phoneno",defaultMessage:"Phone number"}),name:n},a[this.currentActor+"."+n]))))}},{key:"currentActor",get:function(){return"actors["+this.props.actorIndex+"].actor"}}]),t}(d.Component)),w=function(e,t){var a=e.newdeal,r=(0,m.formValueSelector)(t.form),n=r(e,"actors"),o=n?n.findIndex(function(e){return e.rolcode==t.rolcode}):-1,s=r(e,"actors["+o+"]")||{};return{readOnly:a.readOnly,actor:s,actorIndex:o}};t.default=(0,f.connect)(w)((0,h.injectIntl)(P))},2929:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.COBORROWER=t.BORROWER=t.COCLIEN=t.CLIENT=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(13),f=a(10),m=a(14),h=a(17),y=a(28),g=r(y),b=a(43),v=a(173),E=a(63),O=r(E),C=a(357),P=[],w=t.CLIENT="CLIENT",M=t.COCLIEN="COCLIEN",T=t.BORROWER="EMPRUNT",F=t.COBORROWER="COEMPRU",A=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChangeProduct=function(e){if(e){a.props.dispatch((0,m.change)(a.props.form,"deal.listdealquote[0].tpgcode",e.code));var t=P;e.customFields&&(t=e.customFields.rolcode===w?{customerRolcode:w,removeCustomerRolcode:T,coCustomerRolcode:M,removeCoCustomerRolcode:F}:{customerRolcode:T,removeCustomerRolcode:w,coCustomerRolcode:F,removeCoCustomerRolcode:M},a.dispatch((0,C.setCustomerRolecodes)(t.customerRolcode,t.coCustomerRolcode)),a.props.actors&&1==a.props.actors.length?a.props.dispatch((0,C.updateCustomerRoles)(a.props.form,a.props.actors,t.customerRolcode,t.removeCustomerRolcode)):a.props.actors&&a.props.actors.length>1&&(a.props.dispatch((0,C.updateCustomerRoles)(a.props.form,a.props.actors,t.customerRolcode,t.removeCustomerRolcode)),a.props.dispatch((0,C.updateCustomerRoles)(a.props.form,a.props.actors,t.coCustomerRolcode,t.removeCoCustomerRolcode))))}},a.handleVariantInit=function(){a.props.dispatch((0,v.batchActions)([(0,m.change)(a.props.form,a.currentAsset+".taxcode",null),(0,m.change)(a.props.form,a.currentAsset+".dpmmtvat",null),(0,m.change)(a.props.form,a.currentAsset+".dpmmtttc",null),(0,m.change)(a.props.form,a.currentAsset+".dpmenergie",null),(0,m.change)(a.props.form,a.currentAsset+".dpmlibelle",null),(0,m.change)(a.props.form,a.currentAsset+".dpmmtinvest",null),(0,m.change)(a.props.form,a.currentAsset+".varid",null),(0,m.change)(a.props.form,a.currentAsset+".makid",null),(0,m.change)(a.props.form,a.currentQuote+".pfiinvestissement",null),(0,m.change)(a.props.form,a.currentQuote+".listdealquoteattribute[0].pfadouble",null)]))},a.dispatch=e.dispatch,a}return l(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.boxTitle,a=e.deal,r=e.accessKeys,n=a.tpgcode,o=a.taccode,s=a.actid,l=this.props.readOnly?"read-only":"",u={company:{title:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.company.title",defaultMessage:"Company"}),placeholder:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.company.placeholder",defaultMessage:"Select a company"})},businessType:{title:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.businessType.title",defaultMessage:"Business Type"}),placeholder:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.businessType.placeholder",defaultMessage:"Select a business type"})},product:{title:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.product.title",defaultMessage:"Product"}),placeholder:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.product.placeholder",defaultMessage:"Select a product"})},currency:{title:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.currency.title",defaultMessage:"Currency"}),placeholder:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.currency.placeholder",defaultMessage:"Selcet a currency"})},department:{title:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.department.title",defaultMessage:"Department"}),placeholder:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.department.placeholder",defaultMessage:"Select a department"})},SalesNetwork:{title:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.SalesNetwork.title",defaultMessage:"Sales Network"}),placeholder:d.default.createElement(f.FormattedMessage,{id:"common.financialProductContainer.form.SalesNetwork.placeholder",defaultMessage:"Select a Sales Network"})}};return d.default.createElement(g.default,{type:"primary",className:"FinancialProductContainer "+l,title:t,withBoder:"true"},d.default.createElement(m.FormSection,{name:"deal"},d.default.createElement(h.Row,null,d.default.createElement(m.Field,i({component:O.default,name:"actid",options:b.tables.COMPANY},u.company,{groupClassName:"col-sm-6 col-xs-12"},r["deal.actid"])),d.default.createElement(m.Field,i({component:O.default,name:"taccode",options:b.tables.BUISNESS_TYPE,refParams:{actidgest:s}},u.businessType,{groupClassName:"col-sm-6 col-xs-12"},r["deal.taccode"]))),d.default.createElement(h.Row,null,d.default.createElement(m.Field,i({component:O.default,name:"tpgcode",options:b.tables.PRODUCTS,refParams:{taccode:o},groupClassName:"col-sm-6 col-xs-12",onValueChange:this.handleChangeProduct},u.product,r["deal.tpgcode"])),d.default.createElement(m.Field,i({component:O.default,name:"devcode",options:b.tables.CURRENCY,refParams:{tpgcode:n}},u.currency,{groupClassName:"col-sm-6 col-xs-12",onChange:this.handleVariantInit},r["deal.devcode"]))),d.default.createElement(h.Row,null,d.default.createElement(m.Field,i({component:O.default,name:"dprsectgestion",options:b.tables.DEPARTMENTS,refParams:{tpgcode:n}},u.department,{groupClassName:"col-sm-6 col-xs-12"},r["deal.dprsectgestion"])),d.default.createElement(m.Field,i({component:O.default,name:"dprreseaucial",options:b.tables.RELATIONVALEURPROFIL,refParams:{reccode:"INTERVDOSRESEAU",tpgcode:n}},u.SalesNetwork,{groupClassName:"col-sm-6 col-xs-12"},r["deal.dprreseaucial"])))))}},{key:"currentAsset",get:function(){return"deal.listdealasset["+this.props.assetIndex+"]"}},{key:"currentQuote",get:function(){return"deal.listdealquote["+this.props.quoteIndex+"]"}}]),t}(d.default.Component);A.PropTypes={form:d.default.PropTypes.string.isRequired,name:d.default.PropTypes.string.isRequired,boxTitle:d.default.PropTypes.string};var _=function(e,t){var a=e.newdeal,r=(0,m.getFormValues)(t.form)(e).actors;return{deal:(0,m.formValueSelector)(t.form)(e,"deal"),assetIndex:e.newdeal.assetIndex,readOnly:a.readOnly,actors:r}};t.default=(0,p.connect)(_)(A)},2930:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralInfoMFContainer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(13),f=a(28),m=r(f);a(1119);var h=a(17),y=a(14),g=a(10),b=a(63),v=r(b),E=a(44),O=r(E),C=a(109),P=r(C),w=a(356),M=r(w),T=a(43),F=a(2699),A=r(F),_=a(2671),S=r(_),N=a(24),j=r(N),x=a(357),k=a(64),R=t.GeneralInfoMFContainer=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.calculateFinancingAmount=function(e,t){var r=10*t;a.props.dispatch((0,y.change)("dealForm","deal.listdealquote[0].pfiinvestissement",r))},a.handleProductChanged=function(e){for(var t=0;t<a.props.listdealquote.length;t++)a.dispatch((0,y.change)(a.props.form,"deal.listdealquote["+t+"].tpgcode",e.code));a.dispatch((0,x.applyProductFamily)())},a.handleScaleChanged=function(e){var t=(0,j.default)(a.props.quote),r=e.code||e.target.value,n=r.split("_");if(2==n.length){var o=parseInt(n[0]),s=parseInt(n[1]);t=t.merge({pcrid:o,pcrordre:s}),a.dispatch((0,y.change)(a.props.form,a.currentQuote,t))}},a.handleSearchActorBorrow=function(e,t){var r={actsiret:t};r.actsiret?(a.props.dispatch((0,x.findBorrowActor)(r,a.props.actorIndex)),null===a.props.actor.actor.actid&&k.notify.show(a.props.intl.formatMessage(S.default.actorNonexistent),"error")):k.notify.show(a.props.intl.formatMessage(S.default.actorSearchFailed),"error")},a.dispatch=e.dispatch,a}return l(t,e),u(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,T.fetchReferenceTableWithParams)(T.tables.LANTPROFILGESTION));if(this.props.dispatch((0,x.appendNewActor)("EMPRUNT",this.props.intl)),this.props.actiddealerconnected){var e={actid:this.props.actiddealerconnected};this.props.dispatch((0,x.findBorrowActor)(e,this.props.actorIndex))}}},{key:"render",value:function(){var e=this.props,t=e.quote,a=(e.listdealquote,e.tpgcode,e.pcrid,e.accessKeys),r="";return t&&(r=t.pcrid+"_"+t.pcrordre),d.default.createElement("div",{className:"row newDeal"},d.default.createElement(m.default,{type:"primary",title:"Request for Credit Application"},d.default.createElement(h.Col,{md:6},d.default.createElement(h.Row,null,d.default.createElement(h.Col,{md:6},d.default.createElement(y.Field,{name:this.currentActor+".actnom",component:O.default,title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.masterfacility.generalinfomf.name",defaultMessage:"Name"})})),d.default.createElement(h.Col,{md:6},d.default.createElement(y.Field,{name:this.currentActor+".actsiret",component:O.default,onBlur:this.handleSearchActorBorrow,title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.masterfacility.generalinfomf.siret",defaultMessage:"Siret#"})})),d.default.createElement(h.Col,{md:1}),d.default.createElement(h.Col,{md:10},"  ",d.default.createElement(y.Field,{name:"deal.dprdtcreation",component:P.default,title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.masterfacility.generalinfomf.dateEntry",defaultMessage:"Date to begin the credit application"})})),d.default.createElement(y.Field,i({component:v.default,onValueChange:this.handleProductChanged,name:"deal.tpgcode",options:this.props.listFinancialProduct},a[this.currentQuote+".tpgcode"],{title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.masterfacility.generalinfomf.product",defaultMessage:"Financial product"})})))),d.default.createElement(h.Col,{md:6},d.default.createElement(h.Row,null,d.default.createElement(h.Col,{md:1}),d.default.createElement(h.Col,{md:1}),d.default.createElement(h.Col,{md:10},d.default.createElement(y.Field,{name:"amount",component:M.default,title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.masterfacility.generalinfomf.amount",defaultMessage:"Risk fund Deposit amount"}),onChange:this.calculateFinancingAmount}),d.default.createElement(y.Field,{name:"deal.listdealquote[0].pfiinvestissement",component:M.default,title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.masterfacility.generalinfomf.amountTax",defaultMessage:"Amount exd.tax of the credit request"}),keyValue:"pos.deal.mf.generalinfomf.pfiinvestissement"}),d.default.createElement(A.default,i({value:r,title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.masterfacility.generalinfomf.scale",defaultMessage:"Scale"}),key:"scale",placeholder:this.props.intl.formatMessage(S.default.quotescalePlaceholder),taccode:this.props.values.taccode,tpgcode:this.props.values.tpgcode,deal:this.props.deal,devcode:this.props.values.devcode,pfiinvestissement:this.props.quote.pfiinvestissement,pfinbperiod:this.props.quote.pfinbperiodes,dprreseaucial:this.props.values.dprreseaucial,onChange:this.handleScaleChanged},a["pos.deal.mf.generalinfomf.scale"])))))))}},{key:"currentQuote",get:function(){return"deal.listdealquote["+this.props.quoteIndex+"]"}},{key:"currentActor",get:function(){return"actors["+this.props.actorIndex+"].actor"}}]),t}(c.Component),D=(0,y.formValueSelector)("dealForm"),I=function(e,t){var a=e.newdeal.quoteIndex?e.newdeal.quoteIndex:0,r=D(e,"deal.listdealquote["+a+"]"),n=r.pcrid?r.pcrid:0,o=(0,y.getFormValues)(t.form)(e).deal,s=o.tpgcode||"TOUT",l=(e.newdeal.formValues.deal,t.accessKeys.options,t.route&&t.route.path,D(e,"actors")),i=l?l.findIndex(function(e){return e.rolcode==t.rolcode}):-1,u=D(e,"actors["+i+"]")||{};return{listdealattribute:D(e,"deal.listdealattribute"),listdealquote:D(e,"deal.listdealquote"),listFinancialProduct:(0,T.getReferenceTable)(e,T.tables.LANTPROFILGESTION).data,actiddealerconnected:e.authentication.user.actiddealerconnected,actor:u,actorIndex:i,deal:o,quote:r,pcrid:n,tpgcode:s,values:o,quoteIndex:a}};t.default=(0,p.connect)(I)((0,g.injectIntl)(R))},2931:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(0),c=r(u),d=a(14),p=a(17),f=a(10),m=a(54),h=a(109),y=r(h),g=a(44),b=r(g),v=a(63),E=r(v),O=a(43),C=function(e){var t={};return e.dpmnumserie?e.dpmnumserie&&17!=e.dpmnumserie.length&&(t.dpmnumserie=m.GlobalMessages.InvalidVinNumber):t.dpmnumserie=m.GlobalMessages.fieldRequire,e.dpmdtrelease||(t.dpmdtrelease=m.GlobalMessages.fieldRequire),e.deliveryplace||(t.deliveryplace=m.GlobalMessages.fieldRequire),t},P=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(p.Row,null,c.default.createElement(p.Col,{lg:6,md:6,sm:6,xs:6},c.default.createElement(d.Field,{name:"dpmnumserie",component:b.default,title:c.default.createElement(f.FormattedMessage,{id:"pos.deal.deliverevent.popup.vinumber.title",defaultMessage:"VIN Number"})}))),c.default.createElement(p.Row,null,c.default.createElement(p.Col,{lg:3,md:3,sm:3,xs:3},c.default.createElement(d.Field,{name:"dpmdtrelease",component:y.default,title:c.default.createElement(f.FormattedMessage,{id:"pos.deal.deliverevent.popup.deliverydate.title",defaultMessage:"Delivery Date"})})),c.default.createElement(p.Col,{lg:3,md:3,sm:3,xs:3},c.default.createElement(d.Field,{name:"deliveryplace",component:E.default,allowEmptyParams:!0,options:O.tables.LANTUSPARAM,refParams:{tusnom:"DELIPLACE"},title:c.default.createElement(f.FormattedMessage,{id:"pos.deal.deliverevent.popup.deliveryplace.title",defaultMessage:"Delivery Place"})}))))}}]),t}(c.default.Component);t.default=P=(0,d.reduxForm)({form:"deliveryForm",validate:C})(P)},2932:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],o=Object.getOwnPropertyDescriptor(t,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function o(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),d=r(c),p=a(13),f=a(2643),m=r(f),h=a(2711),y=r(h),g=a(10),b=a(2779),v=r(b),E=a(2781),O=r(E),C=a(357),P=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleErrorClick=function(){a.props.handleFaultyStep(a.props.syncErrors,"dealForm")},a.handleTabChange=function(e){a.dispatch((0,C.clientTabChange)(e))},a.dispatch=e.dispatch,a}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.submitFailed,r=t.assetIndex,n=t.accessKeys,s=t.quoteIndex,l=t.variant,i=t.control,u=t.dosid,c=t.rateTaxValue,p=t.error,f=o(t,["submitFailed","assetIndex","accessKeys","quoteIndex","variant","control","dosid","rateTaxValue","error"]);if(this.props.dealLoading)return null;var h=[{key:"summary",title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.summary.title",defaultMessage:"Summary"}),body:d.default.createElement(v.default,{form:"dealForm",dealPath:"deal",variant:l,isMF:f.isMF,accessKeys:n,assetIndex:r,quoteIndex:s,rateTaxValue:c}),active:!1,id:"pos.deal.summary"},{key:"timeline",title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.timeline.title",defaultMessage:"Timeline"}),body:d.default.createElement(O.default,{dosid:u}),active:!1,id:"pos.deal.timeline"}];(a&&p||i&&i.controlemsgList&&i.controlemsgList.length>0)&&h.push({key:"errors",title:d.default.createElement(g.FormattedMessage,{id:"pos.deal.controls",defaultMessage:"Controls"}),body:d.default.createElement(y.default,{errors:p,control:i,onErrorClick:this.handleErrorClick}),active:!0,id:"pos.deal.errors"});var b=h.find(function(t){return t.key===e.props.clientTabKey});return b&&(b.active=!0),d.default.createElement(m.default,{className:"summary",tabs:h,handleTabChange:this.handleTabChange,accessKeys:n})}}]),t}(c.Component),w=function(e,t){var a=+e.newdeal.isMF;return{dosid:e.newdeal.formValues.deal.dosid,control:e.newdeal.control,variant:e.newdeal.variant[e.newdeal.assetIndex],assetIndex:e.newdeal.assetIndex,quoteIndex:e.newdeal.quoteIndex,rateTaxValue:e.newdeal.rateTaxValue,clientTabKey:e.newdeal.clientTabKey,isMF:a,dealLoading:e.newdeal.dealLoading}};t.default=(0,p.connect)(w,{handleFaultyStep:C.handleFaultyStep})(P),P.propTypes={error:c.PropTypes.array,syncErrors:c.PropTypes.object,accessKeys:c.PropTypes.object,submitFailed:c.PropTypes.bool}},2933:function(e,t,a){function r(e){return e&&e.length?n(e,s,o):void 0}var n=a(2934),o=a(2935),s=a(178);e.exports=r},2934:function(e,t,a){function r(e,t,a){for(var r=-1,o=e.length;++r<o;){var s=e[r],l=t(s);if(null!=l&&(void 0===i?l===l&&!n(l):a(l,i)))var i=l,u=s}return u}var n=a(180);e.exports=r},2935:function(e,t){function a(e,t){return e>t}e.exports=a}});
//# sourceMappingURL=1.370c015abbee4d81c064.js.map